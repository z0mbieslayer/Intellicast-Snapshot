Array.prototype.indexOf||(Array.prototype.indexOf=function(c,a){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var b=this.length>>>0;a=+a||0;Infinity===Math.abs(a)&&(a=0);0>a&&(a+=b,0>a&&(a=0));for(;a<b;a++)if(this[a]===c)return a;return-1});
Date.now||(Date.now=function(){return +new Date});
if(!Function.prototype.bind){Function.prototype.bind=function(e){function s(){}if(typeof this!=="function"){throw new TypeError("Bind must be called on a function")}var t=[].slice,n=t.call(arguments,1),r=this,i=function(){return r.apply(this instanceof s?this:e||{},n.concat(t.call(arguments)))};s.prototype=r.prototype;i.prototype=new s;return i}}
if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){function u(){if(!v){try{var a=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}v=!0;for(var a=z.length,c=0;c<a;c++)z[c]()}}function M(a){v?a():z[z.length]=a}function N(a){if("undefined"!=typeof n.addEventListener)n.addEventListener("load",a,!1);else if("undefined"!=typeof d.addEventListener)d.addEventListener("load",a,!1);else if("undefined"!=typeof n.attachEvent)U(n,"onload",a);else if("function"==typeof n.onload){var b=
n.onload;n.onload=function(){b();a()}}else n.onload=a}function V(){var a=d.getElementsByTagName("body")[0],b=d.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var f=0;(function(){if("undefined"!=typeof c.GetVariable){var g=c.GetVariable("$version");g&&(g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}else if(10>f){f++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;E()})()}else E()}
function E(){var a=r.length;if(0<a)for(var b=0;b<a;b++){var c=r[b].id,f=r[b].callbackFn,g={success:!1,id:c};if(0<e.pv[0]){var d=p(c);if(d)if(!A(r[b].swfVersion)||e.wk&&312>e.wk)if(r[b].expressInstall&&F()){g={};g.data=r[b].expressInstall;g.width=d.getAttribute("width")||"0";g.height=d.getAttribute("height")||"0";d.getAttribute("class")&&(g.styleclass=d.getAttribute("class"));d.getAttribute("align")&&(g.align=d.getAttribute("align"));for(var h={},d=d.getElementsByTagName("param"),k=d.length,l=0;l<
k;l++)"movie"!=d[l].getAttribute("name").toLowerCase()&&(h[d[l].getAttribute("name")]=d[l].getAttribute("value"));G(g,h,c,f)}else W(d),f&&f(g);else w(c,!0),f&&(g.success=!0,g.ref=H(c),f(g))}else w(c,!0),f&&((c=H(c))&&"undefined"!=typeof c.SetVariable&&(g.success=!0,g.ref=c),f(g))}}function H(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function F(){return!B&&A("6.0.65")&&(e.win||e.mac)&&!(e.wk&&312>e.wk)}
function G(a,b,c,f){B=!0;I=f||null;O={success:!1,id:c};var g=p(c);if(g){"OBJECT"==g.nodeName?(y=J(g),C=null):(y=g,C=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";d.title=d.title.slice(0,47)+" - Flash Player Installation";f=e.ie&&e.win?"ActiveX":"PlugIn";f="MMredirectURL="+encodeURI(n.location).toString().replace(/&/g,"%26")+"&MMplayerType="+
f+"&MMdoctitle="+d.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+f):f;e.ie&&e.win&&4!=g.readyState&&(f=d.createElement("div"),c+="SWFObjectNew",f.setAttribute("id",c),g.parentNode.insertBefore(f,g),g.style.display="none",function(){4==g.readyState?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}());K(a,b,c)}}function W(a){if(e.ie&&e.win&&4!=a.readyState){var b=d.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(J(a),b);a.style.display="none";
(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(J(a),a)}function J(a){var b=d.createElement("div");if(e.win&&e.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,f=0;f<c;f++)1==a[f].nodeType&&"PARAM"==a[f].nodeName||8==a[f].nodeType||b.appendChild(a[f].cloneNode(!0));return b}function K(a,b,c){var f,g=p(c);if(e.wk&&312>e.wk)return f;if(g)if("undefined"==typeof a.id&&
(a.id=c),e.ie&&e.win){var q="",h;for(h in a)a[h]!=Object.prototype[h]&&("data"==h.toLowerCase()?b.movie=a[h]:"styleclass"==h.toLowerCase()?q+=' class="'+a[h]+'"':"classid"!=h.toLowerCase()&&(q+=" "+h+'="'+a[h]+'"'));h="";for(var k in b)b[k]!=Object.prototype[k]&&(h+='<param name="'+k+'" value="'+b[k]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+q+">"+h+"</object>";D[D.length]=a.id;f=p(a.id)}else{k=d.createElement("object");k.setAttribute("type","application/x-shockwave-flash");
for(var l in a)a[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?k.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&k.setAttribute(l,a[l]));for(q in b)b[q]!=Object.prototype[q]&&"movie"!=q.toLowerCase()&&(a=k,h=q,l=b[q],c=d.createElement("param"),c.setAttribute("name",h),c.setAttribute("value",l),a.appendChild(c));g.parentNode.replaceChild(k,g);f=k}return f}function P(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(e.ie&&e.win?(b.style.display="none",function(){if(4==b.readyState){var c=p(a);
if(c){for(var f in c)"function"==typeof c[f]&&(c[f]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=null;try{b=d.getElementById(a)}catch(c){}return b}function U(a,b,c){a.attachEvent(b,c);x[x.length]=[a,b,c]}function A(a){var b=e.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function Q(a,b,c,f){if(!e.ie||
!e.mac){var g=d.getElementsByTagName("head")[0];g&&(c=c&&"string"==typeof c?c:"screen",f&&(L=m=null),m&&L==c||(f=d.createElement("style"),f.setAttribute("type","text/css"),f.setAttribute("media",c),m=g.appendChild(f),e.ie&&e.win&&"undefined"!=typeof d.styleSheets&&0<d.styleSheets.length&&(m=d.styleSheets[d.styleSheets.length-1]),L=c),e.ie&&e.win?m&&"object"==typeof m.addRule&&m.addRule(a,b):m&&"undefined"!=typeof d.createTextNode&&m.appendChild(d.createTextNode(a+" {"+b+"}")))}}function w(a,b){if(R){var c=
b?"visible":"hidden";v&&p(a)?p(a).style.visibility=c:Q("#"+a,"visibility:"+c)}}function S(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var n=window,d=document,t=navigator,T=!1,z=[function(){T?V():E()}],r=[],D=[],x=[],y,C,I,O,v=!1,B=!1,m,L,R=!0,e=function(){var a="undefined"!=typeof d.getElementById&&"undefined"!=typeof d.getElementsByTagName&&"undefined"!=typeof d.createElement,b=t.userAgent.toLowerCase(),c=t.platform.toLowerCase(),f=c?/win/.test(c):
/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\v1",e=[0,0,0],h=null;if("undefined"!=typeof t.plugins&&"object"==typeof t.plugins["Shockwave Flash"])!(h=t.plugins["Shockwave Flash"].description)||"undefined"!=typeof t.mimeTypes&&t.mimeTypes["application/x-shockwave-flash"]&&!t.mimeTypes["application/x-shockwave-flash"].enabledPlugin||(T=!0,g=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),e[0]=parseInt(h.replace(/^(.*)\..*$/,
"$1"),10),e[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),e[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof n.ActiveXObject)try{var k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");k&&(h=k.GetVariable("$version"))&&(g=!0,h=h.split(" ")[1].split(","),e=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)])}catch(l){}return{w3:a,pv:e,wk:b,ie:g,win:f,mac:c}}();(function(){e.w3&&(("undefined"!=typeof d.readyState&&"complete"==d.readyState||
"undefined"==typeof d.readyState&&(d.getElementsByTagName("body")[0]||d.body))&&u(),v||("undefined"!=typeof d.addEventListener&&d.addEventListener("DOMContentLoaded",u,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){"complete"==d.readyState&&(d.detachEvent("onreadystatechange",arguments.callee),u())}),n==top&&function(){if(!v){try{d.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}u()}}()),e.wk&&function(){v||(/loaded|complete/.test(d.readyState)?u():
setTimeout(arguments.callee,0))}(),N(u)))})();(function(){e.ie&&e.win&&window.attachEvent("onunload",function(){for(var a=x.length,b=0;b<a;b++)x[b][0].detachEvent(x[b][1],x[b][2]);a=D.length;for(b=0;b<a;b++)P(D[b]);for(var c in e)e[c]=null;e=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})})();return{registerObject:function(a,b,c,f){if(e.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=f;r[r.length]=d;w(a,!1)}else f&&f({success:!1,id:a})},getObjectById:function(a){if(e.w3)return H(a)},
embedSWF:function(a,b,c,d,g,q,h,k,l,n){var p={success:!1,id:b};e.w3&&!(e.wk&&312>e.wk)&&a&&b&&c&&d&&g?(w(b,!1),M(function(){c+="";d+="";var e={};if(l&&"object"===typeof l)for(var m in l)e[m]=l[m];e.data=a;e.width=c;e.height=d;m={};if(k&&"object"===typeof k)for(var r in k)m[r]=k[r];if(h&&"object"===typeof h)for(var t in h)m.flashvars="undefined"!=typeof m.flashvars?m.flashvars+("&"+t+"="+h[t]):t+"="+h[t];if(A(g))r=K(e,m,b),e.id==b&&w(b,!0),p.success=!0,p.ref=r;else{if(q&&F()){e.data=q;G(e,m,b,n);return}w(b,
!0)}n&&n(p)})):n&&n(p)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(a,b,c){if(e.w3)return K(a,b,c)},showExpressInstall:function(a,b,c,d){e.w3&&F()&&G(a,b,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,b,c,d){e.w3&&Q(a,b,c,d)},addDomLoadEvent:M,addLoadEvent:N,callDomLoadFunctions:u,getQueryParamValue:function(a){var b=d.location.search||d.location.hash;if(b){/\?/.test(b)&&
(b=b.split("?")[1]);if(null==a)return S(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return S(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(B){var a=p("SWFObjectExprInst");a&&y&&(a.parentNode.replaceChild(y,a),C&&(w(C,!0),e.ie&&e.win&&(y.style.display="block")),I&&I(O));B=!1}}}}();

(function(){function sg(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var mg;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new sg);if(null==window.AKAMAI_MEDIA_PLAYER["AMP Premier - Weather Channel v0.16.0.0006"]){mg=
window.AKAMAI_MEDIA_PLAYER["AMP Premier - Weather Channel v0.16.0.0006"]={};var tg=function(a){return{}.hasOwnProperty(a)},f=function(a,b){function c(){this.constructor=a}for(var e in b)tg.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},Gd=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},ug=function(a,b){return function(){return a.apply(b,arguments)}},d;d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",
TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",PLAY_STATE_CHANGE:"playstatechange",TOGGLE_FULL_SCREEN:"toggleFullScreen",CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",FULL_SCREEN_CHANGE:"fullscreenchange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",LANGUAGE_CHANGE:"languageChange",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",
SET_MEDIA:"setmedia",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",LOAD_FEED:"loadFeed",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",
ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",ADD_CUE_POINTS:"addCuePoints",REMOVE_CUE_POINTS:"removeCuePoints",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",
DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",
TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",CHANGE_CONTENT:"changecontent",CONTENT_CHANGED:"contentchanged"};var N=function(a,b){N.__super__.constructor.call(this,this.getModuleName()+"-"+Date.now());this.logger=U;this.config=a;this.moduleMap={};this.viewComponent=b;this.initialize();this.moduleAPI=
this.createAPI()};f(N,puremvc.Facade);N.prototype.logger=null;N.prototype.config=null;N.prototype.moduleName=null;N.prototype.moduleMap=null;N.prototype.viewComponent=null;N.prototype.moduleAPI=null;N.prototype.initialize=function(){this.createModel();this.createController();this.createView()};N.prototype.createModel=function(){this.registerProxy(new w(this.config))};N.prototype.createView=function(){};N.prototype.createController=function(){};N.prototype.createAPI=function(){return new tb(this)};
N.prototype.getModuleName=function(){return this.moduleName};N.prototype.getConfig=function(){return this.config};N.prototype.hasModule=function(a){return null!=this.moduleMap[a]};N.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=e[a],b[a]=c.module;return b};N.prototype.registerModule=function(a){var b,c,e;e=a.getModuleName();null!=a&&null==this.moduleMap[e]&&(b=new Jb(a),this.moduleMap[e]=b,this.registerMediator(b),b=this.getAPI(),c=a.getAPI(),null!=b&&null!=c&&(b[e]=
c),a.onRegister())};N.prototype.retrieveModule=function(a){return this.moduleMap[a].module};N.prototype.removeModule=function(a){var b,c;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),c=this.getAPI(),null!=(null!=c?c[a]:void 0)&&delete c[a],b.module.onRemove(),b.module};N.prototype.getAPI=function(){return this.moduleAPI};N.prototype.listNotificationInterests=function(){return[]};N.prototype.listNotificationPublications=function(){return[]};N.prototype.listNotificationEvents=
function(){return[]};N.prototype.getViewComponent=function(){return this.viewComponent};N.prototype.setViewComponent=function(a){return this.viewComponent=a};N.prototype.onRegister=function(){};N.prototype.onRemove=function(){};N.prototype.destroy=function(){var a;null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");puremvc.Facade.removeCore(this.multitonKey);for(a in this)this[a]=null,delete this[a]};var tb=function(a){tb.attachModuleDispatcher(a,new Ha(this))};
tb.attachModuleDispatcher=function(a,b){var c,e;a.registerMediator(b);e=b.dispatcher;c=b.api;c.addEventListener=e.addEventListener.bind(e);c.removeEventListener=e.removeEventListener.bind(e);c.dispatchEvent=e.dispatchEvent.bind(e);!0===a.logger.enabled&&(c.getModule=function(){return a})};tb.prototype.addEventListener=function(a,b,c){};tb.prototype.dispatchEvent=function(a){};tb.prototype.removeEventListener=function(a,b,c){};var w=function(a){this.config=a;w.__super__.constructor.call(this)};f(w,
puremvc.Proxy);w.NAME="ModuleProxy";w.prototype.defaults=null;w.prototype.config=null;w.prototype.initializeNotifier=function(a){w.__super__.initializeNotifier.call(this,a);this.createData()};w.prototype.createData=function(){null!=this.config&&this.setData(this.config)};w.prototype.getData=function(){return this.data};w.prototype.setData=function(a){var b,c,e,l;e={};l=this.defaults;for(c in l)b=l[c],b=c in a?a[c]:b,e[c]=b;this.data=e;return a};var ng=function(a){a.className=nd.PREFIX+"player";a=
Ya.create("install-flash",a);Ya.create(null,a,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");a=Ya.create(null,a,"a");a.href="http://www.adobe.com/go/getflashplayer";a=Ya.create(null,a,"img");a.src="../www.adobe.com/images/shared/download_buttons/get_flash_player.gif";a.alt="Get Adobe Flash player"};ng.prototype.getModules=function(){return[]};ng.prototype.getAPI=function(){return{}};var te=function(){te.__super__.constructor.call(this)};f(te,puremvc.SimpleCommand);
te.prototype.execute=function(a){a=this.facade.retrieveProxy(y.NAME).getActiveState()===Ra.ACTIVE?Ra.INACTIVE:Ra.ACTIVE;this.sendNotification(d.CHANGE_ACTIVE_STATE,a)};var ue=function(){ue.__super__.constructor.call(this)};f(ue,puremvc.SimpleCommand);ue.prototype.execute=function(a){a=this.facade.retrieveProxy(y.NAME).getDisplayState()===ca.FULL_SCREEN?ca.NORMAL:ca.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var ve=function(){ve.__super__.constructor.call(this)};f(ve,puremvc.SimpleCommand);
ve.prototype.execute=function(a){this.sendNotification(d.DISPATCH_EVENT,new R(d.PAUSED))};var we=function(){we.__super__.constructor.call(this)};f(we,puremvc.SimpleCommand);we.prototype.execute=function(a){this.facade.retrieveProxy(H.NAME).setAutoplay(a.getBody())};var xe=function(){xe.__super__.constructor.call(this)};f(xe,puremvc.SimpleCommand);xe.prototype.execute=function(a){this.facade.retrieveProxy(H.NAME).setLoop(a.getBody())};var ye=function(){ye.__super__.constructor.call(this)};f(ye,puremvc.SimpleCommand);
ye.prototype.execute=function(a){this.facade.retrieveProxy(n.NAME).setVolume(a.getBody())};var Hd=function(){Hd.__super__.constructor.call(this)};f(Hd,puremvc.SimpleCommand);Hd.prototype.execute=function(a){var b,c,e,l;e=a.getBody();c=this.facade.retrieveProxy(n.NAME);a=this.facade.retrieveProxy(q.NAME);0===e&&a.getType()===g.mimeTypes.m3u8&&(e=0.25);l=this.facade.getVideo();0===l.readyState?(b=function(a){l.removeEventListener("loadedmetadata",b,!1);return c.setCurrentTime(e)},l.addEventListener("loadedmetadata",
b,!1)):c.setCurrentTime(e);this.sendNotification(d.CHANGE_PLAY_STATE,I.WAITING)};var ze=function(){ze.__super__.constructor.call(this)};f(ze,puremvc.SimpleCommand);ze.prototype.execute=function(a){this.facade.retrieveProxy(y.NAME).setSeeking(!0)};var Ae=function(){Ae.__super__.constructor.call(this)};f(Ae,puremvc.SimpleCommand);Ae.prototype.execute=function(a){this.facade.retrieveProxy(n.NAME).getSrc();this.facade.retrieveProxy(y.NAME).setSeeking(!1);"desktop"===g.getDevice()&&this.sendNotification(d.CHANGE_PLAY_STATE,
I.PLAYING)};var Be=function(){Be.__super__.constructor.call(this)};f(Be,puremvc.SimpleCommand);Be.prototype.execute=function(a){this.facade.retrieveProxy(n.NAME).setCurrentTime(0.25);this.sendNotification(d.PLAY);this.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING)};var Ce=function(){Ce.__super__.constructor.call(this)};f(Ce,puremvc.SimpleCommand);Ce.prototype.execute=function(a){this.facade.logger.debug("EndCommand",a);a.getBody();a=this.facade.retrieveProxy(n.NAME);a.pause();a.getCurrentTime()!==
a.getDuration()&&a.setCurrentTime(a.getDuration())};var De=function(){De.__super__.constructor.call(this)};f(De,puremvc.SimpleCommand);De.prototype.execute=function(a){this.facade.retrieveProxy(y.NAME).setIsUserActive(a.getBody())};var Ee=function(){Ee.__super__.constructor.call(this)};f(Ee,puremvc.SimpleCommand);Ee.prototype.execute=function(a){this.facade.logger.debug("WaitingCommand");this.facade.retrieveProxy(y.NAME).getPlayState()!==I.LOADING&&g.getMimeType(this.facade.getVideo().src)!==g.mimeTypes.mp4&&
this.sendNotification(d.CHANGE_PLAY_STATE,I.WAITING)};var Fe=function(){Fe.__super__.constructor.call(this)};f(Fe,puremvc.SimpleCommand);Fe.prototype.execute=function(a){this.facade.retrieveProxy(n.NAME).setMuted(a.getBody())};var Ge=function(){Ge.__super__.constructor.call(this)};f(Ge,puremvc.SimpleCommand);Ge.prototype.execute=function(a){var b;this.facade.logger.debug("CheckAuthorizationCommand");b=this.facade.retrieveProxy(na.NAME);a=a.getBody();b.setMedia(a);!1===b.getAuthorized()?this.sendNotification(ja.AUTHORIZE,
a):this.sendNotification(d.MEDIA_CHANGE,a)};var He=function(){He.__super__.constructor.call(this)};f(He,puremvc.SimpleCommand);He.prototype.execute=function(a){var b;this.facade.logger.debug("AuthorizedCommand");a=this.facade.retrieveProxy(q.NAME);a.authorized=!0;b=this.facade.retrieveProxy(na.NAME).createURL(a.getSrc());a.setSrc(b);this.sendNotification(d.MEDIA_CHANGE,a.getData())};var Ie=function(){Ie.__super__.constructor.call(this)};f(Ie,puremvc.SimpleCommand);Ie.prototype.execute=function(a){this.facade.logger.debug("InitializedCommand");
this.facade.retrieveProxy(n.NAME).initialized=!0};var Je=function(){Je.__super__.constructor.call(this)};f(Je,puremvc.SimpleCommand);Je.prototype.execute=function(a){this.facade.logger.debug("RegisterPlaybackCoreCommand");this.facade.retrieveProxy(O.NAME).registerPlaybackCore(a.getBody())};var Ke=function(){Ke.__super__.constructor.call(this)};f(Ke,puremvc.SimpleCommand);Ke.prototype.execute=function(a){this.facade.logger.debug("PlaybackTargetChangeCommand");a="amp"===a.getBody().target?d.REMOVE_APPLICATION_STATE:
d.ADD_APPLICATION_STATE;this.sendNotification(a,"remote-playback")};var Le=function(){Le.__super__.constructor.call(this)};f(Le,puremvc.SimpleCommand);Le.prototype.execute=function(a){var b;this.facade.logger.debug("RecordContentChangeCommand");b=this.facade.retrieveProxy(q.NAME);a=a.getBody();this.sendNotification(d.CHANGE_CONTENT,{from:b.getData(),to:a});b.updateData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(d.CHANGE_CONTENT,b.getData())};var Me=function(){Me.__super__.constructor.call(this)};
f(Me,puremvc.SimpleCommand);Me.prototype.execute=function(a){a=this.facade.retrieveProxy(O.NAME).getActivePlaybackCore();this.sendNotification(d.DISPLAY_TIME,{currentTime:a.getCurrentTime(),duration:a.getDuration()})};var Ne=function(){Ne.__super__.constructor.call(this)};f(Ne,puremvc.SimpleCommand);Ne.prototype.execute=function(a){a=this.facade.retrieveProxy(n.NAME);a.setMuted(!a.getMuted())};var Dc=function(a){null==this.cssPrefix&&(this.cssPrefix=nd.PREFIX);Dc.__super__.constructor.call(this,this.mediatorName,
a)};f(Dc,puremvc.Mediator);Dc.prototype.config=null;Dc.prototype.cssPrefix=null;Dc.prototype.classList=null;Dc.prototype.initializeNotifier=function(a){Dc.__super__.initializeNotifier.call(this,a);this.config=(this.facade.app||this.facade).retrieveProxy(w.NAME);this.classList={prefix:this.cssPrefix,element:this.viewComponent,contains:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;return null!=(null!=(l=c.classList)?l.contains:void 0)?c.classList.contains(e):-1!==c.className.indexOf(e)},
add:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(l=c.classList)?l.add:void 0)?c.classList.add(e):this.contains(a,c)||(c.className=""!==c.className?c.className+(" "+e):e)},remove:function(a,c){var e,l;null==c&&(c=this.element);e=this.prefix+a;null!=(null!=(l=c.classList)?l.remove:void 0)?c.classList.remove(e):this.contains(a,c)&&(e=RegExp(" ?"+e),c.className=c.className.replace(e,""))},toggle:function(a,c){var e;null==c&&(c=this.element);return null!=(null!=(e=c.classList)?
e.toggle:void 0)?c.classList.toggle(this.prefix+a):this.contains(a,c)?this.remome(a,c):this.add(a,c)}}};var Yc=function(a){Yc.__super__.constructor.call(this,a)};f(Yc,Dc);Yc.prototype.localizationManager=null;Yc.prototype.initializeNotifier=function(a){Yc.__super__.initializeNotifier.call(this,a);this.localizationManager=(this.facade.app||this.facade).retrieveProxy(oa.NAME)};var S=function(a,b,c,e){this.componentName=null!=a?a:this.componentName;this.componentType=null!=b?b:this.componentType;this.viewComponent=
this.createViewComponent(c,e);this.classList=this.viewComponent._classList;null==this.mediatorName&&(this.mediatorName=this.createMediatorName());S.__super__.constructor.call(this,this.viewComponent)};f(S,Yc);S.prototype.componentName=null;S.prototype.componentType=null;S.prototype.classList=null;S.prototype.state=null;S.prototype.disabled=!1;S.prototype.onRegister=function(){Ya.bindEvents(this.viewComponent,this)};S.prototype.createViewComponent=function(a,b){var c;c=this.getTypeList();return Ya.create(c,
a,b)};S.prototype.createMediatorName=function(){var a;a=this.getTypeList();a.push("mediator");a.push(Ya.createUID());return a.join("-")};S.prototype.getTypeList=function(){var a;a=[];null!=this.componentName&&a.push(this.componentName);null!=this.componentType&&(a=a.concat(this.componentType));return a};S.prototype.create=function(a,b,c,e){null==b&&(b=this);!1===b&&(b=null);return Ya.create(a,b,c,e)};S.prototype.createText=function(a,b,c,e){null==c&&(c=this);return Ya.create(a,c,e,b)};S.prototype.setState=
function(a){if(a!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=a,null!=this.state&&this.classList.add(this.state),a};S.prototype.getState=function(){return this.state};S.prototype.setDisabled=function(a){if(a!==this.disabled)return(this.disabled=a)?this.classList.add("disabled"):this.classList.remove("disabled"),a};S.prototype.getDisabled=function(){return this.disabled};var Y=function(){Y.__super__.constructor.call(this,null,null,null,null)};f(Y,S);Y.prototype.componentType=
"overlay";Y.prototype.onRegister=function(){Y.__super__.onRegister.call(this);this.registerOverlay()};Y.prototype.onRemove=function(){Y.__super__.onRemove.call(this);this.removeOverlay()};Y.prototype.registerOverlay=function(){this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};Y.prototype.removeOverlay=function(){this.sendNotification(d.REMOVE_OVERLAY,this.viewComponent)};var qc=function(){qc.__super__.constructor.call(this)};f(qc,Y);qc.prototype.componentName="context-menu";qc.prototype.contextMenu=
null;qc.prototype.onRegister=function(){var a=this;qc.__super__.onRegister.call(this);k.create(this.facade.viewComponent,k.CONTEXTMENU,function(b){b.preventDefault();a.contextMenuHandler(b);return!1})};qc.prototype.contextMenuHandler=function(a){var b=this;this.contextMenu&&this.removeContextMenu();this.contextMenu=Ya.create("context-menu",document.body,"ul");Ya.create("context-item",this.contextMenu,"li",this.facade.parent.version);this.contextMenu.style.top=a.pageY+"px";this.contextMenu.style.left=
a.pageX+"px";k.create(document.body,k.CLICK,function(a){b.removeContextMenu(a);return!1})};qc.prototype.removeContextMenu=function(a){try{k.clear(document.body,k.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(b){}};var Ec=function(){Ec.__super__.constructor.call(this)};f(Ec,Y);Ec.prototype.componentName="end-slate";Ec.prototype.onRegister=function(){null!=this.config.getEndSlate()&&Ec.__super__.onRegister.call(this)};Ec.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};
Ec.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case d.MEDIA_CHANGE:c=a.getBody(),b=this.config.getEndSlate(),e=this.getViewComponent(),a="",null!=b&&(b=!0===b.usePoster?c.poster:b.url,null!=b&&""!==b&&(a='\x3cimg src\x3d"'+b+'" class\x3d"end-slate-image" /\x3e')),e.innerHTML=a}};var Fc=function(){Fc.__super__.constructor.call(this)};f(Fc,Y);Fc.prototype.componentName="waiting";Fc.prototype.bar=null;Fc.prototype.text=null;Fc.prototype.onRegister=function(){this.bar=this.create("waiting-bar");
this.text=this.createText("waiting-text",this.localizationManager.getString(v.MSG_BUFFERING));Fc.__super__.onRegister.call(this)};var Oe=function(){Oe.__super__.constructor.call(this)};f(Oe,Y);Oe.prototype.componentName="loading";var v=function(){};v.MSG_LIVE="MSG_LIVE";v.MSG_REPLAY="MSG_REPLAY";v.MSG_BUFFERING="MSG_BUFFERING_TEXT";v.MSG_CC="MSG_CC";v.MSG_CC_TITLE="MSG_CC_TITLE";v.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";v.MSG_CC_PRESETS="MSG_CC_PRESETS";v.MSG_CC_FONT="MSG_CC_FONT";v.MSG_CC_EDGE="MSG_CC_EDGE";
v.MSG_CC_SIZE="MSG_CC_SIZE";v.MSG_CC_SCROLL="MSG_CC_SCROLL";v.MSG_CC_COLOR="MSG_CC_COLOR";v.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";v.MSG_CC_EDGE="MSG_CC_EDGE";v.MSG_CC_WINDOW="MSG_CC_WINDOW";v.MSG_CC_OPACITY="MSG_CC_OPACITY";v.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";v.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";v.MSG_CC_RESET="MSG_CC_RESET";v.MSG_CC_CANCEL="MSG_CC_CANCEL";v.MSG_CC_APPLY="MSG_CC_APPLY";v.MSG_SECONDS="MSG_SECONDS";v.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";v.MSG_NEXT_VIDEO=
"MSG_NEXT_VIDEO";v.MSG_NEXT_AD="MSG_NEXT_AD";var $b=function(){$b.__super__.constructor.call(this)};f($b,Y);$b.prototype.componentName="replay";$b.prototype.replay=null;$b.prototype.icon=null;$b.prototype.label=null;$b.prototype.onRegister=function(){this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(v.MSG_REPLAY),this.replay);$b.__super__.onRegister.call(this)};
$b.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.REPLAY);return!1};var Pe=function(){Pe.__super__.constructor.call(this)};f(Pe,puremvc.SimpleCommand);Pe.prototype.execute=function(a){a="persistent"!==this.facade.retrieveProxy(H.NAME).getControls().mode?a.getBody():Ra.ACTIVE;this.facade.retrieveProxy(y.NAME).setActiveState(a)};var ac=function(){ac.__super__.constructor.call(this)};f(ac,puremvc.SimpleCommand);ac.interval=null;ac.prototype.execute=function(a){var b,
c,e,l=this;a=a.getBody();this.facade.retrieveProxy(y.NAME).setDisplayState(a);"external"!==this.facade.retrieveProxy(H.NAME).getFullscreen().mode&&(this.facade.retrieveProxy(n.NAME),b=this.facade.getVideo(),e=this.facade.getViewComponent(),c={},null!=e.webkitRequestFullScreen?(c.enter=e.webkitRequestFullScreen.bind(e),c.exit=document.webkitCancelFullScreen.bind(document),c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement"):null!=e.requestFullscreen?(c.enter=e.requestFullscreen.bind(e),
c.exit=document.cancelFullscreen.bind(document),c.event="onfullscreenchange",c.element="fullscreenElement"):null!=e.mozRequestFullScreen?(c.enter=e.mozRequestFullScreen.bind(e),c.exit=document.mozCancelFullScreen.bind(document),c.event="onmozfullscreenchange",c.element="mozFullscreenElement"):null!=b.webkitEnterFullscreen&&(c.enter=b.webkitEnterFullscreen.bind(b),c.exit=b.webkitExitFullscreen.bind(b),c.event=null),a===ca.FULL_SCREEN?(null!=c.event?e[c.event]=function(a){null==document[c.element]&&
l.sendNotification(d.CHANGE_DISPLAY_STATE,ca.NORMAL)}:(clearInterval(ac.interval),ac.interval=setInterval(function(){!0!==b.webkitDisplayingFullscreen&&(l.sendNotification(d.CHANGE_DISPLAY_STATE,ca.NORMAL),clearInterval(ac.interval))},100)),c.enter()):a===ca.NORMAL&&(null!=c&&"function"===typeof c.exit&&c.exit(),b[c.event]=null,clearInterval(ac.interval)));this.sendNotifications(a)};ac.prototype.sendNotifications=function(a){setTimeout(this.sendNotification.bind(this,d.FULL_SCREEN_CHANGE,a),100);
this.sendNotification(d.DISPATCH_EVENT,new R("fullscreenchange",a===ca.FULL_SCREEN))};var fa=function(a){fa.__super__.constructor.call(this,a)};f(fa,w);fa.NAME=w.NAME;fa.prototype.bindings=null;fa.prototype.configurationName=null;fa.prototype.configurationData=null;fa.prototype.contextName=null;fa.prototype.contextData=null;fa.prototype.value=null;fa.prototype.getConfigurationName=function(){return this.configurationName};fa.prototype.getConfigurationData=function(){return this.configurationData.value||
{}};fa.prototype.getContextName=function(){return this.contextName};fa.prototype.getContextData=function(){return this.contextData};fa.prototype.onRegister=function(){var a;a=this.facade.app||this.facade;null==this.configurationName&&(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(da.NAME);this.bindings.registerConfiguration(this)};fa.prototype.setData=function(a){var b,c,e;this.data={};e=this.defaults;for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=
new Gc(this.data);return this.data};fa.prototype.getValue=function(a){var b;this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};fa.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=g.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=
this.configurationData.value};var m={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",
LOG:"adslog",REQUEST:"adsrequest"},Zc=function(){Zc.__super__.constructor.call(this)};f(Zc,puremvc.SimpleCommand);Zc.prototype.applicationState=null;Zc.prototype.media=null;Zc.prototype.initializeNotifier=function(a){Zc.__super__.initializeNotifier.call(this,a);a=this.facade.app||this.facade;this.applicationState=a.retrieveProxy(y.NAME);this.media=a.retrieveProxy(q.NAME)};var za=function(){za.__super__.constructor.call(this)};f(za,Zc);za.prototype.ads=null;za.prototype.appState=null;za.prototype.initializeNotifier=
function(a){za.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(w.NAME);this.appState=this.facade.retrieveProxy(y.NAME)};var rc=function(){rc.__super__.constructor.call(this)};f(rc,puremvc.MacroCommand);rc.prototype.ads=null;rc.prototype.initializeNotifier=function(a){rc.__super__.initializeNotifier.call(this,a);this.ads=this.facade.retrieveProxy(B.NAME)};rc.prototype.initializeMacroCommand=function(){this.addSubCommand(od)};rc.prototype.execute=function(a){rc.__super__.execute.call(this,
a);this.facade.logger.debug("AdStartCommand");!1===this.facade.app.retrieveProxy(n.NAME).initialized&&this.facade.app.sendNotification(d.INITIALIZED);this.ads.start();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING)};var Id=function(){Id.__super__.constructor.call(this)};f(Id,za);Id.prototype.execute=function(a){this.facade.logger.debug("AdPlayCommand");!1===this.ads.getStarted()?this.sendNotification(d.START,!0):(this.ads.play(),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,
I.PLAYING))};var Jd=function(){Jd.__super__.constructor.call(this)};f(Jd,za);Jd.prototype.execute=function(a){this.facade.logger.debug("AdPauseCommand");this.ads.pause();this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PAUSED)};var Qe=function(){Qe.__super__.constructor.call(this)};f(Qe,za);Qe.prototype.execute=function(a){this.facade.logger.debug("AdTogglePlayPauseCommand");a=this.ads.getPaused()||!1===this.ads.getStarted()?d.PLAY:d.PAUSE;this.sendNotification(a,!0)};var Re=function(){Re.__super__.constructor.call(this)};
f(Re,za);Re.prototype.execute=function(a){this.facade.logger.debug("AdVolumeChangeCommand");this.ads.setVolume(a.getBody())};var Kd=function(){Kd.__super__.constructor.call(this)};f(Kd,puremvc.SimpleCommand);Kd.prototype.execute=function(a){this.facade.logger.debug("EndedCommand",a);!0===this.facade.retrieveProxy(H.NAME).getLoop()?this.sendNotification(d.REPLAY):(this.sendNotification(d.CHANGE_PLAY_STATE,I.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.ACTIVE))};var Ld=function(){Ld.__super__.constructor.call(this)};
f(Ld,puremvc.SimpleCommand);Ld.prototype.execute=function(a){var b;this.facade.logger.debug("StartCommand");b=this.facade.retrieveProxy(q.NAME);this.sendNotification(d.DISPLAY_TIME,{currentTime:0,duration:b.getDuration()});this.sendNotification(d.STARTED,a.getBody());this.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.INACTIVE)};var Hc=function(){Hc.__super__.constructor.call(this)};f(Hc,puremvc.MacroCommand);Hc.prototype.initializeMacroCommand=function(){this.addSubCommand(od)};Hc.prototype.execute=function(a){var b,
c;this.facade.logger.debug("PlayCommand");Hc.__super__.execute.call(this,a);c=a.getBody();a=this.facade.retrieveProxy(q.NAME);b=this.facade.retrieveProxy(n.NAME);c&&!0!==b.initialized&&this.sendNotification(d.INITIALIZED);!0===b.initialized&&(a.getSrc()||a.getSource())&&(b.getStarted()||this.sendNotification(d.START),b.play())};var pd=function(){pd.__super__.constructor.call(this)};f(pd,puremvc.SimpleCommand);pd.prototype.execute=function(a){this.facade.retrieveProxy(n.NAME).pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,
Ra.ACTIVE)};var Md=function(){Md.__super__.constructor.call(this)};f(Md,puremvc.SimpleCommand);Md.prototype.execute=function(a){var b;this.facade.logger.debug("TogglePlayPauseCommand");a=this.facade.retrieveProxy(y.NAME);this.facade.retrieveProxy(n.NAME);switch(a.getPlayState()){case I.ENDED:b=d.REPLAY;break;case I.PAUSED:case I.READY:b=d.PLAY;break;case I.PLAYING:b=d.PAUSE;break;case I.WAITING:!0===this.facade.getVideo().paused&&(b=d.PLAY)}this.sendNotification(b,!0)};var Se=function(){Se.__super__.constructor.call(this)};
f(Se,za);Se.prototype.execute=function(a){this.facade.logger.debug("AdContentEndedCommand");this.ads.contentEnded()};var Te=function(){Te.__super__.constructor.call(this)};f(Te,za);Te.prototype.execute=function(a){this.facade.logger.debug("AdContentStartedCommand");this.ads.contentStarted()};var T=function(a){T.__super__.constructor.call(this,a)};f(T,fa);T.NAME=w.NAME;T.prototype.enabled=!0;T.prototype.loaded=!1;T.prototype.plugin=null;T.prototype.load=function(a){var b,c=this;b=this.getScript();
null!=b&&""!==b?g.loadAMPScript(b,function(){c.loaded=!0;"function"===typeof a&&a(!0)}):(this.loaded=!1,"function"===typeof a&&a(!1))};T.prototype.getLoaded=function(){return this.loaded};T.prototype.getScript=function(){var a;a=this.getConfigurationData().plugin;return null!=a?a.js||a:""};T.prototype.setEnabled=function(a){return this.enabled=a};T.prototype.getEnabled=function(){return this.enabled};T.prototype.createPlugin=function(){};T.prototype.initialize=function(){this.plugin=this.createPlugin()};
T.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var B=function(a){B.__super__.constructor.call(this,a)};f(B,T);B.NAME=T.NAME;B.prototype.inprogress=!1;B.prototype.paused=!1;B.prototype.started=!1;B.prototype.adVO=null;B.prototype.contextName="ad";B.prototype.getContextData=function(){return this.adVO||{}};B.prototype.setCompanions=function(a){this.adVO.companions=a;this.sendNotification(m.AD_COMPANION,this.adVO);return a};B.prototype.getCompanions=
function(){var a;return null!=(a=this.adVO)?a.companions:void 0};B.prototype.getInProgress=function(){return this.inprogress};B.prototype.setInProgress=function(a){return this.inprogress=a};B.prototype.getStarted=function(){return this.started};B.prototype.setStarted=function(a){return this.started=a};B.prototype.getPaused=function(){return this.paused};B.prototype.setPaused=function(a){return this.paused=a};B.prototype.play=function(){this.setPaused(!1);this.sendNotification(m.AD_PLAY,this.adVO)};
B.prototype.pause=function(){this.setPaused(!0);this.sendNotification(m.AD_PAUSE,this.adVO)};B.prototype.breakStart=function(){};B.prototype.breakEnd=function(){this.setInProgress(!1);this.reset()};B.prototype.error=function(a,b){var c;null==b&&(b=!0);c=("function"===typeof a.getMessage?a.getMessage():void 0)||a.message;this.facade.logger.error("[AMP AD ERROR]",""+c+" Skipping ad content.",a);null==this.adVO&&(this.adVO={});this.adVO.error=a;this.sendNotification(m.AD_ERROR,this.adVO);!0===b&&this.sendNotification(m.BREAK_END)};
B.prototype.engage=function(a){!1!==this.getEnabled()&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())};B.prototype.engageAds=function(){this.facade.app.removeCommand(d.START);this.facade.app.removeCommand(d.PLAY);this.facade.app.removeCommand(d.PAUSE);this.facade.app.removeCommand(d.ENDED);this.facade.app.removeCommand(P.PLAY);this.facade.app.removeCommand(P.PAUSE);this.facade.app.removeCommand(P.TOGGLE_PLAY_PAUSE);
this.facade.isFullscreenDevice()&&this.facade.app.removeCommand(d.CHANGE_DURATION);this.facade.removeCommand(d.STARTED);this.facade.removeCommand(d.ENDED);this.facade.registerCommand(d.START,rc);this.facade.registerCommand(d.PLAY,Id);this.facade.registerCommand(d.PAUSE,Jd);this.facade.registerCommand(P.PLAY,Id);this.facade.registerCommand(P.PAUSE,Jd);this.facade.registerCommand(P.TOGGLE_PLAY_PAUSE,Qe);this.facade.registerCommand(d.VOLUME_CHANGE,Re)};B.prototype.reset=function(){this.facade.removeCommand(d.START);
this.facade.removeCommand(d.PLAY);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(P.PLAY);this.facade.removeCommand(P.PAUSE);this.facade.removeCommand(P.TOGGLE_PLAY_PAUSE);this.facade.removeCommand(d.VOLUME_CHANGE);this.facade.app.registerCommand(d.START,Ld);this.facade.app.registerCommand(d.PLAY,Hc);this.facade.app.registerCommand(d.PAUSE,pd);this.facade.app.registerCommand(d.ENDED,Kd);this.facade.app.registerCommand(P.PLAY,Hc);this.facade.app.registerCommand(P.PAUSE,pd);this.facade.app.registerCommand(P.TOGGLE_PLAY_PAUSE,
Md);this.facade.isFullscreenDevice()&&this.facade.app.registerCommand(d.CHANGE_DURATION,Nd);this.facade.registerCommand(d.STARTED,Te);this.facade.registerCommand(d.ENDED,Se)};B.prototype.start=function(){if(!1===this.getEnabled())return this.sendNotification(m.BREAK_END),!1;this.setStarted(!0);return!0};B.prototype.contentPlay=function(){this.facade.app.sendNotification(d.PLAY,!0)};B.prototype.contentPause=function(){this.facade.app.video.pause()};B.prototype.contentStarted=function(){};B.prototype.contentSeek=
function(a){};B.prototype.contentEnded=function(){};B.prototype.setVolume=function(a){};B.prototype.getVolume=function(){};B.prototype.terminateAd=function(){};B.prototype.terminateAllAds=function(){};var C=function(a,b){tb.attachModuleDispatcher(a,new Ic(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()}};f(C,tb);C.prototype.getContainer=function(){};
C.prototype.getVideo=function(){};C.prototype.getConfig=function(){};C.prototype.evaluateBinding=function(a){};C.prototype.canPlayType=function(a){};C.prototype.load=function(){};C.prototype.play=function(){};C.prototype.replay=function(){};C.prototype.pause=function(){};C.prototype.end=function(){};C.prototype.setParams=function(a){};C.prototype.getParams=function(){};C.prototype.setAutoplay=function(a){};C.prototype.getAutoplay=function(){};C.prototype.setLoop=function(a){};C.prototype.getLoop=
function(){};C.prototype.setMuted=function(a){};C.prototype.getMuted=function(){};C.prototype.mute=function(){return this.setMuted(!0)};C.prototype.unmute=function(){return this.setMuted(!1)};C.prototype.setMedia=function(a){};C.prototype.getMedia=function(){};C.prototype.setCurrentTime=function(a){};C.prototype.getCurrentTime=function(){};C.prototype.getDuration=function(){};C.prototype.setSrc=function(a){};C.prototype.getSrc=function(){};C.prototype.setSource=function(a){};C.prototype.getSource=
function(){};C.prototype.setVolume=function(a){};C.prototype.getVolume=function(){};C.prototype.getSeeking=function(){};C.prototype.getPaused=function(){};C.prototype.getEnded=function(){};C.prototype.setDisplayState=function(a){};C.prototype.getDisplayState=function(){};C.prototype.enterFullScreen=function(){};C.prototype.exitFullScreen=function(){};C.prototype.destroy=function(){};C.prototype.recordContentChange=function(a){};var og=function(a,b){var c,e,l,h,M;og.__super__.constructor.call(this,
a,b);h=a.retrieveProxy(q.NAME);e=a.retrieveProxy(da.NAME);l=a.retrieveProxy(H.NAME);M=a.retrieveProxy(ub.NAME);c=a.retrieveProxy(y.NAME);this.evaluateBinding=e.evaluateBinding.bind(e);this.recordContentChange=function(b){a.sendNotification(d.RECORD_CONTENT_CHANGE,b)};this.canPlayType=function(b){return a.retrieveProxy(n.NAME).canPlayType(b)};this.load=function(){a.sendNotification(d.LOAD)};this.play=function(){a.sendNotification(d.PLAY,!0)};this.replay=function(){a.sendNotification(d.REPLAY)};this.pause=
function(){a.sendNotification(d.PAUSE)};this.end=function(){a.sendNotification(d.END)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,b);return b};this.getParams=M.getData.bind(M);this.setAutoplay=function(b){a.sendNotification(d.CHANGE_AUTOPLAY,b);return b};this.getAutoplay=l.getAutoplay.bind(l);this.setLoop=function(b){a.sendNotification(d.CHANGE_LOOP,b);return b};this.getLoop=l.getLoop.bind(l);this.setMuted=function(b){a.sendNotification(d.CHANGE_MUTED,b);return b};this.getMuted=
function(){return a.retrieveProxy(n.NAME).getMuted()};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,b);return b};this.getMedia=h.getData.bind(h);this.setCurrentTime=function(b){a.sendNotification(d.SEEK,b);return b};this.getCurrentTime=function(){return a.retrieveProxy(n.NAME).getCurrentTime()};this.getDuration=h.getDuration.bind(h);this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(){return a.retrieveProxy(n.NAME).getSrc()};this.setSource=function(b){a.sendNotification(d.SET_MEDIA,
{source:b});return b};this.getSource=h.getSource.bind(h);this.setVolume=function(b){a.sendNotification(d.CHANGE_VOLUME,b);return b};this.getVolume=function(){return a.retrieveProxy(n.NAME).getVolume()};this.getSeeking=function(){return a.retrieveProxy(n.NAME).getSeeking()};this.getPaused=function(){return a.retrieveProxy(n.NAME).getPaused()};this.getEnded=function(){return a.retrieveProxy(n.NAME).getEnded()};this.setDisplayState=function(b){a.sendNotification(d.CHANGE_DISPLAY_STATE,b)};this.getDisplayState=
function(a){c.getDisplayState()};this.enterFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ca.FULL_SCREEN)};this.exitFullScreen=function(){a.sendNotification(d.CHANGE_DISPLAY_STATE,ca.NORMAL)}};f(og,C);var pa=function(a,b,c){this.dispatcher=c;pa.__super__.constructor.call(this,a,b)};f(pa,N);pa.prototype.moduleName="amp";pa.prototype.playerType=null;pa.prototype.dispatcher=null;pa.prototype.config=null;pa.prototype.video=null;pa.prototype.parent=null;pa.prototype.getVideo=function(){return this.video};
pa.prototype.setVideo=function(a){return this.video=a};pa.prototype.getPlayerType=function(){return this.playerType};pa.prototype.createPlugins=function(){var a,b,c,e,l,h;e=[];l=this.getPlayerType();h=r.plugins;for(c in h)a=h[c],c in this.config&&(b=this.config[c],null!=b&&!1!==b.enabled&&(a=a[l],null==a?this.logger.debug("Plugin could not be found: "+c):(b=new a(this,b),e.push(b))));this.sendNotification(Jc.REGISTER_PLUGINS,e);return e};pa.prototype.createVideo=function(){return null};pa.prototype.initialize=
function(){pa.__super__.initialize.call(this);this.video=this.createVideo();this.createPlugins()};pa.prototype.listNotificationEvents=function(){return pa.__super__.listNotificationEvents.call(this).concat([d.READY,d.LOAD_START,d.TIME_UPDATE,d.DURATION_CHANGE,d.ERROR,d.LOADED_METADATA,d.WAITING,d.SEEKING,d.SEEKED,d.ENDED,d.PROGRESS,d.CAN_PLAY,d.CAN_PLAY_THROUGH,d.PAUSE,d.PLAY,d.PLAYING,d.STARTED,d.PLAY_REQUEST,d.MEDIUM_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.MEDIA_CHANGE,d.VOLUME_CHANGE,d.FAIL_OVER_ATTEMPT,
d.PLAYBACK_TARGET_AVAILABLE,d.PLAYBACK_TARGET_CHANGE,d.PLAY_STATE_CHANGE,ja.AUTHORIZE,ja.AUTHORIZED])};var sc=function(a,b,c){sc.__super__.constructor.call(this,a,b,c)};f(sc,pa);sc.prototype.playerType="html";sc.prototype.createAPI=function(){return new og(this,this.dispatcher)};sc.prototype.createVideo=function(){var a,b;a=new Od("html5","video");b=a.getViewComponent();null==b.dataset&&(b.dataset={});this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};sc.prototype.createModel=function(){var a,
b;b=new da;this.registerProxy(b);this.registerProxy(new na);this.registerProxy(new H(this.config));this.registerProxy(new oa(this.config));a=new y;this.registerProxy(a);a.setRenderMode(vg.HTML);a=new n;this.registerProxy(a);this.registerProxy(new q);this.registerProxy(new O(a));this.registerProxy(new ub(this.config.params));b.initialize()};sc.prototype.createView=function(){var a,b;a=this.getViewComponent();this.registerMediator(new Ia("html5",a));this.registerMediator(new Kb);this.registerMediator(new Kc);
this.registerMediator(new vb);a=new wb;this.registerMediator(a);this.registerMediator(new Oe);this.registerMediator(new qc);this.registerMediator(new Fc);this.registerMediator(new $b);this.registerMediator(new Ec);!0===(null!=(b=this.config.titlebar)?b.enabled:void 0)&&this.registerMediator(new Lb);this.registerMediator(new bc)};sc.prototype.createController=function(){this.registerCommand(d.PLAY,Hc);this.registerCommand(d.PAUSE,pd);this.registerCommand(d.PAUSED,ve);this.registerCommand(d.CHANGE_PLAY_STATE,
Pd);this.registerCommand(d.TOGGLE_FULL_SCREEN,ue);this.registerCommand(d.CHANGE_DISPLAY_STATE,ac);this.registerCommand(d.TOGGLE_ACTIVE,te);this.registerCommand(d.CHANGE_ACTIVE_STATE,Pe);this.registerCommand(d.CHANGE_MEDIA,Qd);this.registerCommand(d.MEDIA_CHANGE,Rd);this.registerCommand(d.SET_MEDIA,Sd);this.registerCommand(d.UPDATE_DATA_BINDINGS,Td);this.registerCommand(d.START,Ld);this.registerCommand(d.SEEK,Hd);this.registerCommand(d.SEEKING,ze);this.registerCommand(d.SEEKED,Ae);this.registerCommand(d.CHANGE_VOLUME,
ye);this.registerCommand(d.CHANGE_MUTED,Fe);this.registerCommand(d.CHANGE_AUTOPLAY,we);this.registerCommand(d.CHANGE_LOOP,xe);this.registerCommand(d.END,Ce);this.registerCommand(d.ENDED,Kd);this.registerCommand(d.REPLAY,Be);this.registerCommand(d.ERROR,Ud);this.registerCommand(d.READY,Vd);this.registerCommand(d.WAITING,Ee);this.registerCommand(d.CHANGE_DURATION,Nd);this.registerCommand(d.CHANGE_PARAMS,Wd);this.registerCommand(d.IS_USER_ACTIVE,De);this.registerCommand(ja.CHECK_AUTHORIZATION,Ge);this.registerCommand(ja.AUTHORIZED,
He);this.registerCommand(ja.SET_KEY,Xd);this.registerCommand(ja.SET_TOKEN,Yd);this.registerCommand(d.INITIALIZED,Ie);this.registerCommand(d.REGISTER_PLAYBACK_CORE,Je);this.registerCommand(P.TOGGLE_PLAY_PAUSE,Md);this.registerCommand(P.SEEK,Hd);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Ke);this.registerCommand(d.RECORD_CONTENT_CHANGE,Le);this.registerCommand(d.TIME_UPDATE,Me);this.registerCommand(d.TOGGLE_MUTED,Ne)};var K=function(){};K.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):
a.createTextNode(b)};K.updateTextContent=function(a,b){var c;c=K.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);a.appendChild(c);return a};K.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(l){}}}}};K.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,
"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var Lc=function(){Lc.__super__.constructor.call(this,this.constructor.NAME,{})};f(Lc,puremvc.Proxy);Lc.NAME="MediaProxy";Lc.prototype.getSrc=function(){return this.data.src};Lc.prototype.setSrc=function(a){return this.data.src=a};var Yd=function(){Yd.__super__.constructor.call(this)};f(Yd,puremvc.SimpleCommand);Yd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(na.NAME);a=a.getBody();b.setToken(a);
b.setAuthorized(!0)};var Xd=function(){Xd.__super__.constructor.call(this)};f(Xd,puremvc.SimpleCommand);Xd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(na.NAME);a=a.getBody();b.setKey(a)};var Mb=function(a,b){this.app=a;this.config=b;Mb.__super__.constructor.call(this,this.constructor.NAME);this.proxy=new oa(this.config);this.app.registerProxy(this.proxy)};f(Mb,puremvc.Mediator);Mb.prototype.player=null;Mb.prototype.config=null;Mb.prototype.proxy=null;Mb.NAME="LocalizationWrapper";
Mb.prototype.getString=function(a){return this.proxy.getString(a)};Mb.prototype.listNotificationInterests=function(){return[p.CREATE_FLASH_VARS,p.CREATE_XML]};Mb.prototype.handleNotification=function(a){var b,c,e,l,h,d,f,g;Mb.__super__.handleNotification.call(this,a);h=a.getName();a=a.getBody();switch(h){case p.CREATE_FLASH_VARS:e=a.flashvars;c=a.config;null!=c.language&&(e.locale_setting=c.language);break;case p.CREATE_XML:for(c in h=a.xml,b=h.getElementsByTagName("application")[0],a=h.getElementsByTagName("locales")[0],
null==a&&(a=h.createElement("locales"),b.appendChild(a)),g=this.config.locales,g)for(e in l=g[c],b=h.createElement("locale"),b.setAttribute("id",c),a.appendChild(b),l)f=l[e],d=h.createElement("property"),d.setAttribute("key",e),f=K.createTextContent(h,f),d.appendChild(f),b.appendChild(d)}};var Od=function(a,b){this.mediatorName="#@{getComponentType()}-mediator";Od.__super__.constructor.call(this,a,null,null,b)};f(Od,S);Od.prototype.componentType="video";var Za=function(){Za.__super__.constructor.call(this)};
f(Za,S);Za.prototype.componentType="layer";Za.prototype.onRegister=function(){Za.__super__.onRegister.call(this);this.registerLayer()};Za.prototype.onRemove=function(){Za.__super__.onRemove.call(this);this.removeLayer()};Za.prototype.registerLayer=function(){this.sendNotification(d.ADD_LAYER,this.viewComponent)};Za.prototype.removeLayer=function(){this.sendNotification(d.REMOVE_LAYER,this.viewComponent)};var Kc=function(){Kc.__super__.constructor.call(this)};f(Kc,Za);Kc.prototype.componentName="video";
Kc.prototype.video=null;Kc.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};Kc.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:b=null!=(c=this.video)?"function"===typeof c.getViewComponent?c.getViewComponent():void 0:void 0,null!=b&&this.viewComponent.removeChild(b),this.video=a,b=null!=(e=this.video)?"function"===typeof e.getViewComponent?e.getViewComponent():void 0:void 0,null!=b&&this.viewComponent.appendChild(b)}};
var Ia=function(a,b){this.componentName=a;this.layers=[];Ia.__super__.constructor.call(this,null,null,null,b)};f(Ia,S);Ia.prototype.componentType="player";Ia.prototype.core=null;Ia.prototype.medium=null;Ia.prototype.layers=null;Ia.prototype.ready=!1;Ia.prototype.onRegister=function(){var a;Ia.__super__.onRegister.call(this);a=g.getDevice();null!=a&&this.classList.add(a)};Ia.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,
d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,d.DURATION_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};Ia.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=a.newState;a=a.oldState;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);
break;case d.TEMPORAL_TYPE_CHANGE:"live"===a?this.sendNotification(d.ADD_APPLICATION_STATE,"live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:for(this.ready=!0,e=this.layers,b=0,c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||
this.viewComponent.appendChild(a)}};Ia.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};Ia.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var $c=function(a){$c.__super__.constructor.call(this,this.type,a)};f($c,Ia);$c.NAME="FlashPlayerMediator";$c.prototype.type="flash";$c.prototype.addLayer=function(a){$c.__super__.addLayer.call(this,a);-1===
a.className.indexOf("video")||this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};var tc=function(){tc.__super__.constructor.call(this)};f(tc,puremvc.SimpleCommand);tc.prototype.getProxy=function(){return this.facade.retrieveProxy(D.NAME)};var Ue=function(){Ue.__super__.constructor.call(this)};f(Ue,tc);Ue.prototype.execute=function(a){this.facade.logger.debug("AISPauseCommand");a=this.getProxy();a.vcsSet(a.currentTime)};var Ve=function(){Ve.__super__.constructor.call(this)};f(Ve,tc);
Ve.prototype.execute=function(a){this.facade.logger.debug("AISEndedCommand");this.getProxy().vcsSet(0)};var We=function(){};We.setCookie=function(a,b,c,e,l){var h;b=escape(b);null!=c&&(h=new Date,h.setDate(h.getDate()+c),b+="; expires\x3d"+h.toUTCString());null!=l&&(b+="; domain\x3d"+l);null!=e&&(b+="; path\x3d"+e);return document.cookie=a+"\x3d"+b};We.getCookie=function(a){var b,c,e,l,h,d;c=document.cookie.split(";");h=0;for(d=c.length;h<d;h++)if(b=c[h],e=b.indexOf("\x3d"),l=b.substr(0,e).replace(/^\s+|\s+$/g,
""),b=unescape(b.substr(e+1)),l===a)return b};We.deleteCookie=function(a){return this.setCookie(a,"",-1)};var Xe=function(){Xe.__super__.constructor.call(this)};f(Xe,tc);Xe.prototype.execute=function(a){var b;b=this.getProxy();a=Math.floor(a.getBody());0!==a&&0===a%30&&a!==b.currentTime&&b.vcsSet(a);b.currentTime=a};var D=function(a){D.__super__.constructor.call(this,a)};f(D,T);D.NAME=w.NAME;D.prototype.client=null;D.prototype.currentTime=null;D.prototype.idps=null;D.prototype.idp=null;D.prototype.token=
null;D.prototype.authz=null;D.prototype.defaults={plugin:null,platformID:null,resourceID:null,contentID:null,responseTargets:null,logos:{base:null,group:null,key:"full"}};D.prototype.getScript=function(){return this.value.plugin};D.prototype.initialize=function(){this.client=window.ais_client;this.client.setLogging(this.facade.logger.enabled);this.client.setPlatformId(this.value.platformID);this.client.setUseCache(!/MSIE [7-8]/.test(navigator.userAgent));this.client.assignhandler("bounce",this.bounceHandler.bind(this));
this.client.assignhandler("chooser",this.chooserHandler.bind(this));this.client.assignhandler("init",this.initHandler.bind(this));this.client.assignhandler("authz_query",this.authz_queryHandler.bind(this));this.client.assignhandler("identity",this.identityHandler.bind(this));this.client.assignhandler("logout_result",this.logoutHandler.bind(this));this.client.assignhandler("vcs",this.vcsHandler.bind(this));window.onunload=function(){}};D.prototype.authorize=function(){this.token=this.authz=null;this.disengage();
this.sendNotification("startAuthentication")};D.prototype.authorized=function(a){null==a&&(a=this.token);this.engage();this.sendNotification("authenticationComplete");this.sendNotification(ja.AUTHORIZED,a)};D.prototype.play=function(a){this.sendNotification(d.INITIALIZED);this.sendNotification(d.PLAY);if(null!=a)return this.sendNotification(d.SEEK,a)};D.prototype.engage=function(){this.facade.registerCommand(d.TIME_UPDATE,Xe);this.facade.registerCommand(d.PAUSE,Ue);this.facade.registerCommand(d.ENDED,
Ve)};D.prototype.disengage=function(){this.facade.removeCommand(d.TIME_UPDATE);this.facade.removeCommand(d.PAUSE);this.facade.removeCommand(d.ENDED)};D.prototype.logout=function(){var a,b,c;a=(null!=(b=this.idp.window_display)?b.method:void 0)||"redirect";b=this.getTarget(a);this.setRedirect(a);switch(a){case "redirect":window.open(this.client.logoutFormat(b),"_top");break;case "popup":c=this.idp.window_display.width||320,a=this.idp.window_display.height||240,window.open(this.client.logoutFormat(b),
"ais_popup","width\x3d"+c+",height\x3d"+a)}};D.prototype.bounce=function(a){this.client.bounce()};D.prototype.init=function(a){this.client.init()};D.prototype.choose=function(){this.client.chooser()};D.prototype.resourceAccess=function(a){null==a&&(a=this.value.resourceID);this.client.resourceAccess(a)};D.prototype.vcsSet=function(a){a=g.formatTimecode(a);return this.client.vcsSet(this.value.contentID,a)};D.prototype.bounceHandler=function(a,b){var c;c="true"===b.authenticated.toString();!1===c?(this.sendNotification(d.DISPATCH_EVENT,
new R("authenticationfailed")),this.choose()):!0===c&&this.init()};D.prototype.initHandler=function(a,b){var c,e,l,h;this.facade.logger.debug(a,b);this.idp=b.idps;this.facade.idps={};l=b.idps;for(c in l){l=l[c];this.facade.idps.key=c;for(e in l)h=l[e],this.facade.idps[e]=h;break}for(c in b)l=b[c],"idps"!==c&&null!=l&&(this.facade[c]=l);this.facade.idps.logo=this.value.logos.base+this.facade.idps.logos[this.value.logos.key];this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"authenticating");
this.sendNotification("aisauthenticated",this.facade.idps);this.resourceAccess(this.value.resourceID)};D.prototype.chooserHandler=function(a,b){this.facade.logger.debug(a,b.authenticated);this.facade.sendNotification(d.ADD_APPLICATION_STATE,"authenticating");b.possible_idps=this.idps=this.sort(b.possible_idps,"value","display_name");this.sendNotification("chooseAuthProvider",b)};D.prototype.launchIDPLogin=function(a){var b,c,e;this.sendNotification("aisathenticating",!0);b=this.idps[a];c=(null!=(e=
b.window_display)?e.method:void 0)||"redirect";e=this.getTarget(c);this.setRedirect(c);switch(c){case "redirect":window.open(this.client.loginFormat(a,e),"_top");break;case "popup":c=b.window_display.width||320,b=b.window_display.height||240,window.open(this.client.loginFormat(a,e),"ais_popup","width\x3d"+c+",height\x3d"+b)}};D.prototype.identityHandler=function(a,b){this.facade.logger.debug(a,b)};D.prototype.authz_queryHandler=function(a,b){var c;this.facade.logger.debug(a,b);c="true"===b.authorization.toString();
!1===c?(this.sendNotification(ja.AUTHORIZATION_FAILED),this.authorize()):!0===c&&(this.authz=b,c={mvpdName:this.facade.idps.name,viewerId:this.client.aisuid,"std:viewerId":this.client.aisuid},this.facade.app.sendNotification("mediaanalytics:setDimensions",c),this.facade.viewerId=this.client.aisuid,c=b.resource,null!=c&&(this.facade.resource=c),this.token="hdnea\x3d"+b.security_token,this.sendNotification(ja.SET_KEY,"hdnea\x3d"),this.sendNotification(ja.SET_TOKEN,b.security_token),this.sendNotification("aisathenticating",
!1),null!=this.value.contentID?this.client.vcsGet(this.value.contentID):this.authorized(this.token))};D.prototype.logoutHandler=function(a,b){top.location.href=top.location.href};D.prototype.vcsHandler=function(a,b){"get"===b.operation&&("00:00:00"===b.ph_pos||"00:00"===b.ph_pos?(this.client.vcsSet(this.value.contentID,b.ph_pos),this.authorized(this.token)):this.sendNotification("choosePlayOptions",g.flattenTimecode(b.ph_pos)))};D.prototype.sort=function(a,b,c){var e,l,h,d,f;d={};e=[];l=0;for(h in a)f=
a[h],e[l]={key:h,value:f[c]},l++;e.sort(function(a,c){var e,l;e="value"===b?a.value.toLowerCase():a.key.toLowercase();l="value"===b?c.value.toLowerCase():c.key.toLowercase();return e<l?-1:e>l?1:0});l=c=0;for(h=e.length;c<h;l=++c)l=e[l],d[l.key]=a[l.key];return d};D.prototype.setRedirect=function(a){var b,c,e;try{b=/\/dev\./,e=window.top.location.href||window.top.location,c=b.test(e)?e.replace(b,"index.html"):null,We.setCookie(this.getTarget(a),e,1,"index.html",c)}catch(l){}};D.prototype.getTarget=function(a){null==
a&&(a="redirect");return this.value.responseTargets[a]};var n=function(){n.__super__.constructor.call(this,n.NAME);this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1};"desktop"===g.getDevice()&&(this.initialized=!0);this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),
waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this)};this.resumeHandlers={seeked:this.resumeseeked.bind(this),canplay:this.resumecanplay.bind(this)}};f(n,puremvc.Proxy);n.NAME="PlaybackProxy";
n.prototype.data=null;n.prototype.initialized=!1;n.prototype.enabled=null;n.prototype.handlers=null;n.prototype.resumeHandlers=null;n.prototype.playWhenLoaded=!1;n.prototype.getEnabled=function(){return this.enabled};n.prototype.setEnabled=function(a){if(a!==this.enabled)return this.enabled=a,!0===this.enabled?this.load():this.applyHandlers(!1),a};n.prototype.applyHandlers=function(a){var b,c,e,l;null==a&&(a=!0);e=this.getVideo();a=a?"addEventListener":"removeEventListener";l=this.handlers;for(c in l)b=
l[c],e[a](c,b)};n.prototype.resumecanplay=function(a){var b;b=a.target;b.removeEventListener("canplay",this.resumeHandlers.canplay);this.handlers.durationchange(a);0<this.data.currentTime?(b.addEventListener("seeked",this.resumeHandlers.seeked),this.seek()):this.resumecomplete()};n.prototype.resumeseeked=function(a){a.target.removeEventListener("seeked",this.resumeHandlers.seeked);this.resumecomplete()};n.prototype.resumecomplete=function(){this.data.loading=!1;this.applyHandlers(!0);!0===this.playWhenLoaded&&
setTimeout(this.play.bind(this),0)};n.prototype.ontimeupdate=function(a){this.data.currentTime=a.target.currentTime;this.sendNotification(d.TIME_UPDATE,this.data.currentTime)};n.prototype.ondurationchange=function(a){var b;b=this.getVideo().duration;b===this.data.duration||0===b||isNaN(b)||(this.data.duration=b,/Android 4/.test(navigator.userAgent)&&-1!==a.target.src.indexOf(".m3u8")||this.sendNotification(d.CHANGE_DURATION,b))};n.prototype.onplay=function(a){this.data.paused=!1};n.prototype.onplaying=
function(a){this.data.paused=!1;this.data.seeking=!1;this.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING);this.sendNotification(d.PLAYING)};n.prototype.onpause=function(a){!0!==this.data.seeking&&(this.data.paused=!0,0<a.target.readyState&&(this.sendNotification(d.PAUSED),this.sendNotification(d.CHANGE_PLAY_STATE,I.PAUSED)))};n.prototype.onloadeddata=function(a){this.sendNotification(d.LOADED_DATA)};n.prototype.onwaiting=function(a){this.sendNotification(d.WAITING)};n.prototype.onseeking=function(a){a.target.removeEventListener("timeupdate",
this.handlers.timeupdate);this.data.seeking=!0;this.sendNotification(d.SEEKING)};n.prototype.onseeked=function(a){this.data.seeking=!1;this.sendNotification(d.SEEKED);a.target.addEventListener("timeupdate",this.handlers.timeupdate)};n.prototype.onended=function(a){this.data.ended=!0;this.sendNotification(d.ENDED)};n.prototype.onprogress=function(a){var b,c;try{c=a.target,b=c.buffered,this.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}};n.prototype.onerror=function(a){this.sendNotification(d.ERROR,
a.target.error)};n.prototype.onloadstart=function(a){this.sendNotification(d.LOAD_START)};n.prototype.oncanplay=function(a){this.sendNotification(d.CAN_PLAY)};n.prototype.oncanplaythrough=function(a){this.sendNotification(d.CAN_PLAY_THROUGH);this.sendNotification(d.PROGRESS,this.getDuration())};n.prototype.onloadedmetadata=function(a){this.sendNotification(d.ENABLE_FULL_SCREEN);this.sendNotification(d.LOADED_METADATA)};n.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=
null;this.data.ended=!1;this.data.paused=!1;this.data.seeking=!1;this.data.started=!1;this.data.loading=!1};n.prototype.getStarted=function(){return this.data.started};n.prototype.getVideo=function(){return this.facade.getVideo()};n.prototype.canPlayType=function(a){var b;b=this.getVideo().canPlayType(a)||"";(/Android 4\.[1-9]/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===g.mimeTypes.m3u8&&(b="maybe");return b};n.prototype.getPaused=function(){return this.data.paused};n.prototype.getEnded=
function(){return this.data.ended};n.prototype.getSeeking=function(){return this.data.seeking};n.prototype.getCurrentTime=function(){return this.data.currentTime};n.prototype.setCurrentTime=function(a){if(a!==this.data.currentTime)return this.data.currentTime=a,this.getStarted()&&this.seek(a),a};n.prototype.seek=function(a){null==a&&(a=this.data.currentTime);this.getVideo().currentTime=a};n.prototype.getSrc=function(){return this.data.src};n.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,
"The value of src is not supported: "+a);this.reset();return this.data.src=a};n.prototype.getVolume=function(){return this.getVideo().volume};n.prototype.setVolume=function(a){0<=a&&1>=a&&a!==this.getVideo().volume&&this.sendNotification(d.VOLUME_CHANGE,this.getVideo().volume=a);return a};n.prototype.getMuted=function(){return this.data.muted};n.prototype.setMuted=function(a){var b;this.data.muted=a;!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume;this.sendNotification(d.CHANGE_VOLUME,
b);return a};n.prototype.getDuration=function(){return this.data.duration};n.prototype.play=function(){!0!==this.data.started?(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0):!0===this.data.loading?this.playWhenLoaded=!0:this.getVideo().play()};n.prototype.pause=function(){this.getVideo().pause()};n.prototype.load=function(){var a;this.data.loading=!0;this.playWhenLoaded=!1;this.getVideo().addEventListener("canplay",this.resumeHandlers.canplay);this.getVideo().addEventListener("loadedmetadata",
this.handlers.loadedmetadata);this.getVideo().addEventListener("durationchange",this.handlers.durationchange);this.getVideo().addEventListener("canplaythrough",this.handlers.canplaythrough);this.getVideo().src=this.data.src;g.isIPad()&&8>(null!=(a=g.getIOSversion())?a[0]:void 0)?setTimeout(this.delayedLoad.bind(this),100):this.getVideo().load()};n.prototype.delayedLoad=function(){this.getVideo().load()};var Ye=function(){Ye.__super__.constructor.call(this)};f(Ye,puremvc.SimpleCommand);Ye.prototype.execute=
function(a){var b,c;this.facade.logger.debug("FlashAuthorizedCommand");a=this.facade.retrieveProxy(Lc.NAME);b=this.facade.retrieveProxy(na.NAME);c=a.getSrc()||"";-1===c.indexOf(".smil")&&(c=b.createURL(c));a.setSrc(c);this.facade.video.authenticationComplete({media:a.getData()})};var Nb=function(a){this.supportedTypes=null==a?[]:a;Nb.__super__.constructor.call(this)};f(Nb,n);Nb.prototype.supportedTypes=null;Nb.prototype.playbackCoreName=null;Nb.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};
Nb.prototype.getSupportedTypes=function(){return this.supportedTypes};Nb.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};Nb.prototype.canPlayType=function(a){return-1!==this.getSupportedTypes().indexOf(a)?"maybe":""};var ga=function(a){this.player=a;ga.__super__.constructor.call(this)};f(ga,Nb);ga.NAME=n.NAME;ga.prototype.player=null;ga.prototype.initialized=!0;ga.prototype.playbackCoreName="flash";ga.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m","application/smil",
"application/smil+xml"];ga.prototype.getPaused=function(){return this.player.getPaused()};ga.prototype.getEnded=function(){return this.player.getEnded()};ga.prototype.getSeeking=function(){return this.player.getSeeking()};ga.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};ga.prototype.setCurrentTime=function(a){this.player.setCurrentTime(a);return a};ga.prototype.getSrc=function(){return this.player.getSrc()};ga.prototype.setSrc=function(a){this.player.setSrc(a);return a};
ga.prototype.getVolume=function(){return this.player.getVolume()};ga.prototype.setVolume=function(a){this.player.setVolume(a);return a};ga.prototype.getMuted=function(){return this.player.getMuted()};ga.prototype.setMuted=function(a){this.player.setMuted(a);return a};ga.prototype.getDuration=function(a){return this.player.getDuration()};ga.prototype.play=function(){this.player.play()};ga.prototype.pause=function(){this.player.pause()};ga.prototype.load=function(){this.player.load()};var Ha=function(a,
b){this.api=a;this.dispatcher=null!=b?b:new xb(this.api);Ha.__super__.constructor.call(this,null,this)};f(Ha,puremvc.Mediator);Ha.NAME="ModuleDispatcher";Ha.prototype.dispatcher=null;Ha.prototype.api=null;Ha.prototype.onRegister=function(){var a,b=this;a=this.dispatcher.dispatchEvent;this.dispatcher.dispatchEvent=function(c){b.log(b.getMessage(c),c);a(c)}};Ha.prototype.listNotificationInterests=function(){return[d.DISPATCH_EVENT].concat(this.facade.listNotificationEvents())};Ha.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();b===d.DISPATCH_EVENT?this.dispatchEvent(a):this.dispatchEvent(this.createEvent(this.getType(b),a))};Ha.prototype.createEvent=function(a,b){return new R(a,b)};Ha.prototype.dispatchEvent=function(a){this.dispatcher.dispatchEvent(a)};Ha.prototype.getType=function(a){return a.replace(RegExp("^"+this.facade.getModuleName()),"")};Ha.prototype.getMessage=function(a){return"["+this.facade.getModuleName().toUpperCase()+" EVENT]"};Ha.prototype.log=function(a,b){null!=
a&&null!=b&&(null!=b.data?this.facade.logger.log(a,b.type,b,b.data):this.facade.logger.log(a,b.type,b))};var ea={BREAK_START:"adComponentBreakInitiated",BREAK_END:"adComponentBreakComplete",AD_LOADED:"adComponentLoaded",AD_STARTED:"adComponentAdBegin",AD_TIME_UPDATE:"adComponentPlaybackProgress",AD_TIME_REMAINING:"adComponentTimeElapsed",AD_DURATION_CHANGE:"addurationchange",AD_ENDED:"adComponentAdComplete",AD_ERROR:"adComponentInitFailed",AD_PLAY:"adComponentPlaybackResumed",AD_PAUSE:"adComponentPlaybackPaused",
AD_LOG:"adComponentLog",AD_COMPANION:"adComponentCompanion",AD_PLAYBACK_FAILED:"adComponentPlaybackFailed",AD_PLAYBACK_TERMINATED:"adComponentPlaybackTerminated",AD_MEDIA_LOADED:"adComponentMediaLoaded",AD_CLICKED:"adComponentClicked",AD_FIRST_QUARTILE:"adComponentFirstQuartile",AD_MIDPOINT:"adComponentMidpoint",AD_THIRD_QUARTILE:"adComponentThirdQuartile",AD_REQUEST:"adComponentAdsRequest"},p={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",
MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",
STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",LOAD_STATE_READY:"mediaLoadStateReady",LOAD_STATE_LOADING:"mediaLoadStateLoading",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",
CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",FEED_LOADED:"mediaPlayerFeedLoaded"},Ic=function(a,b){Ic.__super__.constructor.call(this,
a,b)};f(Ic,Ha);Ic.NAME="PlayerDispatcher";Ic.prototype.dispatchEvent=function(a){a.player=this.facade.parent;this.dispatcher.dispatchEvent(a)};Ic.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"progress"!==a.type)return Ic.__super__.getMessage.call(this,a)};var qd=function(a,b){qd.__super__.constructor.call(this,a,b)};f(qd,Ic);qd.NAME="FlashPlayerDispatcher";qd.prototype.getMessage=function(a){if(a.type!==p.TIME_UPDATE&&a.type!==p.CAPTION_DATA_CHANGE&&a.type!==ea.AD_TIME_UPDATE&&a.type!==
ea.AD_TIME_REMAINING&&a.type!==p.ELEMENT_EVENT)return qd.__super__.getMessage.call(this,a)};var Ze=function(a,b){tb.attachModuleDispatcher(a,new qd(this,b));this.getContainer=function(){return a.getViewComponent()};this.getVideo=function(){return a.getVideo()};this.getConfig=function(){return a.getConfig()};this.destroy=function(){return a.destroy()};this.getFlashXML=function(){var b,e;b=unescape(a.flashvars.settings_xml);e=K.parse(b);e.toString=function(){return b};return e};this.getFlashVars=function(){return a.flashvars};
this.evaluateBinding=function(b){return a.video.evaluateBinding(b)};this.recordContentChange=function(b){return a.video.recordContentChange(b)};this.canPlayType=function(a){return 0<=Gd.call(g.flashTypes,a)?"maybe":""};this.replay=function(){a.video.replay()};this.pause=function(){a.video.pause()};this.end=function(){a.video.stopPlayer()};this.getCurrentTime=function(b){return a.video.getCurrentTime()};this.setCurrentTime=function(b){a.video.jumpToTime(b);return b};this.getParams=function(){return a.video.getParams()};
this.setParams=function(b){a.video.setParams(b);return b};this.getVolume=function(){return a.video.getVolume()};this.setVolume=function(b,e){a.video.setVolume(b,e||"");return b};this.getDuration=function(){return a.video.getDuration()};this.setDisplayState=function(b){return a.setDisplayState(b)};this.getDisplayState=function(){return a.getDisplayState()};this.enterFullScreen=function(){a.video.enterFullScreen()};this.exitFullScreen=function(){a.video.exitFullScreen()};this.setMedia=a.setMedia.bind(a);
this.getMedia=a.getMedia.bind(a);this.load=a.load.bind(a);this.play=a.play.bind(a);this.setMuted=a.setMuted.bind(a);this.getMuted=a.getMuted.bind(a);this.getSrc=a.getSrc.bind(a);this.setSrc=a.setSrc.bind(a);this.setAutoplay=a.setAutoplay.bind(a);this.getAutoplay=a.getAutoplay.bind(a);this.getMedium=a.getMedium.bind(a);this.setMedium=a.setMedium.bind(a);this.setSource=a.setSource.bind(a);this.getSource=a.getSource.bind(a);this.getSeeking=a.getSeeking.bind(a);this.getPaused=a.getPaused.bind(a);this.getEnded=
a.getEnded.bind(a)};f(Ze,C);Ze.prototype.getFlashXML=function(){};Ze.prototype.getFlashVars=function(){};var s=function(a,b,c){var e,l,h,d=this;this.flashObjectID+=Date.now();this.plugins={};this.displayState=ca.NORMAL;s.__super__.constructor.call(this,a,b,c);this.debug=/debug\=true/.test(location.search);a=this.config.flash||{};b=!0===(null!=(e=a["static"])?e.enabled:void 0)?a["static"]:a;l=this.debug&&null!=b.debug?b.debug:b.swf||"amp.swf";h=a.version||"10.1";b=a.expressInstallSWF||"playerProductInstall.swf";
c=this.createParams(a);e=this.createAttributes(a);this.flashvars=this.createFlashVars(a);null==this.flashvars.settings_url&&(this.flashvars.settings_xml=this.createXML(this.config));swfobject.embedSWF(l,this.flashObjectID,"100%","100%",h,b,this.flashvars,c,e,function(a){d.createdHandler(a)})};f(s,pa);s.prototype.playerType="flash";s.prototype.flashObjectID="flashObject";s.prototype.playState=null;s.prototype.loaded=!1;s.prototype.flashvars=null;s.prototype.seeking=!1;s.prototype.paused=!1;s.prototype.ended=
!1;s.prototype.muted=!1;s.prototype.plugins=null;s.prototype.debug=!1;s.prototype.started=!1;s.prototype.displayState=null;s.prototype.mediaProxy=null;s.prototype.createAPI=function(){return new Ze(this,this.dispatcher)};s.prototype.createModel=function(){this.registerProxy(new da);this.registerProxy(new na);this.mediaProxy=new Lc;this.registerProxy(this.mediaProxy);this.registerProxy(new ga(this))};s.prototype.createView=function(){this.registerMediator(new $c(this.getViewComponent()));this.registerMediator(new Kc);
this.registerMediator(new wb);this.registerMediator(new Mb(this,this.config))};s.prototype.createController=function(){this.registerCommand(ja.AUTHORIZED,Ye);this.registerCommand(ja.SET_TOKEN,Yd);this.registerCommand(ja.SET_KEY,Xd)};s.prototype.createVideo=function(){var a,b;a=new Od("flash","div");b=a.getViewComponent();b.id=b.name=this.flashObjectID;this.sendNotification(d.PLAYBACK_CORE_CHANGE,a);return b};s.prototype.createParams=function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",
wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};s.prototype.getModules=function(){return this.plugins};s.prototype.createPlugins=function(){var a,b,c;
c=r.plugins;for(b in c)if(a=c[b],b in this.config&&!1!==this.config[b].enabled)if(a=a[this.getPlayerType()],null==a)this.logger.debug("Plugin could not be found: "+b);else try{this.plugins[b]=new a(this,this.config[b]),this.registerMediator(this.plugins[b]),this.logger.debug("Plugin loaded: "+b)}catch(e){this.error("Flash Plugin Load Error ("+b+")",e)}};s.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=a.attributes&&(null!=a.attributes.id&&(b.id=
a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};s.prototype.createFlashJSON=function(a,b){var c,e;null==a&&(a=this.config);a=JSON.parse(JSON.stringify(a));e=function(a,b,e){switch(typeof e){case "string":a[b]=escape(e);break;case "object":case "array":c(e)}};c=function(a){var b,c,d,f;if(a instanceof Array)for(b=d=0,f=a.length;d<f;b=++d)c=a[b],e(a,b,c);else if("object"===typeof a)for(b in a)c=a[b],e(a,b,c)};c(a);return JSON.stringify(a,null,b)};s.prototype.createFlashVars=
function(a){var b,c,e,l,d,M;b={};e=JSON.parse(JSON.stringify(this.config));e.flash=null;delete e.flash;e.locales=null;delete e.locales;e.params=null;delete e.params;e.rules=null;delete e.rules;null!=this.config.autoplay&&(b.auto_play=this.config.autoplay);null!=this.config.rules&&g.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(g.rules));null!=this.config.volume&&(b.volume=g.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=
this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);b.auto_replay=!0===this.config.loop;null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled);null!=this.config.titlebar&&(b.titlebar_enabled=!1!==this.config.titlebar.enabled);null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);null!=(null!=(l=
this.config.controls)?l.displaySceneMarkers:void 0)&&(b.displaySceneMarkers=this.config.controls.displaySceneMarkers);null!=this.config.media&&(null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&(this.setSource(this.config.media.source),b.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),
null!=this.config.media.title&&(b.title=escape(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);null!=(null!=(d=this.config.ima)?null!=(M=d.overlay)?M.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&
(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");this.sendNotification(p.CREATE_FLASH_VARS,{flashvars:b,config:this.config});if(null!=a.vars)for(c in e=a.vars,e)a=e[c],b[c]=a;return b};s.prototype.createXML=
function(a){var b,c,e,l,d,M,f;b=K.parse(a.flash.xml);this.sendNotification(p.CREATE_XML,{config:a,xml:b});e=b.getElementsByTagName("plugin");d=a.flash["static"];if(!0===(null!=d?d.enabled:void 0)&&null!=d.plugins)for(M=0,f=e.length;M<f;M++)a=e[M],null!=(c=d.plugins[a.getAttribute("id")])&&(a.setAttribute("type","static"),K.updateTextContent(a,c));else if(!0===this.debug)for(d=0,M=e.length;d<M;d++)a=e[d],"AkamaiAdvancedStreamingPlugin"===a.getAttribute("id")&&(c=a.textContent||a.text,K.updateTextContent(a,
c.replace("AkamaiAdvancedStreamingPlugin.html","AkamaiAdvancedStreamingPlugin-logging.html")));if(null!=(null!=(l=this.config.fullscreen)?l.mode:void 0))for(l=b.getElementsByTagName("element"),a=0,c=l.length;a<c;a++)e=l[a],"fullscreenBtn"===e.getAttribute("id")&&e.setAttribute("action","external");b=K.serialize(b);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");return escape(b)};s.prototype.createdHandler=function(a){var b=this;this.video=a.ref;this.video.className=
"video";this.video.eventHandler=function(a,e){return b.eventHandler(a,e)};this.sendNotification(p.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.getMedium())};s.prototype.eventHandler=function(a,b){var c,e,l,h;try{switch(a){case p.INITIALIZED:h=l="ready";break;case p.RESET:null==b&&(l="ready");this.started=!1;break;case p.LOADING:h="loadstart";break;case p.PLAYER_ERROR:h=l="error";break;case p.MEDIA_ERROR:h=l="error";break;case p.ERROR_STREAM_NOT_FOUND:h=l="error";break;case p.CAPABILITY_CHANGE:e=
b.type;"canPlayChange"===e&&!0===b.enabled?(h="canplay",this.loaded=!0):"canSeekChange"===e&&!0===b.enabled?h="canplaythrough":"temporalChange"===e&&!0===b.enabled&&(h="loadedmetadata");break;case p.PLAYBACK_OPEN:h="started";this.started=!0;break;case p.PLAYING:this.started||this.sendNotification(d.PLAY,b);h=l="playing";this.paused=this.ended=!1;break;case p.PLAY_REQUEST:h="playrequest";break;case p.PLAY:"paused"!==this.playState&&this.started&&(h="play");break;case p.ENDED:h=l="ended";this.ended=
!0;break;case p.PAUSED:h="pause";l="paused";this.paused=!0;break;case p.BUFFERING:"ended"!==this.className&&(h=l="waiting");break;case p.DURATION_CHANGE:isNaN(b.time)||(h="durationchange",b=b.time);break;case p.VOLUME_CHANGE:h="volumechange";break;case p.TIME_UPDATE:h="timeupdate";break;case p.SEEKING_CHANGE:h=b.seeking?"seeking":"seeked";this.seeking=b.seeking;break;case p.FULLSCREEN_CHANGE:h="fullscreenchange";b="fullScreen"===b.displayState;this.applyDisplayState(b?ca.FULL_SCREEN:ca.NORMAL);break;
case p.FAIL_OVER_ATTEMPT:h="failoverattempt";break;case p.ERROR:a=null}null!=a&&a!==h&&(this.sendNotification(d.DISPATCH_EVENT,{type:a,data:b,player:this.parent}),this.sendNotification(a,b));null!=h&&("error"===h&&(c=b.error||b,this.error("Flash Error",c)),this.sendNotification(h,b));null!=l&&this.setPlayState(l)}catch(M){this.error("Flash Event Error: "+a,M)}};s.prototype.error=function(a,b){this.logger.error("[AMP ERROR] "+a+":",b)};s.prototype.setPlayState=function(a){var b;if(a!==this.playState)return b=
{newState:a,oldState:this.playState},this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,b),a};s.prototype.setMedia=function(a){null!=this.playState&&this.setPlayState("ready");this.mediaProxy.setData(a);null!=a.src&&this.setSrc(a.src);null!=a.source&&0<a.source.length&&this.setSource(a.source);this.sendNotification(d.MEDIA_CHANGE,a);this.loaded=!0;this.video.loadURL(this.mediaProxy.getSrc(),this.mediaProxy.getData());return a};s.prototype.getMedia=function(){return this.mediaProxy.getData()};
s.prototype.load=function(){this.loaded=!0;this.video.loadURL(this.mediaProxy.getSrc())};s.prototype.play=function(){this.loaded||this.load();this.video.unpause()};s.prototype.setMuted=function(a){this.muted=a;try{!0===a?this.video.mute():this.video.unmute()}catch(b){this.error("Flash muted error",b)}return a};s.prototype.getMuted=function(){return this.muted};s.prototype.getSrc=function(a){return this.video.getURL()};s.prototype.setSrc=function(a){this.mediaProxy.setSrc(a);this.loaded=!1;this.setMedium(g.getMimeType(a));
return a};s.prototype.setAutoplay=function(a){this.video.setPlayerProperty("autoplay",a);return a};s.prototype.getAutoplay=function(){return this.video.getPlayerProperty("autoplay")};s.prototype.getMedium=function(){return this.mediaProxy.getData().medium};s.prototype.setMedium=function(a){var b,c;b=this.mediaProxy.getData();if(a!==b.medium)return null!=b.medium&&(c="medium-"+b.medium),b=b.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,{newState:"medium-"+b,oldState:c}),
a};s.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){b=this.mediaProxy.getData();b.source=a;this.loaded=!1;b=g.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);else throw Error("No valid source could be found");return a}};s.prototype.getSource=function(a){return this.mediaProxy.getData().source};s.prototype.getSeeking=function(){return this.seeking};
s.prototype.getPaused=function(){return this.paused};s.prototype.getEnded=function(){return this.ended};s.prototype.getFlashXML=function(){return K.parse(this.getConfigXMLString())};s.prototype.getFlashVars=function(){return this.flashvars};s.prototype.evaluateBinding=function(a){return this.video.evaluateBinding(a)};s.prototype.canPlayType=function(a){return 0<=Gd.call(g.flashTypes,a)?"maybe":""};s.prototype.replay=function(){this.video.replay()};s.prototype.pause=function(){this.video.pause()};
s.prototype.getCurrentTime=function(a){return this.video.getCurrentTime()};s.prototype.setCurrentTime=function(a){this.video.jumpToTime(a);return a};s.prototype.getParams=function(){return this.video.getParams()};s.prototype.setParams=function(a){this.video.setParams(a);return a};s.prototype.getVolume=function(){return this.video.getVolume()};s.prototype.setVolume=function(a){this.video.setVolume(a);return a};s.prototype.getDuration=function(){return this.video.getDuration()};s.prototype.getDisplayState=
function(a){return this.displayState};s.prototype.setDisplayState=function(a){var b;if(a!==this.displayState&&(this.applyDisplayState(a),"external"!==(null!=(b=this.config.fullscreen)?b.mode:void 0)))return this.displayState===ca.FULL_SCREEN?this.video.enterFullScreen():this.video.exitFullScreen(),a};s.prototype.applyDisplayState=function(a){var b;a!==this.displayState&&(b={newState:a,oldState:this.displayState},this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,b))};s.prototype.enterFullScreen=
function(){this.setDisplayState(ca.FULL_SCREEN)};s.prototype.exitFullScreen=function(){this.setDisplayState(ca.NORMAL)};var Jb=function(a){this.module=a;Jb.__super__.constructor.call(this,a.getModuleName(),this)};f(Jb,puremvc.Mediator);Jb.prototype.module=null;Jb.prototype.mediator=null;Jb.prototype.initializeNotifier=function(a){var b,c=this;Jb.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),
this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};Jb.prototype.onRegister=function(){null!=this.mediator&&this.module.registerMediator(this.mediator)};Jb.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMeditator(this.mediator)};Jb.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};Jb.prototype.handleNotification=
function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var Jc={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered"},k=function(a,b,c){var e;this.target=a;this.type=b;this.handler=c;this.trigger=ug(this.trigger,this);k.instances.push(this);this.types=[];(e=this.type,0<=Gd.call(k.EVENTS,e))?g.isTouchDevice()?(this.types.push(k.TOUCH_EVENTS[this.type]),this.type===k.TOUCH_EVENTS[1]&&this.types.push(k.TOUCH_EVENTS[4])):this.types.push(k.MOUSE_EVENTS[this.type]):
this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};k.PRESS=0;k.RELEASE=1;k.MOVE=2;k.CLICK=3;k.CONTEXTMENU=4;k.EVENTS=[k.PRESS,k.RELEASE,k.MOVE,k.CLICK,k.CONTEXTMENU];k.MOUSE_EVENTS=["mousedown","mouseup","mousemove","click","contextmenu"];k.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];k.instances=[];k.create=function(a,b,c){return new k(a,b,c)};k.bind=function(a,b){var c,e,l,d;d=k.instances;c=e=0;for(l=d.length;e<l;c=++e)c=d[c],c.target===
a&&(null!=b&&c.type!==b||c.bind())};k.unbind=function(a,b){var c,e,l,d;d=k.instances;c=e=0;for(l=d.length;e<l;c=++e)c=d[c],c.target===a&&(null!=b&&c.type!==b||c.unbind())};k.clear=function(a,b){var c,e,l,d,M;M=k.instances;c=l=0;for(d=M.length;l<d;c=++l)e=M[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),k.instances.splice(c,1))};k.prototype.types=null;k.prototype.bind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,
this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};k.prototype.unbind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};k.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=this.target=null};k.prototype.trigger=function(a){this.handler(a)};var uc=function(){uc.__super__.constructor.call(this);
null==this.contextName&&(this.contextName=this.constructor.NAME)};f(uc,puremvc.Proxy);uc.prototype.contextName=null;uc.prototype.contextData=null;uc.prototype.getContextName=function(){return this.contextName};uc.prototype.getContextData=function(){return this.contextData};var od=function(){od.__super__.constructor.call(this)};f(od,puremvc.SimpleCommand);od.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST)};var ad=function(a){ad.__super__.constructor.call(this,a)};f(ad,Ha);ad.prototype.dispatchEvent=
function(a){a.player=this.facade.app.parent;this.dispatcher.dispatchEvent(a)};ad.prototype.getMessage=function(a){return ad.__super__.getMessage.call(this,a).replace("[","["+this.facade.app.getModuleName().toUpperCase()+" ")};var oa=function(a){var b,c;oa.__super__.constructor.call(this);if(null!=a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=
a.locales[c];this.setLocale(this.data.language)};f(oa,uc);oa.NAME="LocalizationProxy";oa.prototype.contextName="l10n";oa.prototype.data={language:navigator.language||navigator.browserLanguage,locales:{en:{MSG_LIVE:"LIVE",MSG_REPLAY:"Replay",MSG_BUFFERING:"buffering...",MSG_CC:"CC",MSG_CC_TITLE:"Captions",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",
MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_NEXT_VIDEO:"Video starts in: ",MSG_NEXT_AD:"Next ad starts in: ",MSG_CLOSE:"close",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian"}}};oa.prototype.locale=null;oa.prototype.getContextData=function(){return this.locale};oa.prototype.getLanguage=
function(){return this.data.language};oa.prototype.setLanguage=function(a){this.data.language=a;this.setLocale(a);this.sendNotification(d.LANGUAGE_CHANGED,a);return a};oa.prototype.setLocale=function(a){this.locale=this.data.locales[a];null==this.locale&&(this.locale=this.data.locales[a.substring(0,2)]);return a};oa.prototype.getLocales=function(){return this.data.locales};oa.prototype.setLocales=function(a){return this.data.locales=a};oa.prototype.getString=function(a){return(this.locale||this.data.locales.en)[a]||
""};oa.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var ja={CHECK_AUTHORIZATION:"checkAuthorization",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",SET_TOKEN:"settoken",SET_KEY:"setkey"},na=function(){na.__super__.constructor.call(this,this.constructor.NAME,{});this.setupHDN1()};
f(na,puremvc.Proxy);na.NAME="SecurityProxy";na.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var e;a.facade.logger.debug("HDN1: Token Requested",b,c);e=a.getToken();null!=e?a.facade.video.tokenRetrievalSuccess("\x26primaryToken\x3d"+e):a.sendNotification(ja.AUTHORIZE);return!0}};na.prototype.getKey=function(){return this.data.key};na.prototype.setKey=function(a){return this.data.key=a};na.prototype.getToken=function(){return this.data.token};na.prototype.setToken=
function(a){return this.data.token=a};na.prototype.getSecret=function(){var a;if(null==this.data.token)return null;a="";null!=this.data.key&&(a+=this.data.key);return a+=this.data.token};na.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};na.prototype.getAuthorized=function(){return this.data.authorized};na.prototype.setAuthorized=function(a){return this.data.authorized=a};na.prototype.getProvider=function(){return this.data.provider};na.prototype.setProvider=
function(a){return this.data.provider=a};var Pd=function(){Pd.__super__.constructor.call(this)};f(Pd,puremvc.SimpleCommand);Pd.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(y.NAME);a=a.getBody();b.setPlayState(a)};var Rd=function(){Rd.__super__.constructor.call(this)};f(Rd,puremvc.SimpleCommand);Rd.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaChangeCommand",a.getBody());b=a.getBody();this.facade.retrieveProxy(O.NAME).setPlaybackType(b.type);c=this.facade.retrieveProxy(n.NAME);
c.setSrc(b.src);c.setCurrentTime(b.startTime||0);a=this.facade.retrieveProxy(H.NAME);!0===(c.initialized&&(a.getAutoplay()||!0===b.autoplay))&&setTimeout(this.sendNotification.bind(this,d.PLAY),0)};var Nd=function(){Nd.__super__.constructor.call(this)};f(Nd,puremvc.SimpleCommand);Nd.prototype.execute=function(a){var b;this.facade.logger.debug("ChangeDurationCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(q.NAME);b.getDuration()!==a&&b.setDuration(a)};var Ud=function(){Ud.__super__.constructor.call(this)};
f(Ud,puremvc.SimpleCommand);Ud.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(n.NAME).getVideo();k.clear(b);this.facade.logger.error("[AMP ERROR]",a.getBody());this.sendNotification(d.CHANGE_PLAY_STATE,I.ERROR)};var Vd=function(){Vd.__super__.constructor.call(this)};f(Vd,puremvc.SimpleCommand);Vd.prototype.execute=function(a){var b,c;this.facade.logger.debug("ReadyCommand");a=null!=(b=this.facade.config)?b.volume:void 0;null!=a&&this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(d.CHANGE_DISPLAY_STATE,
ca.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,I.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.ACTIVE);b=null!=(c=this.facade.config)?c.media:void 0;null!=b&&setTimeout(this.sendNotification.bind(this,d.SET_MEDIA,b),0)};var Td=function(){Td.__super__.constructor.call(this)};f(Td,puremvc.SimpleCommand);Td.prototype.execute=function(a){this.facade.logger.debug("UpdateDataBindingsCommand");a=a.getBody()||{};this.facade.retrieveProxy(da.NAME).compile(a.contexts,a.suppressErrors)};var Wd=
function(){Wd.__super__.constructor.call(this)};f(Wd,puremvc.SimpleCommand);Wd.prototype.execute=function(a){this.facade.logger.debug("ChangeParamsCommand",a.getBody());a=a.getBody();this.facade.retrieveProxy(ub.NAME).setData(a);this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var Sd=function(){Sd.__super__.constructor.call(this)};f(Sd,puremvc.SimpleCommand);Sd.prototype.execute=function(a){var b;a=a.getBody();this.facade.logger.debug("SetMediaCommand",a);this.sendNotification(d.CHANGE_MEDIA,
a);b=this.facade.retrieveProxy(q.NAME);a=b.getData();!0===b.authorized&&this.sendNotification(d.MEDIA_CHANGE,a)};var Qd=function(){Qd.__super__.constructor.call(this)};f(Qd,puremvc.SimpleCommand);Qd.prototype.execute=function(a){var b,c;this.facade.logger.debug("ChangeMediaCommand",a.getBody());a=a.getBody();b=this.facade.retrieveProxy(q.NAME);c=this.facade.retrieveProxy(n.NAME);c.setEnabled(!1);c.pause();this.sendNotification(d.CHANGE_PLAY_STATE,I.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,
Ra.ACTIVE);try{b.setData(a)}catch(e){this.sendNotification(d.ERROR,e.message)}this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(ja.AUTHORIZE)};var wb=function(){wb.__super__.constructor.call(this)};f(wb,Za);wb.prototype.componentName="overlays";wb.NAME="OverlayLayerMediator";wb.prototype.createMediatorName=function(){return wb.NAME};wb.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};wb.prototype.handleNotification=function(a){var b;b=a.getName();
a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var vb=function(){vb.__super__.constructor.call(this)};f(vb,Za);vb.prototype.componentName="poster";vb.prototype.poster=null;vb.prototype.clickHandler=null;vb.prototype.onRegister=function(){this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this);vb.__super__.onRegister.call(this)};vb.prototype.onclick=function(a){a.stopImmediatePropagation();
a.preventDefault();this.sendNotification(P.TOGGLE_PLAY_PAUSE,!0);return!1};vb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};vb.prototype.handleNotification=function(a){switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody().poster,a=null!=a&&""!==a?'\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e':"",this.poster.innerHTML=a}};var bc=function(){bc.__super__.constructor.call(this)};f(bc,Za);bc.prototype.message=null;bc.prototype.componentName="error";bc.prototype.onRegister=
function(){bc.__super__.onRegister.call(this);this.message=this.create("error-message")};bc.prototype.listNotificationInterests=function(){return[d.ERROR]};bc.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.ERROR:a=a.getBody();b="Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+="Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+=
"Source not supported.";break;default:b+=a}this.message.textContent=b}};var Lb=function(){Lb.__super__.constructor.call(this)};f(Lb,Y);Lb.prototype.componentName="title-bar";Lb.prototype.title=null;Lb.prototype.description=null;Lb.prototype.onRegister=function(){this.title=this.create("title-text");this.description=this.create("description-text");Lb.__super__.onRegister.call(this)};Lb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};Lb.prototype.handleNotification=function(a){var b;
switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody(),b=a.title,null==b||""===b||"undefined"===b?this.classList.add("hidden"):(this.title.innerHTML=b,this.description.innerHTML=a.description?a.description:"",this.classList.remove("hidden"))}};var yb=function(a){tb.attachModuleDispatcher(a,new ad(this));this.getConfig=function(){return a.getConfig()}};f(yb,tb);yb.prototype.getConfig=function(){};var nd={PREFIX:"akamai-"},Z=function(a,b){this.app=a;this.logger=this.app.logger;Z.__super__.constructor.call(this,
b)};f(Z,N);Z.NAME="Plugin";Z.prototype.app=null;Z.prototype.initialize=function(){this.createModel();this.createController()};Z.prototype.createAPI=function(){return new yb(this)};Z.prototype.onRegister=function(){var a;a=this.retrieveProxy(T.NAME);null==(null!=a?a.getLoaded:void 0)||a.getLoaded()?this.registered():a.load(this.registered.bind(this))};Z.prototype.registered=function(){var a;this.createView();null!=(a=this.retrieveProxy(T.NAME))&&"function"===typeof a.initialize&&a.initialize();this.sendNotification(Jc.PLUGIN_REGISTERED,
this)};Z.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.IS_USER_ACTIVE].concat(function(){var c;c=[];for(a in Jc)b=Jc[a],c.push(b);return c}())};var Kb=function(){this.plugins=[];this.registered=[];Kb.__super__.constructor.call(this,this.constructor.NAME,{})};f(Kb,puremvc.Mediator);Kb.NAME="PluginAdapter";Kb.prototype.plugins=null;Kb.prototype.registered=null;Kb.prototype.onRegister=
function(){return Kb.__super__.onRegister.call(this)};Kb.prototype.listNotificationInterests=function(){return[Jc.REGISTER_PLUGINS,Jc.PLUGIN_REGISTERED]};Kb.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case Jc.REGISTER_PLUGINS:e=this.plugins=a;a=0;for(c=e.length;a<c;a++)b=e[a],this.facade.registerModule(b);break;case Jc.PLUGIN_REGISTERED:this.registered.push(a),this.facade.logger.debug("Plugin Registered: "+a.constructor.NAME),this.registered.length===this.plugins.length&&
this.sendNotification(d.READY,this.facade.config)}};var Ob=function(a){this.element=a};Ob.prototype.element=null;Ob.prototype.prefix=nd.PREFIX;Ob.prototype.contains=function(a){return this.constructor.contains(a,this.element,this.prefix)};Ob.prototype.add=function(a){this.constructor.add(a,this.element,this.prefix)};Ob.prototype.remove=function(a){this.constructor.remove(a,this.element,this.prefix)};Ob.prototype.toggle=function(a){return this.constructor.contains(a,this.element,this.prefix)};Ob.contains=
function(a,b,c){var e;null==c&&(c="");a=c+a;return null!=(null!=(e=b.classList)?e.contains:void 0)?b.classList.contains(a):-1!==b.className.indexOf(a)};Ob.add=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.add:void 0)?b.classList.add(c):this.contains(a,b)||(b.className=""!==b.className?b.className+(" "+c):c)};Ob.remove=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.remove:void 0)?b.classList.remove(c):this.contains(a,b)&&(a=RegExp(" ?"+c),b.className=
b.className.replace(a,""))};Ob.toggle=function(a,b,c){var e;null!=(null!=(e=b.classList)?e.toggle:void 0)?b.classList.toggle(this.prefix+a):this.contains(a,b)?this.remome(a,b):this.add(a,b)};var P={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek"},Ya=function(){};Ya.create=function(a,b,c,e){var l,d,M,f,g;null==c&&(c="div");"string"===typeof c&&(c=document.createElement(c));l=new Ob(c);if(null!=a)for("string"===typeof a&&(a=[a]),f=0,g=a.length;f<g;f++)d=a[f],
l.add(d);c._classList=l;null!=e&&(null!=c.innerText?c.innerText=e:c.textContent=e);null!=b&&(null!=b.getViewComponent&&(M=b.getViewComponent()),null!=M&&(b=M),b.appendChild(c));return c};Ya.bindEvents=function(a,b,c){var e,l;null==c&&(c=["onRemove","onRegister"]);for(e in b)l=b[e],0<=Gd.call(c,e)||!/^on/.test(e)||null==(null!=l?l.bind:void 0)||(a[e]=l.bind(b))};Ya.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};
var bd=function(){};bd.prototype.data=null;bd.prototype.value=null;bd.prototype.source=null;bd.prototype.parse=function(a){};bd.prototype.compile=function(a,b){};var da=function(){da.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};this.contextMap={};this.configurationMap={}};f(da,puremvc.Proxy);da.NAME="DataBindingProxy";da.prototype.contextMap=null;da.prototype.configurationMap=null;da.prototype.paramsProxy=null;da.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(ub.NAME);
this.registerContext(this.facade.retrieveProxy(q.NAME));this.registerContext(this.facade.retrieveProxy(oa.NAME));this.registerContext(this.facade.retrieveProxy(O.NAME));return this.update()};da.prototype.registerContext=function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};da.prototype.retrieveContext=function(a){return this.contextMap[a]};da.prototype.removeContext=function(a){var b;b=this.contextMap[a];delete this.contextMap[a];return b};da.prototype.registerConfiguration=function(a){null!=
a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};da.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};da.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];delete this.configurationMap[a];return b};da.prototype.evaluateBinding=function(a){a=new cc(a);a.compile(this.data);return a.value};da.prototype.update=function(a){var b,c,e,l;this.data.now=Date.now();l=this.contextMap;for(e in l)b=l[e],-1!==(null!=a?"function"===
typeof a.indexOf?a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};da.prototype.compile=function(a,b){var c,e,l,d,M;null==b&&(b=!1);this.update(a);e=g.clone(this.data);d=this.paramsProxy.getConfigurationName();M=this.configurationMap;for(l in M)c=M[l],l!==d&&c.compile(e,b)};var dc=function(a){null!=a&&this.parse(a)};f(dc,bd);dc.prototype.data=null;dc.prototype.value=null;dc.prototype.source=
null;dc.prototype.parse=function(a){return a instanceof Array?new rd(a):a instanceof Object?new Gc(a):new cc(a)};var rd=function(a){rd.__super__.constructor.call(this,a)};f(rd,dc);rd.prototype.parse=function(a){var b,c,e,l;this.data=[];b=e=0;for(l=a.length;e<l;b=++e)c=a[b],this.data[b]=rd.__super__.parse.call(this,c);return this.data};rd.prototype.compile=function(a,b){var c,e,l,d,M;null==a&&(a={});null==b&&(b=!1);this.value=[];M=this.data;c=l=0;for(d=M.length;l<d;c=++l){e=M[c];try{this.value[c]=
e.compile(a,b)}catch(f){this.value[c]=null,b||U.error(f)}}return this.value};var Zd=function(a){this.message=Zd.MESSAGE+a};f(Zd,Error);Zd.MESSAGE="Tokenization Error: Could not find token value for: ";var sd=function(a){sd.__super__.constructor.call(this,a)};f(sd,dc);sd.prototype.parse=function(a){return this.source=this.data=this.value=a};sd.prototype.compile=function(a,b){return this.value};var td=function(a){td.__super__.constructor.call(this,a)};f(td,dc);td.prototype.exec=null;td.prototype.parse=
function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};td.prototype.compile=function(a,b){null==a&&(a={});if(null==this.exec)return this.value;try{this.value=this.exec(a)}catch(c){if(this.value=null,!suppressErors)throw new Zd(this.data);}return this.value};var cc=function(a){this.token=RegExp(this.tokenStart.source+"([^#]*)"+this.tokenEnd.source,"g");cc.__super__.constructor.call(this,a)};f(cc,dc);
cc.prototype.exec=null;cc.prototype.tokenStart=/#{/;cc.prototype.tokenEnd=/}/;cc.prototype.token=null;cc.prototype.parse=function(a){var b,c,e,l,d,f;this.source=a;this.data=[];if(this.token.test(this.source)){l=[];c=null;a=this.source.replace(this.token,function(a,b,e,d){l.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<d.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");d=e=0;for(f=b.length;d<f;d++)a=b[d],""===a&&l[e]?(this.data.push(new td(l[e])),e++):""!==a&&this.data.push(new sd(a));
1===this.data.length&&(this.data=this.data[0])}else this.data=new sd(a);return this.data};cc.prototype.compile=function(a,b){var c,e,l,d;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof bd)this.value=this.data.compile(a,b);else for(this.value="",d=this.data,e=0,l=d.length;e<l;e++)c=d[e],this.value+=c.compile(a,b)}catch(f){if(this.value=null,!b)throw new Zd(this.source);}return this.value};var Gc=function(a){Gc.__super__.constructor.call(this,a)};f(Gc,
dc);Gc.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=Gc.__super__.parse.call(this,c);return this.data};Gc.prototype.compile=function(a,b){var c,e,l;null==a&&(a={});null==b&&(b=!1);this.value={};l=this.data;for(c in l){e=l[c];try{this.value[c]=e.compile(a,b)}catch(d){this.value[c]=null,U.error(d)}}return this.value};var $a=function(){$a.__super__.constructor.call(this)};f($a,puremvc.Proxy);$a.NAME="PlaybackProxy";$a.prototype.src=null;$a.prototype.canPlayType=
function(a){return"external"===a};$a.prototype.getSrc=function(){return this.src};$a.prototype.setSrc=function(a){null!=a&&""!==a||this.sendNotification(d.ERROR,"The value of src is not supported: "+a);a!==this.src&&(this.src=a);return a};$a.prototype.play=function(){window.open(this.getSrc(),"_blank")};$a.prototype.load=function(){};$a.prototype.setVolume=function(){};$a.prototype.getCurrentTime=function(){return 0};$a.prototype.setCurrentTime=function(a){};$a.prototype.getDuration=function(){return 0};
var ub=function(a){ub.__super__.constructor.call(this,a)};f(ub,fa);ub.NAME="ParamsProxy";ub.prototype.defaults={};ub.prototype.configurationName="params";ub.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new Gc(this.data);return this.data};var pg=function(a,b){pg.__super__.constructor.call(this,a,b);this.evaluateBinding=function(b){var e;return null!=(e=a.retrieveProxy(da.NAME))?e.evaluateBinding(b):
void 0};this.canPlayType=function(a){return"maybe"};this.play=function(){a.sendNotification(d.PLAY)};this.setParams=function(b){a.sendNotification(d.CHANGE_PARAMS,b);return b};this.getParams=function(){return a.retrieveProxy(ub.NAME).getData()};this.setAutoplay=function(a){return!1};this.getAutoplay=function(){return!1};this.setLoop=function(a){return!1};this.getLoop=function(){return!1};this.setMuted=function(a){return!1};this.getMuted=function(){return!1};this.setMedia=function(b){a.sendNotification(d.SET_MEDIA,
b);return b};this.getMedia=function(b){var e;return null!=(e=a.retrieveProxy(q.NAME))?e.getData():void 0};this.setCurrentTime=function(a){return 0};this.getCurrentTime=function(a){return 0};this.getDuration=function(b){return a.retrieveProxy(q.NAME).getDuration()};this.setSrc=function(b){a.sendNotification(d.SET_MEDIA,{src:b});return b};this.getSrc=function(b){return a.retrieveProxy(q.NAME).getSrc()};this.setSource=function(b){a.sendNotification(d.SET_MEDIA,{source:b});return b};this.getSource=function(){return a.retrieveProxy(q.NAME).getSource()};
this.setVolume=function(a){return a};this.getVolume=function(a){return 1};this.getSeeking=function(){return!1};this.getPaused=function(){return!1};this.getEnded=function(){return!1}};f(pg,C);var cd=function(){cd.__super__.constructor.call(this)};f(cd,puremvc.MacroCommand);cd.prototype.initializeMacroCommand=function(){return this.addSubCommand(od)};cd.prototype.execute=function(a){this.facade.logger.debug("PlayCommand");cd.__super__.execute.call(this,a);this.facade.retrieveProxy(n.NAME).play()};var ca=
{NORMAL:"normal",FULL_SCREEN:"full-screen"},vg={FLASH:"flash",HTML:"html"},Ra={ACTIVE:"active",INACTIVE:"inactive"},I={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",SEEKING:"seeking",ERROR:"error"},y=function(){y.__super__.constructor.call(this);this.device=g.getDevice()};f(y,puremvc.Proxy);y.NAME="ApplicationStateProxy";y.prototype.displayState=null;y.prototype.playState=null;y.prototype.renderMode=null;y.prototype.activeState=null;y.prototype.seeking=
!1;y.prototype.isUserActive=!1;y.prototype.device=null;y.prototype.getDisplayState=function(){return this.displayState};y.prototype.setDisplayState=function(a){var b;a!==b&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{oldState:b,newState:this.displayState}))};y.prototype.getPlayState=function(){return this.playState};y.prototype.setPlayState=function(a){var b;if(a!==this.playState){if(!0===this.seeking)switch(a){case I.PLAYING:case I.READY:this.seeking=!1;
break;default:return}b=this.playState;this.playState=a;this.sendNotification(d.PLAY_STATE_CHANGE,{oldState:b,newState:this.playState})}};y.prototype.getDevice=function(){return this.device};y.prototype.getSeeking=function(){return this.seeking};y.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a)};y.prototype.getIsUserActive=function(){return this.isUserActive};y.prototype.setIsUserActive=function(a){a!==this.isUserActive&&(this.isUserActive=a)};y.prototype.getRenderMode=function(){return this.renderMode};
y.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};y.prototype.getMedium=function(){return this.medium};y.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{oldState:b,newState:"medium-"+this.medium}))};y.prototype.getActiveState=function(){return this.activeState};y.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=
a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{oldState:b,newState:this.activeState}))};var H=function(a){H.__super__.constructor.call(this,a)};f(H,w);H.NAME=w.NAME;H.prototype.defaults={name:null,autoplay:!1,loop:!1,controls:{},fullscreen:null,target:"_blank",domain:null,endslate:null,version:null};H.prototype.setData=function(a){null!=a.rules&&g.mergeRules(a.rules);return H.__super__.setData.call(this,a)};H.prototype.getAutoplay=function(){return this.data.autoplay};H.prototype.setAutoplay=function(a){return this.data.autoplay=
a};H.prototype.getLoop=function(){return this.data.loop};H.prototype.setLoop=function(a){return this.data.loop=a};H.prototype.getEndSlate=function(){return this.data.endslate};H.prototype.setEndSlate=function(a){return this.data.endslate=a};H.prototype.getDomain=function(){return this.data.domain};H.prototype.setDomain=function(a){return this.data.domain=a};H.prototype.getTarget=function(){return this.data.target};H.prototype.setTarget=function(a){return this.data.target=a};H.prototype.getName=function(){return this.data.name};
H.prototype.setName=function(a){return this.data.name=a};H.prototype.getVersion=function(){return this.data.version};H.prototype.getControls=function(){return this.data.controls};H.prototype.setControls=function(a){return this.data.controls=a};H.prototype.getFullscreen=function(){return this.data.fullscreen||{}};H.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var O=function(a){this.defaultPlaybackCore=a;O.__super__.constructor.call(this);this.playbackCoreMap={}};f(O,uc);O.NAME=
"PlayerProxy";O.prototype.contextName="player";O.prototype.playbackCoreMap=null;O.prototype.defaultPlaybackCore=null;O.prototype.activePlaybackCore=null;O.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};O.prototype.registerPlaybackCore=function(a){null!=a&&(this.playbackCoreMap[a.getPlaybackCoreName()]=a)};O.prototype.retrievePlaybackCore=function(a){return this.playbackCoreMap[a]};O.prototype.removePlaybackCore=function(a){var b;b=this.playbackCoreMap[a];delete this.playbackCoreMap[a];
return b};O.prototype.setPlaybackType=function(a){var b,c,e,l;e=this.defaultPlaybackCore;l=this.playbackCoreMap;for(c in l)if(b=l[c],""!==b.canPlayType(a)){e=b;break}b=this.facade.retrieveProxy(n.NAME);b!==e&&(this.facade.removeProxy(n.NAME),this.facade.registerProxy(e),e.setData(b.getData()));this.activePlaybackCore=e;return a};O.prototype.canPlayType=function(a){var b,c,e;e=this.playbackCoreMap;for(c in e)if(b=e[c],b=b.canPlayType(a),""!==b)return b;return b=this.defaultPlaybackCore.canPlayType(a)};
O.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(H.NAME);e=this.facade.retrieveProxy(n.NAME);c=this.facade.retrieveProxy(q.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),duration:e.getDuration(),version:a.getVersion(),timecode:{duration:g.formatTimecode(c.getDuration()),currentTime:g.formatTimecode(e.getCurrentTime())}}};var q=
function(){this.data={metadata:{}};q.__super__.constructor.call(this)};f(q,uc);q.NAME="MediaProxy";q.prototype.contextName="media";q.prototype.data=null;q.prototype.authorized=!0;q.prototype.getContextData=function(){return{width:this.getWidth(),height:this.getHeight(),title:this.getTitle(),description:this.getDescription(),src:this.getSrc(),duration:this.getDuration(),guid:this.getGUID(),isLive:this.getIsLive(),metadata:this.getMetadata(),temporalType:this.getTemporalType(),poster:this.getPoster(),
category:this.getCategory()}};q.prototype.setData=function(a){var b;this.data.autoplay=a.autoplay;this.data.type=a.type;null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.data.title=a.title;null!=a.duration&&this.setDuration(a.duration);this.data.poster=a.poster;this.data.guid=a.guid;this.data.link=a.link;this.data.embed=a.embed;this.data.width=a.width;this.data.height=a.height;this.data.category=a.category;this.data.startTime=a.startTime;this.data.description=a.description;
this.data.status=a.status||{};"blocked"===(null!=(b=this.data.status)?b.state:void 0)&&(this.authorized=!1);this.data.category=a.category;this.data.metadata=a.metadata||{};null!=a.isLive&&this.setIsLive(a.isLive);null!=a.temporalType?this.setTemporalType(a.temporalType):this.setTemporalType("vod");null!=a.medium&&this.setMedium(a.medium);null!=a.pubDate&&this.setPubDate(a.pubDate);null!=a.track&&this.setTrack(a.track);return a};q.prototype.updateData=function(a){var b,c;for(b in a)c=a[b],b in this.data&&
(this.data[b]=c)};q.prototype.getGUID=function(){return this.data.guid};q.prototype.setGUID=function(a){return this.data.guid=a};q.prototype.getLink=function(){return this.data.link};q.prototype.setLint=function(a){return this.data.link=a};q.prototype.getStartTime=function(){return this.data.startTime||0};q.prototype.getEmbed=function(){return this.data.embed};q.prototype.setEmbed=function(a){return this.data.embed=a};q.prototype.getAutoplay=function(){return this.data.autoplay};q.prototype.setAutoplay=
function(a){return this.data.autoplay=a};q.prototype.getPubDate=function(){return this.data.pubDate};q.prototype.setPubDate=function(a){return this.data.pubDate=a};q.prototype.getCategory=function(){return this.data.category};q.prototype.setCategory=function(a){return this.data.category=a};q.prototype.getSrc=function(){return this.data.src};q.prototype.setSrc=function(a){this.data.src=a;if(null!=this.data.src&&null==this.data.type)return this.setType(g.getMimeType(this.data.src))};q.prototype.getType=
function(){return this.data.type};q.prototype.setType=function(a){this.data.type=a;a=/audio/.test(this.data.type)?"audio":"video";return this.setMedium(a)};q.prototype.getMedium=function(){return this.data.medium};q.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(y.NAME).setMedium(a)};q.prototype.getMetadata=function(){return this.data.metadata};q.prototype.setMetadata=function(a){return this.data.metadata=a};q.prototype.getSource=function(){return this.data.source};
q.prototype.setSource=function(a){var b;if(!(null==a||1>a.length)){this.data.source=a;b=this.facade.retrieveProxy(O.NAME);a=g.selectSource(a,function(a){return b.canPlayType(a)});if(null!=(null!=a?a.src:void 0)&&""!==a.src)return this.setSrc(a.src),this.setType(a.type);throw Error("No valid source could be found");}};q.prototype.getTrack=function(){return this.data.track};q.prototype.setTrack=function(a){return this.data.track=a};q.prototype.getTitle=function(){return this.data.title};q.prototype.setTitle=
function(a){return this.data.title=a};q.prototype.getWidth=function(){return this.data.width};q.prototype.setWidth=function(a){return this.data.width=a};q.prototype.getHeight=function(){return this.data.height};q.prototype.setHeight=function(a){return this.data.height=a};q.prototype.getDescription=function(){return this.data.description};q.prototype.setDescription=function(a){return this.data.description=a};q.prototype.getCategory=function(){return this.data.category};q.prototype.setCategory=function(a){return this.data.category=
a};q.prototype.getDuration=function(a){return this.data.duration};q.prototype.setDuration=function(a){var b;if(0!==a&&(b=navigator.userAgent,1!==a||!/Android/.test(b)||/Android.*Chrome/.test(b))&&(a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,a)),Infinity===a))return this.setTemporalType("live")};q.prototype.getPoster=function(a){return this.data.poster};q.prototype.setPoster=function(a){return this.data.poster=a};q.prototype.getIsLive=function(){return this.data.isLive};
q.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a};q.prototype.getTemporalType=function(){return this.data.temporalType};q.prototype.setTemporalType=function(a){if(a!==this.data.temporalType)return this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,a)};var ud=function(){ud.__super__.constructor.call(this)};f(ud,q);ud.NAME="MediaProxy";ud.prototype.setSource=function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===a.type}),
ud.__super__.setSource.call(this,a)};var Nc=function(a,b,c){Nc.__super__.constructor.call(this,a,b,c)};f(Nc,pa);Nc.prototype.playerType="external";Nc.prototype.createAPI=function(){return new pg(this,this.dispatcher)};Nc.prototype.createModel=function(){var a,b;this.registerProxy(new oa(this.config));this.registerProxy(new y);b=new $a;this.registerProxy(new O(b));a=new da;this.registerProxy(a);this.registerProxy(new H(this.config));this.registerProxy(b);this.registerProxy(new ud);this.registerProxy(new ub(this.config.params));
a.initialize()};Nc.prototype.createView=function(){var a,b=this;a=this.getViewComponent();this.registerMediator(new Ia("external",a));this.registerMediator(new Kb);a=new wb;this.registerMediator(a);k.create(a.viewComponent,k.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)});this.registerMediator(new vb);this.registerMediator(new Lb);a=new bc;this.viewComponent.appendChild(a.getViewComponent());this.registerMediator(a)};Nc.prototype.createController=function(){this.registerCommand(d.UPDATE_DATA_BINDINGS,
Td);this.registerCommand(P.TOGGLE_PLAY_PAUSE,cd);this.registerCommand(d.PLAY,cd);this.registerCommand(d.CHANGE_PLAY_STATE,Pd);this.registerCommand(d.SET_MEDIA,Sd);this.registerCommand(d.CHANGE_MEDIA,Qd);this.registerCommand(d.MEDIA_CHANGE,Rd);this.registerCommand(d.ERROR,Ud);this.registerCommand(d.READY,Vd);this.registerCommand(d.CHANGE_PARAMS,Wd)};var Oc=function(a){null!=a&&this.decode(a)};Oc.decode=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,
e,l,d){b[decodeURIComponent(e)]=decodeURIComponent(d)}));return b};Oc.encode=function(a){var b,c,e;c=[];for(b in a)e=a[b],null!=e&&c.push(""+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e));return c.join("\x26")};Oc.prototype.decode=function(a){var b,c;if(null!=a)for(b in c=Oc.decode(a),c)a=c[b],this[b]=a;return c};Oc.prototype.encode=function(){return Oc.encode(this)};var xb=function(a){var b,c,e;null==a&&(a=this);c={};this.addEventListener=function(a,b){b&&(null==c[a]&&(c[a]=[]),c[a].push(b))};
this.dispatchEvent=function(e){var d,f,t,g;f=c[e.type];d=a["on"+e.type];e.target=a;null!=d&&b(a,e,d);if(null!=f)for(t=0,g=f.length;t<g;t++)d=f[t],b(a,e,d)};this.removeEventListener=function(a,b){var e,d;if(a in c&&(e=c[a],d=e.indexOf(b),-1!==d))return e.splice(d,1)};b=function(a,b,c){try{c.apply(a,[b])}catch(d){e(d,b,c)}};e=function(a,b,c){var e,d;e=a.fileName||a.sourceURL;d=a.lineNumber||a.line;setTimeout(function(a){throw a;},0,{message:a.message,name:"AMP Event Listener Error",file:e,fileName:e,
line:d,lineNumber:d,error:a,event:b,listener:c,toString:function(){var a;a=""+this.name+":";a+="\n\t"+this.error.toString();null!=this.event&&(a+="\n\t\tevent: "+this.event.type);null!=this.listener&&(a+="\n\t\tfunction: "+this.listener.name);null!=this.file&&(a+="\n\t\tfile: "+this.file);null!=this.line&&(a+="\n\t\tline: "+this.line);return a}})}};xb.prototype.addEventListener=function(a,b,c){};xb.prototype.dispatchEvent=function(a){};xb.prototype.removeEventListener=function(a,b,c){};var ec=function(){this.item=
[];this.metadata={}};ec.prototype.title=null;ec.prototype.link=null;ec.prototype.description=null;ec.prototype.category=null;ec.prototype.pubDate=null;ec.prototype.language=null;ec.prototype.ttl=null;ec.prototype.item=null;ec.prototype.metadata=null;var ra=function(){this.metadata={}};ra.prototype.src=null;ra.prototype.source=null;ra.prototype.title=null;ra.prototype.description=null;ra.prototype.link=null;ra.prototype.guid=null;ra.prototype.pubDate=null;ra.prototype.poster=null;ra.prototype.thumbnail=
null;ra.prototype.embed=null;ra.prototype.category=null;ra.prototype.type=null;ra.prototype.medium=null;ra.prototype.duration=null;ra.prototype.track=null;ra.prototype.metadata=null;ra.prototype.scenes=null;ra.prototype.startTime=null;var dd=function(a,b){var c,e,d=this;this.date=a;this.label=null!=b?b:this.label;dd.__super__.constructor.call(this);e=null;this.engage=function(a){null==a&&(a=Date.now());a=this.date.getTime()-a;if(0>a)throw Error("Alarm date has past.");if(2147483647<a)throw Error("Invalid alarm date.");
this.disengage();e=setTimeout(c,a)};this.disengage=function(){clearTimeout(e)};c=function(){d.dispatchEvent({type:"alarm",label:d.label})}};f(dd,xb);dd.prototype.date=null;dd.prototype.label="alarm";dd.prototype.engage=function(a){};dd.prototype.disengage=function(){};var vc=function(){};vc.prototype.getFeed=function(a,b,c){return g.getJson(a,b,c)};vc.prototype.getMediaNode=function(a,b,c){var e,d,h,f;null==c&&(c=!0);h="media-"+b;e=a["media-group"]||a;d=e["media-content"];null!=d&&null!=d[h]?f=d[h]:
null!=e[h]?f=e[h]:null!=a[h]?f=a[h]:null!=a[b]&&c&&(f=a[b]);return f};vc.prototype.createEmbed=function(a){var b,c,e,d,h,f;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);f=b["media-param"];d=0;for(h=f.length;d<h;d++)e=f[d],c.params[e["@attributes"].name]=e["#text"]}catch(t){U.error("[AMP Feed Parse Error] embed parse error: "+
t.message,t)}return c};vc.prototype.createFeed=function(a){var b,c,e,d,h,f,t,g,Mc;try{if(b=a.channel,c=new ec,null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];g=0;for(Mc=d.length;g<Mc;g++)e=d[g],f=this.createMedia(e),c.item.push(f);for(h in b)t=b[h],h in c||(c.metadata[h]=t)}}catch(k){U.error("[AMP Feed Parse Error] feed parse error: "+k.message,k)}return c};
vc.prototype.createMedia=function(a){var b,c,e,d,h,f,t,g,Mc,k,n,m,p,q,r,s,u,v,w,x;try{t=new ra;f=this.getMediaNode(a,"content");if(f instanceof Array)for(t.source=[],m=0,r=f.length;m<r;m++)e=f[m],Mc={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(h=b.label||c["#text"],null!=h&&""!==h&&(null==Mc.rules&&(Mc.rules=[]),Mc.rules.push(h)))),t.source.push(Mc),t.medium=e["@attributes"].medium,t.duration=
parseFloat(e["@attributes"].duration);else t.type=f["@attributes"].type,t.src=f["@attributes"].url,t.medium=f["@attributes"].medium,t.duration=parseFloat(f["@attributes"].duration);t.guid=a.guid;t.title=this.getMediaNode(a,"title");t.link=a.link;t.description=this.getMediaNode(a,"description");t.pubDate=new Date(Date.parse(a.pubDate));t.thumbnail=t.poster=null!=(v=this.getMediaNode(a,"thumbnail"))?null!=(w=v["@attributes"])?w.url:void 0:void 0;t.embed=this.createEmbed(a);t.scenes=null!=(x=this.getMediaNode(a,
"scenes"))?x["media-scene"]:void 0;g=this.getMediaNode(a,"status",!1);null!=g&&(t.status={state:g["@attributes"].state,reason:g["@attributes"].reason});t.category=a.category;t.category instanceof Array||(t.category=[t.category]);g=this.getMediaNode(a,"category",!1);if(null!=g)for(p=0,s=g.length;p<s;p++)c=g[p],null!=c["#text"]&&""!==c["#text"]&&t.category.push(c["#text"]);null!=t.category&&t.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});g=this.getMediaNode(a,
"subTitle");if(null!=g)for(null==t.track&&(t.track=[]),g instanceof Array||(g=[g]),q=0,u=g.length;q<u;q++)k=g[q],null!=k["@attributes"]&&t.track.push({src:k["@attributes"].href,type:k["@attributes"].type,kind:"captioning",srclang:k["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);t.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");t.temporalType=t.isLive?"live":"ondemand";for(d in a)n=a[d],d in t||(t.metadata[d]=n)}catch(y){U.error("[AMP Feed Parse Error] media parse error: "+
y.message,y)}return t};var Pb=function(a,b,c){var e,d,h,f,t,k=this;this.url=a;null==b&&(b=!0);this.interval=null!=c?c:1E3;Pb.__super__.constructor.call(this);h=e=0;t=d=null;this.sync=function(){var a,b=this;a=g.getXHR();a.onreadystatechange=function(c){try{switch(a.readyState){case 1:e=Date.now();break;case 2:if(400<=a.status)throw Error("Sync error ("+a.status+"): "+b.url);Date.now();d=a.getResponseHeader("Date");null!=d?(h=Date.parse(d),b.offset=e-h):b.offset=0;b.dispatchEvent({type:"sync",time:b.now()})}}catch(f){b.offset=
0,b.dispatchEvent({type:"error",error:f,xhr:a})}};a.onerror=function(c){b.offset=0;b.dispatchEvent({type:"error",error:c,xhr:a})};Date.now();a.open("Redirectc1f0.html",this.url,!0);a.send()};this.start=function(){this.stop();this.running=!0;f();t=setInterval(f,this.interval)};this.stop=function(){this.running=!1;clearInterval(t);t=null};f=function(){k.dispatchEvent({type:"tick",time:k.now()})};!0===b&&null!=this.url&&this.sync()};f(Pb,xb);Pb.prototype.url=null;Pb.prototype.interval=1E3;Pb.prototype.running=!1;
Pb.prototype.offset=0;Pb.prototype.now=function(){return Date.now()-this.offset};Pb.prototype.sync=function(){};Pb.prototype.start=function(){};Pb.prototype.stop=function(){};var U=function(){};U.enabled=!1;U.enable=function(a){null==a&&(a=/debug\=true/.test(location.search.toLowerCase()));this.enabled=a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){});return a};U.log=function(){try{console.log.apply(console,arguments)}catch(a){}};U.trace=function(){try{console.trace.apply(console,
arguments)}catch(a){}};U.debug=function(){try{console.log.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};U.info=function(){try{console.info.apply(console,arguments)}catch(a){}};U.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};U.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};U.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var R=function(a,b){this.type=a;null!=b&&(this.data=this.details=
b)};R.prototype.type=null;R.prototype.target=null;R.prototype.data=null;R.prototype.details=null;var qa=function(){qa.__super__.constructor.call(this,this)};f(qa,xb);qa.prototype.xhr=null;qa.prototype.headers=null;qa.prototype.response=null;qa.prototype.responseXML=null;qa.prototype.responseText=null;qa.prototype.responseType=null;qa.prototype.withCredentials=!1;qa.prototype.readyState=0;qa.prototype.status=null;qa.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(h){e=new window.ActiveXObject("Microsoft.XMLHTTP")}if(qa.isCORS(b))if(Object.prototype.hasOwnProperty.call(e,
"withCredentials"))try{e.withCredentials=this.withCredentials}catch(f){U.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",f)}else"undefined"!==typeof XDomainRequest&&(c=!0,e=new XDomainRequest);if(null!=e){c&&(e.onprogress=function(){},e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=!1,e.responseXML.loadXML(e.responseText)),
e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new R("readystatechange",e));if(4===e.readyState)if(d.status=e.status,199<(b=d.status)&&400>b||0===d.status){null==e.responseText&&(e.responseText=e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=JSON.parse(e.responseText),d.responseType=
"json"}catch(h){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new R("load",d))}else 0!==d.status&&d.dispatchEvent(new R("error",d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new R("error",d))})}catch(t){}e.open(a,b)}this.xhr=e};qa.prototype.send=function(a){var b,c,e;if(null!=this.headers)for(b in e=this.headers,e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);this.xhr.send(a)};qa.prototype.setRequestHeader=function(a,b){null!=a&&null!=
b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};qa.prototype.setRequestHeaders=function(a){return this.headers=a};qa.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};qa.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};qa.isCORS=function(a){var b,c;b=document.createElement("a");
b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var ed=function(){};ed.construct=function(){var a,b,c;c=Oc.decode(window.location.search);for(a in c)b=c[a],ed[a]=b;return!0};ed.constructed=ed.construct();ed.serialize=function(a,b){var c,e,d,h;d=[];for(e in a)h=a[e],null!=h&&(c=b?b+"["+e+"]":e,d.push("object"===
typeof h?this.serialize(h,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(h)));return d.join("\x26")};var Sa=function(a,b){this.element=a;this.timeout=b;Sa.__super__.constructor.call(this);this.resetHandler=this.reset.bind(this)};f(Sa,xb);Sa.prototype.events="mousemove mousedown keypress DOMMouseScroll mousewheel touchmove MSPointerMove".split(" ");Sa.prototype.resetHandler=null;Sa.prototype.element=null;Sa.prototype.timeout=null;Sa.prototype.active=!0;Sa.prototype.timeoutId=null;Sa.prototype.applyListeners=
function(a){var b,c,e,d;null==a&&(a="add");d=this.events;c=0;for(e=d.length;c<e;c++)b=d[c],this.element[""+a+"EventListener"](b,this.resetHandler)};Sa.prototype.start=function(a){null!=a&&(this.timeout=a);this.stop();this.applyListeners("add");this.timeoutId=setTimeout(this.setActive.bind(this,!1),this.timeout)};Sa.prototype.stop=function(){this.applyListeners("remove");clearTimeout(this.timeoutId)};Sa.prototype.reset=function(){this.setActive(!0);this.start()};Sa.prototype.setActive=function(a){if(a!==
this.active)return this.active=a,this.dispatchEvent(new R("activechange",{active:this.active})),a};Sa.prototype.getActive=function(){return this.active};var g=function(){};g.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
g.flashTypes=["video/mp4","video/x-flv","video/f4m","application/smil","application/smil+xml"];g.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml"};g.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",
regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};g.playbackModes={HTML:"html",AUTO:"auto",FLASH:"flash",NONE:"none",EXTERNAL:"external"};g.getPlaybackMode=function(a){var b,c,e,d;null==a&&(a=(null!=(c=ed.mode)?c.toLowerCase():void 0)||this.playbackModes.AUTO);c=!1;d=this.playbackModes;for(b in d)if(e=d[b],e===a){c=!0;break}c||(a=this.playbackModes.AUTO);if(a!==this.playbackModes.AUTO)return a!==
this.playbackModes.FLASH||this.hasFlash()||(a=this.playbackModes.NONE),a;this.hasFlash()||(a=this.supportsHTML5Video()?this.playbackModes.HTML:this.playbackModes.NONE);a===this.playbackModes.AUTO&&(a=this.isHTML5()?this.playbackModes.HTML:this.playbackModes.FLASH);return a};g.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=a[b],e.push(g.rules[b]=c);return e};g.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],b=g.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;
return!1};g.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],g.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||g.getMimeType(c.src)))return c;return null};g.getMimeType=function(a){return this.mimeTypes[g.getFileExtension(a)]};g.selectTrack=function(a,b){var c,e,d,h;d=0;for(h=a.length;d<h;d++)if(c=a[d],c.kind===b){e=c;break}return e};g.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};g.isIPad=
function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};g.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)};g.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};g.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};g.isBlackBerry=function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};g.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};g.supportsHTML5Video=function(){return null!=
document.createElement("video").canPlayType};g.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};g.isIOS=function(){var a;a=/iPad|iPhone|iPod/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};g.getIOSversion=function(){var a;if(/iP(hone|od|ad)/.test(navigator.platform))return a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]};g.hasFlash=function(){return swfobject.hasFlashPlayerVersion("1")};
g.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};g.getDevice=function(){var a;a=null;this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()?a="kindlefire":/Mac|Win32/.test(navigator.platform)&&(a="desktop");return a};g.xmlToJson=function(a){var b,c,e,d,h;e={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,
b=d=0,h=c.length;d<h;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;if(a.hasChildNodes())for(h=a.childNodes,b=a=0,d=h.length;a<d;b=++a)if(c=h[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),e[b].push(c));return e};g.getXHR=function(){return new qa};g.get=function(a,b,c){var e;null==b&&
(b={});null==c&&(c=null);e=g.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&(e.onload=b.onload),null!=b.onerror&&(e.onerror=b.onerror));e.open("Redirectc1f0.html",a);null!=c&&e.setRequestHeaders(c);e.send();return e};g.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=g.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&(d.onerror=c.onerror);d.open("Redirectc1f0.html",a);null!=e&&d.setRequestHeaders(e);d.send(b);return d};g.loadAMPScript=
function(a,b){return this.loadScript(a,b,this.getAMPParent())};g.loadAMPScripts=function(a,b){var c,e,d,h,f,t=this;c=a.length;e=0;null!=a&&0!==c&&(f=function(){e++;e===c?"function"===typeof b&&b():d()},d=function(){t.loadScript(a[e],f,h)},h=this.getAMPParent(),d())};g.getAMPParent=function(a,b){var c;c=this.getAMPScriptTag();if(null!=c)return c.parentNode;c=document.getElementsByTagName("head");if(null!=(null!=c?c[0]:void 0))return c[0]};g.getAMPScriptTag=function(){var a,b,c,e;b=document.getElementsByTagName("script");
c=0;for(e=b.length;c<e;c++)if(a=b[c],/amp(\..*)?\.js/.test(a.src))return a;return null};g.loadScript=function(a,b,c){var e;c=c||document.getElementsByTagName("head")[0];e=document.createElement("script");e.type="text/javascript";null!=b&&(e.addEventListener?e.onload=function(a){b()}:e.readyState&&(e.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,b()}));e.src=a;c.appendChild(e);return e};g.loadStyleSheet=function(a){var b,c;b=
document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=a;return b.appendChild(c)};g.read=function(a,b,c,e){var d,h;null==b&&(b={});null==c&&(c="");null==e&&(e=[]);try{return h=this.get(a,b,e),d=h.responseText||h.text,c===g.mimeTypes.json?JSON.parse(d):c===g.mimeTypes.xml&&null!=h.responseXML?h.responseXML:d}catch(f){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",f),null}};
g.getFileExtension=function(a){return a.split(".").pop().replace(/\?.*/,"")};g.getResponseHeader=function(a,b,c){var e;null==c&&(c={});e=g.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("Redirectc1f0.html",a,!1);e.send();return e.getResponseHeader(b)};g.getResponseHeaders=function(a,b,c){var e,d,h;null==c&&(c={});e=g.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("Redirectc1f0.html",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(h=b.length;d<h;d++)a=b[d],c[a]=e.getResponseHeader(a);
return c};g.isTouch=null;g.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),this.isTouch=!0}catch(a){this.isTouch=!1}return this.isTouch};g.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};g.beacon=function(a){var b;b=document.getElementById("beaconId");null==b&&(b=document.createElement("img"),b.setAttribute("id","beaconId"),b.setAttribute("height",0),b.setAttribute("width",0),document.body.appendChild(b),b.style.display="none");b.setAttribute("src",a);return b};
g.getElementOffset=function(a){var b;b={left:0,top:0};if(a.offsetParent)for(b.left=a.offsetLeft,b.top=a.offsetTop;a=a.offsetParent;)b.left+=a.offsetLeft,b.top+=a.offsetTop;return b};g.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;if(null==b)return a;!0===c&&(a=g.clone(a),b=g.clone(b));for(e in b)c=b[e],"object"===typeof c?(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=g.override(a[e],c,!1)):a[e]=c;return a};g.clone=function(a,b){var c,e,d,h,f,t,g;null==b&&(b=!0);if("object"!==
typeof a)c=a;else for(h in c=a instanceof Array?[]:{},a)if(f=a[h],"object"===typeof f&&!0===b)if(f instanceof Array)for(c[h]=[],t=0,g=f.length;t<g;t++)e=f[t],c[h].push(this.clone(e));else for(d in c[h]={},f)e=f[d],c[h][d]=this.clone(e);else c[h]=f;return c};g.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";c=g.formatZeroFill(a%60);a=parseInt(a/60);c=g.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=g.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};
g.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};g.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/b:3===d.length&&(d[2]=d[2].replace(",","."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};g.cacheBust=function(a,b,c){var e;null==b&&
(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};g.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};g.trim=function(a){return a.replace(/^\s*(.*)/,"$1").replace(/(.*)\s*$/,"$1")};g.getJson=function(a,b,c){var e;e=g.getXHR();e.open("Redirectc1f0.html",a);e.onload=function(a){a="document"===e.responseType?g.xmlToJson(e.responseXML):e.response;"function"===typeof b&&b(a)};e.onerror=function(a){"function"===typeof c&&c(a)};e.send();return e};
g.getSource=function(a,b,c){var e;e=g.getPlaybackMode();g.getJson(a,function(a){var c,d;a=(new vc).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==g.flashTypes.indexOf(a)||"html"===e&&-1===g.flashTypes.indexOf(a)?"maybe":""},c=g.selectSource(a.item[0].source,c));"function"===typeof b&&b(c)},c)};g.trackMouse=function(){try{document.addEventListener("mousemove",this.mouseTracker)}catch(a){document.attachEvent("mousemove",this.mouseTracker)}};
g.mouseTracker=function(a){g.clientX=a.clientX;g.clientY=a.clientY;g.pageX=a.pageX;g.pageY=a.pageY};g.isMouseOverElement=function(a){return null==a?!1:a.contains(document.elementFromPoint(g.clientX,g.clientY))};var ab=function(a,b,c,e,d){this.onclick=null!=d?d:this.onclick;ab.__super__.constructor.call(this,e,null,b,c);this.icon=this.create("icon");null!=a&&(this.label=this.createText("label",a))};f(ab,S);ab.prototype.componentType="button";ab.prototype.icon=null;ab.prototype.label=null;ab.prototype.onclick=
null;var fc=function(a){fc.__super__.constructor.call(this,null,a)};f(fc,ab);fc.prototype.componentName="full-screen";fc.prototype.onRegister=function(){fc.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};fc.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);return!1};fc.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN]};fc.prototype.handleNotification=
function(a){var b;b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case d.ENABLE_FULL_SCREEN:this.setDisabled(!1)}};var G=function(a,b){this.player=a;this.config=b;G.__super__.constructor.call(this);this.dispatcher=new xb(this)};f(G,puremvc.Mediator);G.NAME="PluginWrapper";G.prototype.player=null;G.prototype.config=null;G.prototype.dispatcher=null;G.prototype.createFlashVars=null;G.prototype.createXML=null;G.prototype.getAPI=function(){return this};G.prototype.addEventListener=
function(a,b){this.dispatcher.addEventListener(a,b)};G.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT]",a.type,a.data,a);a.player=this.player.parent;this.dispatcher.dispatchEvent(a)};G.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};G.prototype.createElement=function(a,b,c){var e;e=a.createElement("element");e.setAttribute("id",
b);null==c&&(c=this.getControls(a).controls);null!=c&&c.appendChild(e);return e};G.prototype.createProperty=function(a,b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=K.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,b,e,d);return d};G.prototype.getControls=function(a){var b,c,e,d,h;c=a.getElementsByTagName("element");if(1>(null!=c?c.length:void 0))return null;
a={};d=0;for(h=c.length;d<h;d++)b=c[d],e=b.getAttribute("id"),a[e]=b;return a};G.prototype.hasControls=function(a){var b;return null!=(null!=(b=this.getControls(a))?b.controls:void 0)};G.prototype.listNotificationInterests=function(){return[p.CREATE_FLASH_VARS,p.CREATE_XML]};G.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case p.CREATE_FLASH_VARS:"function"===typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case p.CREATE_XML:"function"===
typeof this.createXML&&this.createXML(a.xml)}};var $e=function(){$e.__super__.constructor.call(this)};f($e,puremvc.SimpleCommand);$e.prototype.execute=function(a){this.facade.logger.debug("ControlsPlayCommand");this.facade.retrieveProxy($.NAME).start()};var af=function(){af.__super__.constructor.call(this)};f(af,puremvc.SimpleCommand);af.prototype.execute=function(a){this.facade.logger.debug("ControlsPauseCommand");this.facade.retrieveProxy($.NAME).stop()};var bf=function(){bf.__super__.constructor.call(this)};
f(bf,puremvc.SimpleCommand);bf.prototype.execute=function(a){var b,c;this.facade.logger.debug("ControlsActiveStateChangeCommand");c=this.facade.retrieveProxy($.NAME);b=this.facade.app.retrieveProxy(y.NAME);a.getBody().newState===Ra.ACTIVE&&b.getPlayState()!==I.READY&&"desktop"!==g.getDevice()&&c.start()};var cf=function(){cf.__super__.constructor.call(this)};f(cf,puremvc.SimpleCommand);cf.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakStartCommand");this.facade.app.getVideo().controls=
!1};var df=function(){df.__super__.constructor.call(this)};f(df,puremvc.SimpleCommand);df.prototype.execute=function(a){this.facade.logger.debug("ControlsAdBreakEndCommand");this.facade.app.getVideo().controls=!0};var ef=function(){ef.__super__.constructor.call(this)};f(ef,puremvc.SimpleCommand);ef.prototype.execute=function(a){this.facade.logger.debug("ControlsChangeMediaCommand");a=a.getBody().poster;null!=a&&""!==a&&(this.facade.app.getVideo().poster=a)};var Ta=function(a,b){Ta.__super__.constructor.call(this,
a,b)};f(Ta,G);Ta.NAME="ControlsWrapper";Ta.prototype.mode="auto";Ta.prototype.autoHide=5;Ta.prototype.listNotificationInterests=function(){return Ta.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIUM_CHANGE])};Ta.prototype.handleNotification=function(a){var b;Ta.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIUM_CHANGE:b=/audio/.test(a)?"persistent":this.mode,this.setMode(b)}};Ta.prototype.createFlashVars=function(a){null!=this.config.mode&&
(this.mode=a.controls_mode=this.config.mode);return a};Ta.prototype.createXML=function(a){var b,c,e,d,h,f;d=a.getElementsByTagName("view")[0];e=a.getElementsByTagName("element");b=null;h=0;for(f=e.length;h<f;h++)if(c=e[h],"controls"===c.getAttribute("id")){b=c;break}null==b&&(b=a.createElement("element"),b.setAttribute("id","controls"),d.appendChild(b));null!=b.attributes.autoHideDelay?this.autoHide=b.getAttribute("autoHideDelay"):null!=this.config.autoHide&&(this.autoHide=this.config.autoHide,b.setAttribute("autoHideDelay",
this.config.autoHide));return a};Ta.prototype.getMode=function(){return this.mode};Ta.prototype.setMode=function(a){if(a!==this.mode){try{this.mode=a,this.player.video.setPlayerProperty("controlsMode",a)}catch(b){this.facade.logger.error("Controls Error:",b)}return a}};Ta.prototype.getAutoHide=function(){return this.autoHide};var L=function(a,b){this.direction=null!=b?b:this.direction;L.__super__.constructor.call(this,null,null,a)};f(L,S);L.prototype.componentType="slider";L.prototype.trackView=null;
L.prototype.handleView=null;L.prototype.valueView=null;L.prototype.startCapView=null;L.prototype.endCapView=null;L.prototype.min=0;L.prototype.max=1;L.prototype.value=0;L.prototype.dragging=!1;L.prototype.direction="vertical";L.prototype.pressHandler=null;L.prototype.releaseHandler=null;L.prototype.moveHandler=null;L.prototype.clickHandler=null;L.prototype.onRegister=function(){L.__super__.onRegister.call(this);this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=
this.create("track");this.valueView=this.create("value",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=k.create(this.handleView,k.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=k.create(window,k.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=k.create(window,k.MOVE,this.updateHandler.bind(this));this.moveHandler.unbind();this.clickHandler=k.create(this.trackView,k.CLICK,this.updateHandler.bind(this))};
L.prototype.setDirection=function(a){return this.direction=a};L.prototype.getDirection=function(){return this.direction};L.prototype.setValue=function(a){this.updateValue(a);return a};L.prototype.getValue=function(){return this.value};L.prototype.setDragging=function(a){if(a!==this.dragging)return this.dragging=a,this.sendNotification(d.IS_USER_ACTIVE,this.dragging),this.dragging};L.prototype.getDragging=function(){return this.dragging};L.prototype.updateValue=function(a){var b;this.value=g.clamp(a,
this.min,this.max);"vertical"===this.direction?(a="height",b="bottom"):(a="width",b="left");this.valueView.style[a]=this.handleView.style[b]=""+100*this.value+"%"};L.prototype.calculateValue=function(a){var b,c;"vertical"===this.getDirection()?(c=this.viewComponent.offsetHeight,b=g.getElementOffset(this.viewComponent).top+c,a=-(a.y-b)):(c=this.viewComponent.offsetWidth,b=g.getElementOffset(this.viewComponent).left,a=a.x-b);return g.clamp(a/c,0,1)};L.prototype.handlePressHandler=function(a){this.moveHandler.bind();
this.releaseHandler.bind();this.setDragging(!0);a.stopImmediatePropagation();return!1};L.prototype.handleReleaseHandler=function(a){this.moveHandler.unbind();this.releaseHandler.unbind();this.setDragging(!1);a.stopImmediatePropagation();return!1};L.prototype.updateHandler=function(a){a.stopImmediatePropagation();this.setValue(this.calculateValue({x:a.clientX||a.targetTouches[0].screenX,y:a.clientY||a.targetTouches[0].screenY}));return!1};var Aa={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",
CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"},Ua=function(a){Ua.__super__.constructor.call(this,null,null,a)};f(Ua,S);Ua.prototype.componentName="time-display";Ua.prototype.duration=null;Ua.prototype.currentTimeDisplay=null;Ua.prototype.separatorDisplay=null;Ua.prototype.durationDisplay=null;Ua.prototype.liveDisplay=null;Ua.prototype.onRegister=function(){Ua.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",this.localizationManager.getString(v.MSG_LIVE));
this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display"," / ",this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};Ua.prototype.listNotificationInterests=function(){return[d.PLAY,d.DURATION_CHANGE,d.ENDED,d.DISPLAY_TIME]};Ua.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAY:this.updateDuration();break;case d.DURATION_CHANGE:this.duration=
a;this.updateCurrentTime();this.updateDuration();break;case d.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case d.DISPLAY_TIME:this.updateCurrentTime(a.currentTime,a.duration),this.updateDuration(a.duration)}};Ua.prototype.updateCurrentTime=function(a,b){null==a&&(a=this.currentTime);null==b&&(b=this.duration);this.currentTimeDisplay.textContent=g.formatTimecode(a,b)};Ua.prototype.updateDuration=function(a){null==a&&(a=this.duration);this.durationDisplay.textContent=g.formatTimecode(a)};
var Ja=function(a){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);Ja.__super__.constructor.call(this,null,null,a)};f(Ja,S);Ja.prototype.componentName="panels";Ja.prototype.activePanel=null;Ja.prototype.panels=null;Ja.prototype.closeHandler=null;Ja.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in Aa)b=Aa[a],c.push(b);return c.concat([])};Ja.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case Aa.ADD_PANEL:this.addPanel(a);
break;case Aa.REMOVE_PANEL:this.removePanel(a);break;case Aa.OPEN_PANEL:this.openPanel(a);break;case Aa.CLOSE_PANEL:this.closePanel(a);break;case Aa.CLOSE_ALL_PANELS:this.closeAllPanels(a);break;case Aa.TOGGLE_PANEL:this.togglePanel(a)}};Ja.prototype.addPanel=function(a){this.panels.push(a);this.viewComponent.appendChild(a.getViewComponent())};Ja.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1);this.viewComponent.removeChild(a.getViewComponent())};Ja.prototype.openPanel=
function(a){a!==this.activePanel&&null!=a&&(this.closeAllPanels(),this.activePanel=a,this.activePanel.classList.add("active"),"desktop"!==g.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))};Ja.prototype.closePanel=function(a){a.classList.remove("active");null!=this.activePanel&&(this.activePanel=null,"desktop"!==g.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))};Ja.prototype.togglePanel=
function(a){a===this.activePanel?this.closePanel(a):this.openPanel(a)};Ja.prototype.closeAllPanels=function(){var a,b,c,e;e=this.panels;b=0;for(c=e.length;b<c;b++)a=e[b],this.closePanel(a)};Ja.prototype.mouseupHandler=function(a){var b,c;b=document.elementFromPoint(a.clientX,a.clientY);c=this.activePanel.getViewComponent();a=this.activePanel.control.getViewComponent();b!==c&&!1===c.contains(b)&&b!==a&&!1===a.contains(b)&&this.closeAllPanels()};var aa=function(a){aa.__super__.constructor.call(this,
a,"horizontal")};f(aa,L);aa.prototype.componentName="progress";aa.prototype.bufferValue=null;aa.prototype.scrubTime=null;aa.prototype.scrubTimeSeparator=null;aa.prototype.cuePoints=null;aa.prototype.duration=0;aa.prototype.isLive=!1;aa.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null};aa.prototype.onRegister=function(){aa.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",!1);this.trackView.insertBefore(this.bufferValue,
this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator",this.trackView);this.scrubTime=this.create("scrub-time",this.trackView);this.thumbPreview=this.create("thumb-preview")};aa.prototype.listNotificationInterests=function(){return[d.ENDED,d.MEDIA_CHANGE,d.DURATION_CHANGE,d.PROGRESS,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISPLAY_TIME]};aa.prototype.handleNotification=function(a){var b,c,e,l;b=a.getName();a=a.getBody();
switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(a.metadata);break;case d.PROGRESS:a=g.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=a+"%";break;case d.DURATION_CHANGE:this.duration=a;break;case d.ENDED:this.updateValue(1);break;case d.ADD_CUE_POINTS:if(null!=(null!=(c=this.facade.app.config)?null!=(e=c.controls)?e.displaySceneMarkers:void 0:void 0)&&!1===this.facade.app.config.controls.displaySceneMarkers)break;
this.removeCuePoints();e=0;for(l=a.length;e<l;e++)b=a[e],0!==b&&-1!==b&&(c=this.create("cue-point",this.cuePoints),c.style.left=100*(b/this.duration)+"%");break;case d.REMOVE_CUE_POINTS:this.removeCuePoints();break;case d.DISPLAY_TIME:this.updateValue(a.currentTime/a.duration,a.duration)}};aa.prototype.updatePreview=function(a){var b=this;this.previewData.src=a.previewThumbnailSrc;this.previewData.previewHeight=a.previewThumbnailHeight;this.previewData.previewWidth=a.previewThumbnailWidth;this.previewData.count=
a.previewThumbnailCount;a=new Image;this.previewData.src&&(a.src=this.previewData.src);k.create(a,"load",function(a){a.stopImmediatePropagation();b.previewData.imgWidth=a.target.width;b.previewData.imgHeight=a.target.height;return!1});this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+")");this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=this.previewData.previewHeight+"px"};aa.prototype.removeCuePoints=function(){null!=
this.cuePoints&&(this.cuePoints.innerHTML="")};aa.prototype.setValue=function(a){var b;aa.__super__.setValue.call(this,a);b=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();this.sendNotification(P.SEEK,a*b.getDuration())};aa.prototype.updateValue=function(a,b){null==b&&(b=this.duration);!0===this.isLive&&(a=1);!0===isNaN(a)&&(a=0);aa.__super__.updateValue.call(this,a);!0===this.getDragging()&&(this.scrubTime.textContent=g.formatTimecode(this.value*b));this.scrubTime.style.left=this.scrubTimeSeparator.style.left=
""+(100*this.value).toFixed(2)+"%";this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(this.value*b/this.previewInterval);this.previewRow=Math.floor(this.previewImgIndex*this.previewData.previewWidth/this.previewData.imgWidth);this.xpos="-"+this.previewData.previewWidth*this.previewImgIndex+"px ";this.ypos="-"+this.previewData.previewHeight*this.previewRow.toFixed(0)+"px ";this.thumbPreview.style.backgroundPosition=this.xpos+this.ypos;this.thumbPreview.style.left=
""+(100*this.value-18).toFixed(2)+"%"};aa.prototype.handlePressHandler=function(a){aa.__super__.handlePressHandler.call(this,a);this.classList.add("scrubbing")};aa.prototype.handleReleaseHandler=function(a){aa.__super__.handleReleaseHandler.call(this,a);this.classList.remove("scrubbing")};var $d=function(a){$d.__super__.constructor.call(this,null,a)};f($d,ab);$d.prototype.componentName="play-pause";$d.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(P.TOGGLE_PLAY_PAUSE);
return!1};var $=function(a){$.__super__.constructor.call(this,a)};f($,w);$.NAME=w.NAME;$.prototype.defaults={mode:"auto",autoHide:3};$.prototype.timeout=null;$.prototype.appState=null;$.prototype.controls=null;$.prototype.interactiveElement=null;$.prototype.idleUtil=null;$.prototype.initializeNotifier=function(a){$.__super__.initializeNotifier.call(this,a);this.appState=this.facade.app.retrieveProxy(y.NAME);this.controls=this.facade.retrieveMediator(y.NAME)};$.prototype.initialize=function(){var a=
this;null!=this.config.mode&&this.changeMode(this.config.mode);this.interactiveElement=this.facade.app.retrieveMediator(wb.NAME).getViewComponent();"desktop"===g.getDevice()?(k.create(this.interactiveElement,"mouseenter",function(){a.stop();a.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.ACTIVE)}),k.create(this.interactiveElement,"mouseleave",function(){a.start()}),this.idleUtil=new Sa(this.facade.app.getViewComponent(),1E3*this.data.autoHide),this.idleUtil.addEventListener("activechange",function(b){a.sendNotification(d.CHANGE_ACTIVE_STATE,
!0!==b.details.active?Ra.INACTIVE:Ra.ACTIVE)}),this.idleUtil.start()):k.create(this.interactiveElement,k.CLICK,function(){a.sendNotification(d.TOGGLE_ACTIVE)})};$.prototype.setMode=function(a){if(this.data.mode===a)return a;this.changeMode(a);return a};$.prototype.changeMode=function(a){"auto"===this.data.mode&&this.stop();this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,"controls-"+this.data.mode);this.data.mode=a;this.facade.sendNotification(d.ADD_APPLICATION_STATE,"controls-"+this.data.mode)};
$.prototype.getMode=function(){return this.data.mode};$.prototype.setAutoHide=function(a){return this.data.autoHide=a};$.prototype.getAutoHide=function(){return this.data.autoHide};$.prototype.start=function(){this.stop();"auto"===this.data.mode&&(this.timeout=setTimeout(this.hide.bind(this),1E3*this.data.autoHide))};$.prototype.stop=function(){clearTimeout(this.timeout);this.timeout=null};$.prototype.hide=function(){"auto"===this.data.mode&&(!0!==this.appState.getIsUserActive()&&!g.isMouseOverElement(this.facade.viewComponent)||
this.appState.getDisplayState()===ca.FULL_SCREEN?this.facade.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.INACTIVE):this.start())};var zb=function(){zb.__super__.constructor.call(this)};f(zb,Za);zb.prototype.componentName="controls";zb.prototype.activeControlPanel=null;zb.prototype.controlBar=null;zb.prototype.panels=null;zb.prototype.onRegister=function(){zb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.controlBar=this.create("control-bar");this.facade.registerMediator(new Ja(this.viewComponent));
this.facade.registerMediator(new $d(this.controlBar));this.facade.registerMediator(new Ua(this.controlBar));this.facade.registerMediator(new aa(this.controlBar));this.create("separator",this.controlBar)};zb.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE]};zb.prototype.handleNotification=function(a){var b,c;b=a.getName();a=a.getBody();switch(b){case d.READY:!1!==(null!=(c=a.fullscreen)?c.enabled:void 0)&&this.facade.registerMediator(new fc(this.controlBar));
break;case d.ADD_CONTROL_STATE:this.classList.add(a);break;case d.REMOVE_CONTROL_STATE:this.classList.remove(a);break;case d.ADD_CONTROL:this.controlBar.appendChild(a);break;case d.REMOVE_CONTROL:this.controlBar.removeChild(a)}};var Q=function(){Q.__super__.constructor.call(this)};f(Q,xb);Q.UNINITIALIZED=0;Q.LOADING=1;Q.LOADED=2;Q.AMP_DEFAULTS="amp-defaults";Q.getConfigURL=function(){var a;a=g.getAMPScriptTag();return null!=a&&(a=a.src,-1!==a.indexOf("?")&&(a=Oc.decode(a),null!=a[this.AMP_DEFAULTS]))?
a[this.AMP_DEFAULTS]:null};Q.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};Q.parseItem=function(a){var b,c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&
c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};Q.loadHead=function(a,b){var c,e,d,h,f,t;e=g.getAMPParent();if(null!=a.links&&0<a.links.length)for(h=a.links,f=0,t=h.length;f<t;f++)d=h[f],c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=d,e.appendChild(c);c=a.scripts;null!=c&&0<c.length?g.loadAMPScripts(c,b):"function"===typeof b&&b()};Q.prototype.url=null;Q.prototype.data=null;Q.prototype.xml=null;
Q.prototype.readyState=Q.UNINITIALIZED;Q.prototype.loaded=!1;Q.prototype.loadURL=function(a,b){var c=this;null==b&&(b=!1);if(null==a&&(a=Q.getConfigURL(),null==a))return;this.url=a;this.setReadyState(Q.LOADING);g.get(a,{withCredentials:b,onload:function(a){a=a.data;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=Q.parseModule(a)):a=a.response;c.loadModule(a)},onerror:function(a){c.dispatchEvent(new R("error",a));U.error(a)}})};
Q.prototype.loadModule=function(a){var b=this;null!=a.head?Q.loadHead(a.head,function(){b.loadData(a.config)}):this.loadData(a.config)};Q.prototype.loadData=function(a){this.data=a;this.setReadyState(Q.LOADED)};Q.prototype.load=function(a,b){null==b&&(b=!1);"object"===typeof a?this.loadModule(a):null!=a&&"string"!==typeof a||this.loadURL(a,b)};Q.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new R("readystatechange",a));a!==Q.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new R("load",
this.data)))};var fd=function(a){fd.__super__.constructor.call(this,a);a=a.retrieveProxy($.NAME);this.setMode=a.setMode.bind(a);this.getMode=a.getMode.bind(a);this.setAutoHide=a.setAutoHide.bind(a);this.getAutoHide=a.getAutoHide.bind(a)};f(fd,yb);fd.prototype.setMode=function(a){};fd.prototype.getMode=function(){};fd.prototype.setAutoHide=function(a){};fd.prototype.getAutoHide=function(){};var r=function(a,b,c){var e,d,h,f,t,k=this;"string"===typeof a&&(a=document.getElementById(a));g.trackMouse();
e=f=null;d=new xb(this);this.addEventListener=function(a,b,c){d.addEventListener(a,b,c)};this.dispatchEvent=function(a){a.player=this;d.dispatchEvent(a)};this.removeEventListener=function(a,b,c){d.removeEventListener(a,b,c)};null!=c&&this.addEventListener("ready",c);h=function(){var a;"string"===typeof b&&(a=g.get(b),b=JSON.parse(a.responseText));r.defaults.readyState!==Q.LOADED?(null!=Q.getConfigURL()&&r.defaults.readyState===Q.UNINITIALIZED&&r.loadDefaults(),r.defaults.addEventListener("load",function(a){t()})):
t()};t=function(){var c,h,t;null!=r.defaults.data&&(b=g.override(r.defaults.data,b));k.version=k.getVersion();b.mode=g.getPlaybackMode(b.mode);null==b.version&&(b.version=k.version);null==a.dataset&&(a.dataset={});a.dataset.version=k.version;U.log(k.version);switch(b.mode){case "html":f=k.createHTMLPlayer(b,a,d);break;case "flash":f=k.createFlashPlayer(b,a,d);break;case "external":f=k.createExternalPlayer(b,a,d);break;case "none":f=k.createInstallPlayer(a)}f.parent=k;e="function"===typeof f.getAPI?
f.getAPI():void 0;if(null!=e)for(h in e)c=e[h],null==k[h]&&(k[h]=c);t=f.getModules();for(h in t)c=t[h],e="function"===typeof c.getAPI?c.getAPI():void 0,k[h]=e||c,c="function"===typeof c.getFeatureName?c.getFeatureName():void 0,null!=c&&(k[c]=k[h]);try{a.amp=k}catch(n){U.error(n)}};c=null!=(null!=b?b.debug:void 0)?b.debug:/debug\=true/.test(location.search.toLowerCase());U.enable(c);!0===c&&null!=(null!=b?b["debugger"]:void 0)?r.loadDebugger(b["debugger"],h):h()};r.prototype.getVersion=function(){return this.constructor.VERSION};
r.prototype.createFlashPlayer=function(a,b,c){return new s(a,b,c)};r.prototype.createHTMLPlayer=function(a,b,c){return new sc(a,b,c)};r.prototype.createExternalPlayer=function(a,b,c){return new Nc(a,b,c)};r.prototype.createInstallPlayer=function(a){return new ng(a)};r.VERSION="AMP Premier - Weather Channel v0.16.0.0006";r.defaults=new Q;r.plugins=[];r.loadDefaults=function(a,b){null==b&&(b=!1);this.defaults.load(a,b)};r.loadDebugger=function(a,b){g.loadAMPScript(a,function(){null!=b&&setTimeout(b,
1E3)})};r.getPlaybackMode=function(){return g.getPlaybackMode()};r.registerPlugin=function(a,b,c){var e;null==(e=this.plugins)[a]&&(e[a]={});this.plugins[a][b]=c};var ae=function(){return ae.__super__.constructor.apply(this,arguments)};f(ae,G);ae.NAME="PlayOverlayWrapper";ae.prototype.createFlashVars=function(a){a.show_play_button_overlay=null!=this.config.enabled?this.config.enabled:!0;return a};r.registerPlugin("playoverlay","flash",ae);var be=function(){be.__super__.constructor.call(this)};f(be,
Y);be.prototype.componentName="play";be.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(P.TOGGLE_PLAY_PAUSE);return!1};var Ab=function(a){Ab.__super__.constructor.call(this,a)};f(Ab,T);Ab.NAME=w.NAME;Ab.prototype.defaults={config:null,dimensions:null,plugin:{js:"http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js"}};Ab.prototype.getLoaded=function(){return null!=window.setAkamaiMediaAnalyticsData};Ab.prototype.initialize=function(){try{window.akamaiSetVideoObject(this.facade.app.getVideo())}catch(a){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",
"Could not set video tag",a)}};Ab.prototype.setDimensions=function(a){var b,c,e;b=this.configurationData.source.dimensions;for(c in a)e=a[c],null!=e&&(b[c]=e);this.configurationData.parse(this.configurationData.source);this.applyDimensions(b);return a};Ab.prototype.applyDimensions=function(a){var b,c;if(null!=window.setAkamaiMediaAnalyticsData)try{for(b in a)c=a[b],setAkamaiMediaAnalyticsData(b,c)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",e)}};Ab.prototype.setMedia=
function(a){var b,c;b=null!=(null!=(c=a.mediaanalytics)?c.dimensions:void 0)?g.override(this.value.dimensions,a.mediaanalytics.dimensions):this.value.dimensions;this.applyDimensions(b);return a};Ab.prototype.udpateMedia=function(a){"function"===typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(a);return a};var Va=function(a,b){Va.__super__.constructor.call(this,a,b)};f(Va,Z);Va.NAME="ControlsPlugin";Va.prototype.moduleName="controls";Va.prototype.initialize=function(){!0===this.config["native"]?
(this.app.getVideo().controls=!0,this.app.sendNotification(d.ADD_APPLICATION_STATE,"controls-native"),this.registerCommand(d.CHANGE_MEDIA,ef),this.registerCommand(m.BREAK_START,cf),this.registerCommand(m.BREAK_END,df),this.createAPI=this.createView=function(){}):Va.__super__.initialize.call(this)};Va.prototype.createController=function(){this.registerCommand(d.PLAY,$e);this.registerCommand(d.PAUSE,af);this.registerCommand(d.ACTIVE_STATE_CHANGE,bf)};Va.prototype.createModel=function(){this.registerProxy(new $(this.config))};
Va.prototype.createAPI=function(){return new fd(this)};Va.prototype.createView=function(){this.registerMediator(new zb)};Va.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in Aa)b=Aa[a],c.push(b);return c.concat([d.MEDIA_CHANGE,d.TIME_UPDATE,d.DURATION_CHANGE,d.PROGRESS,d.ENDED,d.ADD_CUE_POINTS,d.REMOVE_CUE_POINTS,d.DISABLE_FULL_SCREEN,d.ENABLE_FULL_SCREEN,d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.ACTIVE_STATE_CHANGE,d.PLAY,d.PAUSE,m.BREAK_START,
m.BREAK_END,d.CHANGE_MEDIA,d.DISPLAY_TIME])};Va.prototype.listNotificationPublications=function(){return Va.__super__.listNotificationPublications.call(this).concat([d.CHANGE_ACTIVE_STATE,d.TOGGLE_FULL_SCREEN,P.TOGGLE_PLAY_PAUSE,P.SEEK,d.TOGGLE_ACTIVE])};r.registerPlugin("controls","html",Va);r.registerPlugin("controls","flash",Ta);r.registerPlugin("controls","external",Va);var Qb=function(a,b){Qb.__super__.constructor.call(this,a,b)};f(Qb,G);Qb.NAME="MediaAnalyticsWrapper";Qb.prototype.listNotificationInterests=
function(){return Qb.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,"mediaanalytics:setDimensions"])};Qb.prototype.createFlashVars=function(a){var b,c,e,d;b=null!=(e=this.player.config)?null!=(d=e.media)?d.mediaanalytics:void 0:void 0;if(null!=b)for(c in b)e=b[c],a["report_"+c]=e;return a};Qb.prototype.createXML=function(a){var b,c,e,d,h;b=a.getElementsByTagName("application")[0];e=a.getElementsByTagName("metrics")[0];null==e&&(e=a.createElement("metrics"),b.appendChild(e));
b=a.createElement("vendor");b.setAttribute("id","akamai");e.appendChild(b);null!=this.config.config&&(e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_BEACON"),e.appendChild(K.createTextContent(a,this.config.config)),b.appendChild(e),h=(null!=(c=this.config.plugin)?c.swf:void 0)||"http://79423.analytics.edgesuite.net/csma/plugin/csma.swf",e=a.createElement("property"),e.setAttribute("key","MEDIA_ANALYTICS_PLUGIN_PATH"),e.appendChild(K.createTextContent(a,h)),b.appendChild(e));if(null!=
this.config.dimensions)for(d in c=a.createElement("property"),c.setAttribute("key","dimensions"),b.appendChild(c),h=this.config.dimensions,h)b=h[d],e=a.createElement("property"),e.setAttribute("key",d),e.appendChild(K.createTextContent(a,b)),c.appendChild(e);return a};Qb.prototype.handleNotification=function(a){var b,c,e;Qb.__super__.handleNotification.call(this,a);c=a.getName();a=a.getBody();switch(c){case d.MEDIA_CHANGE:if(null!=(null!=(e=a.mediaanalytics)?e.dimensions:void 0))for(b in a.dimensions=
[],e=a.mediaanalytics.dimensions,e)c=e[b],a.dimensions.push({key:b,value:c});break;case "mediaanalytics:setDimensions":this.setDimensions(a)}};Qb.prototype.setDimensions=function(a){this.player.video.setPlayerProperty("maDimensions",a);return a};var J=function(){J.__super__.constructor.call(this)};f(J,puremvc.SimpleCommand);J.prototype.config=null;J.prototype.plugin=null;J.prototype.initializeNotifier=function(a){J.__super__.initializeNotifier.call(this,a);return this.config=this.plugin=this.facade.retrieveProxy(w.NAME)};
var ff=function(){ff.__super__.constructor.call(this)};f(ff,puremvc.SimpleCommand);ff.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakStartCommand");this.facade.app.getVideo().dataset.isad=!0};var gf=function(){gf.__super__.constructor.call(this)};f(gf,puremvc.SimpleCommand);gf.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdBreakEndCommand");this.facade.app.getVideo().dataset.isad=!1};var hf=function(){hf.__super__.constructor.call(this)};f(hf,
puremvc.SimpleCommand);hf.prototype.execute=function(a){var b,c;this.facade.logger.debug("MediaAnalyticsAdLoadedCommand");try{c=a.getBody(),b={adDuration:c.duration,adPartnerId:c.partner,adTitle:c.title,adId:c.id},"function"===typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(b)}catch(e){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",e)}};var jf=function(){jf.__super__.constructor.call(this)};f(jf,J);jf.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdStartCommand");
try{"function"===typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}};var kf=function(){kf.__super__.constructor.call(this)};f(kf,J);kf.prototype.execute=function(a){a=a.getBody();a=Math.round(100*(a.currentTime/a.duration));try{25<=a&&25>this.config.percent?(this.facade.logger.debug("MediaAnalytics: First Quartile"),"function"===typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()):50<=a&&50>this.config.percent?(this.facade.logger.debug("MediaAnalytics: Second Quartile"),
"function"===typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()):75<=a&&75>this.config.percent&&(this.facade.logger.debug("MediaAnalytics: Third Quartile"),"function"===typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile())}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.config.percent=a};var lf=function(){lf.__super__.constructor.call(this)};f(lf,puremvc.SimpleCommand);lf.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsAdEndCommand");
try{"function"===typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted()}catch(b){this.facade.logger.error("[AMP MEDIA ANALYTICS ERROR]",b)}this.facade.app.getVideo().dataset.isad=!0};var mf=function(){mf.__super__.constructor.call(this)};f(mf,J);mf.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsSetDimensionsCommand");a=a.getBody();this.config.setDimensions(a)};var nf=function(){nf.__super__.constructor.call(this)};f(nf,J);nf.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsContentChangedCommand");
this.config.updatedMedia(a.getBody())};var of=function(){of.__super__.constructor.call(this)};f(of,J);of.prototype.execute=function(a){this.facade.logger.debug("MediaAnalyticsChangeMediaCommand");a=a.getBody();this.config.setMedia(a)};var pf=function(a){pf.__super__.constructor.call(this,a);this.setDimensions=function(b){a.retrieveProxy(Ab.NAME).setDimensions(b);return b}};f(pf,yb);pf.prototype.setDimensions=function(a){};var gc=function(a,b){gc.__super__.constructor.call(this,a,b)};f(gc,Z);gc.NAME=
"PlayOverlayPlugin";gc.prototype.moduleName="playoverlay";gc.prototype.createModel=function(){};gc.prototype.createView=function(){this.registerMediator(new be)};gc.prototype.listNotificationPublications=function(){return gc.__super__.listNotificationPublications.call(this).concat([P.TOGGLE_PLAY_PAUSE])};r.registerPlugin("playoverlay","html",gc);r.registerPlugin("playoverlay","external",gc);var ha=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=
e?e:null;ha.__super__.constructor.call(this)};f(ha,xb);ha.prototype.timeout=null;ha.prototype.interval=null;ha.prototype.url=null;ha.prototype.lastModified=null;ha.prototype.contentLenght=null;ha.prototype.data=null;ha.prototype.text=null;ha.prototype.type=null;ha.prototype.headers=null;ha.prototype.useHeadRequest=!0;ha.prototype.xhr=null;ha.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};ha.prototype.poll=function(){var a,b=this;a=g.getXHR();this.useHeadRequest?(a.onload=function(c){var e;
304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=c,b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("Redirectc1f0.html",g.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};ha.prototype.applyHeaders=function(){null!=this.headers&&
this.xhr.setRequestHeaders(this.headers)};ha.prototype.updateData=function(){var a,b=this;a=g.getXHR();a.open("Redirectc1f0.html",g.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=function(a){b.error(a)};this.applyHeaders();return a.send()};ha.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===g.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};ha.prototype.setData=function(a){a!==this.data&&(this.data=
a,this.dispatchEvent(new R("datachanged",this.data)));return a};ha.prototype.error=function(a){U.error(event);this.stop()};ha.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},this.interval)};ha.prototype.stop=function(){clearTimeout(this.timeout)};var vd=function(){return vd.__super__.constructor.apply(this,arguments)};f(vd,G);vd.NAME="EventManagementWrapper";vd.prototype.createFlashVars=function(a){null!=this.config.enabled&&(a.eventmanagementstates_enabled=
this.config.enabled);null!=this.config.url&&(a.eventmanagementstates_status_url=this.config.url);null!=this.config.interval&&(a.eventmanagementstates_status_interval=this.config.interval);return a};vd.prototype.createXML=function(a){var b,c,e,d,h,f,t;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("eventmanagementstates");null==c||0===c.length?(c=a.createElement("eventmanagementstates"),b.appendChild(c)):c=c[0];b=a.createElement("states");c.appendChild(b);t=this.config.states;
h=0;for(f=t.length;h<f;h++)d=t[h],c=a.createElement("state"),b.appendChild(c),e=a.createElement("property"),e.setAttribute("key","ID"),e.appendChild(K.createTextContent(a,d.id)),c.appendChild(e),e=a.createElement("property"),e.setAttribute("key","POSTER_SRC"),e.appendChild(K.createTextContent(a,d.poster)),c.appendChild(e),null!=d.url&&(e=a.createElement("property"),e.setAttribute("key","URL"),e.appendChild(K.createTextContent(a,d.url)),c.appendChild(e));return a};var wc=function(){wc.__super__.constructor.call(this)};
f(wc,Y);wc.prototype.componentName="event-management";wc.prototype.poster=null;wc.prototype.onRegister=function(){this.classList.add("hidden");this.poster=this.create("event-poster",!1,"img");wc.__super__.onRegister.call(this)};wc.prototype.listNotificationInterests=function(){return["eventStateChanged"]};wc.prototype.handleNotification=function(a){switch(a.getName()){case "eventStateChanged":a=a.getBody(),"on"!==a.id?(null!=a.poster&&(this.poster.src=a.poster,this.viewComponent.appendChild(this.poster)),
this.classList.remove("hidden"),this.sendNotification(d.PAUSE),this.sendNotification(d.CHANGE_DISPLAY_STATE,ca.NORMAL)):(this.viewComponent.contains(this.poster)&&this.viewComponent.removeChild(this.poster),this.classList.add("hidden"))}};var qf=function(){qf.__super__.constructor.call(this)};f(qf,puremvc.SimpleCommand);qf.prototype.execute=function(a){var b;this.facade.logger.debug("EventManagementPlayCommand");(null!=(b=this.facade.retrieveProxy(va.NAME).getState())?b.id:void 0)!==va.ON.id&&this.sendNotification(d.PAUSE)};
var va=function(a){var b=this;va.__super__.constructor.call(this,a);this.poller=new ha;this.poller.ondatachanged=function(a){var e,d,h,f;a=a.data;if("on"===a)e=va.ON;else for(f=b.data.states,d=0,h=f.length;d<h&&(e=f[d],e.id!==a);d++);if(null!=e)return b.setState(e)}};f(va,w);va.NAME=w.NAME;va.ON={id:"on"};va.prototype.defaults={url:null,interval:null,states:null,enabled:!1};va.prototype.poller=null;va.prototype.state=null;va.prototype.initialize=function(){!0===this.data.enabled&&(this.setURL(this.data.url),
this.setInterval(this.data.interval),this.poller.start())};va.prototype.setURL=function(a){return this.data.url=this.poller.url=a};va.prototype.getURL=function(){return this.data.url};va.prototype.getInterval=function(){return this.data.interval};va.prototype.setInterval=function(a){this.data.interval=this.poller.interval=1E3*a;return a};va.prototype.setState=function(a){this.state=a;this.sendNotification("eventStateChanged",a);return a};va.prototype.getState=function(){return this.state};var Rb=
function(a,b){Rb.__super__.constructor.call(this,a,b)};f(Rb,Z);Rb.NAME="MediaAnalyticsPlugin";Rb.prototype.moduleName="mediaanalytics";Rb.prototype.createModel=function(){this.registerProxy(new Ab(this.config))};Rb.prototype.createController=function(){this.registerCommand(d.MEDIA_CHANGE,of);this.registerCommand(m.BREAK_START,ff);this.registerCommand(m.BREAK_END,gf);this.registerCommand(m.AD_LOADED,hf);this.registerCommand(m.AD_STARTED,jf);this.registerCommand(m.AD_TIME_UPDATE,kf);this.registerCommand(m.AD_ENDED,
lf);this.registerCommand("mediaanalytics:setDimensions",mf);this.registerCommand(d.CONTENT_CHANGED,nf)};Rb.prototype.createAPI=function(){return new pf(this)};Rb.prototype.onRegister=function(){window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=this.config.config;Rb.__super__.onRegister.call(this)};Rb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE,m.BREAK_START,m.BREAK_END,m.AD_LOADED,m.AD_STARTED,m.AD_TIME_UPDATE,m.AD_ENDED,"mediaanalytics:setDimensions",d.CONTENT_CHANGED]};r.registerPlugin("mediaanalytics",
"html",Rb);r.registerPlugin("mediaanalytics","flash",Qb);var wd=function(){return wd.__super__.constructor.apply(this,arguments)};f(wd,G);wd.NAME="BrandingWrapper";wd.prototype.createFlashVars=function(a){null!=this.config.id&&(a.branding=this.config.id);return a};wd.prototype.createXML=function(a){var b,c,e,d,h,f,t,g;if(null!=(null!=(b=this.config)?b.logo:void 0)){b="background-image: url('"+this.config.logo+"');";d=a.getElementsByTagName("element");t=0;for(g=d.length;t<g;t++)e=d[t],h=e.getAttribute("id"),
"logoOverlay"===h?f=e:"controls"===h&&(c=e);null==f?(f=a.createElement("element"),f.setAttribute("id","logoOverlay"),f.setAttribute("style","width: 150px; height: 53px; right: 15px; top: 15px; opacity: 0.5; "+b),c.appendChild(f)):(c=f.getAttribute("style"),c=-1!==c.indexOf("background-image:")?c.replace(/background-image: [A-Za-z0-9_\-\.\/\\;\(\)"']+/,b):b+c,f.setAttribute("style",c))}return a};var Sb=function(){Sb.__super__.constructor.call(this)};f(Sb,Y);Sb.prototype.componentName="branding";Sb.prototype.logo=
null;Sb.prototype.text=null;Sb.prototype.container=null;Sb.prototype.onRegister=function(){this.container=this.create("branding-container");this.logo=this.create(["branding-image","hidden"],this.container,"img");this.text=this.create("branding-text",this.container);Sb.__super__.onRegister.call(this)};Sb.prototype.listNotificationInterests=function(){return[d.READY]};Sb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:a=a.getBody().branding;if(null==a)break;null!=a.logo?(this.logo.src=
a.logo,this.classList.remove("hidden",this.logo)):this.classList.add("hidden",this.logo);a=this.config.getDomain();null!=a&&0!==a.indexOf("http")&&(a=location.protocol+"//"+a,this.text.innerHTML='\x3cspan\x3eView all \x3ca href\x3d"'+a+'" target\x3d"'+this.config.getTarget()+'"\x3e'+this.config.getDomain()+"\x3c/a\x3e videos.")}};var Wa=function(a){Wa.__super__.constructor.call(this,a)};f(Wa,w);Wa.NAME=w.NAME;Wa.prototype.defaults={id:null,title:null,link:null,logo:null,target:null};Wa.prototype.getID=
function(){return this.data.id};Wa.prototype.setID=function(a){return this.data.id=a};Wa.prototype.getTarget=function(){return this.data.target};Wa.prototype.setTarget=function(a){return this.data.target=a};Wa.prototype.getTitle=function(){return this.data.title};Wa.prototype.setTitle=function(a){return this.data.title=a};Wa.prototype.getLink=function(){return this.data.link};Wa.prototype.setLink=function(a){return this.data.link=a};Wa.prototype.getLogo=function(){return this.data.logo};Wa.prototype.setLogo=
function(a){return this.data.logo=a};var Ka={LOAD_FEED:"loadFeed",FEED_CHANGED:"feedChanged",FEED_LOADED:"feedLoaded"},Bb=function(a,b){Bb.__super__.constructor.call(this,a,b)};f(Bb,Z);Bb.NAME="EventManagementPlugin";Bb.prototype.moduleName="eventmanagement";Bb.prototype.createModel=function(){this.registerProxy(new va(this.config))};Bb.prototype.createController=function(){this.registerCommand(d.PLAY,qf)};Bb.prototype.createView=function(){this.registerMediator(new wc)};Bb.prototype.listNotificationInterests=
function(){return[d.PLAY]};Bb.prototype.listNotificationPublications=function(){return Bb.__super__.listNotificationPublications.call(this).concat([d.CHANGE_DISPLAY_STATE,d.PAUSE,"eventStateChanged"])};Bb.prototype.listNotificationEvents=function(){return["eventStateChanged"]};r.registerPlugin("eventmanagement","html",Bb);r.registerPlugin("eventmanagement","flash",vd);var La=function(a){La.__super__.constructor.call(this,a);this.helper=new vc};f(La,w);La.NAME=w.NAME;La.prototype.defaults={url:null,
data:null};La.prototype.feed=null;La.prototype.helper=null;La.prototype.setURL=function(a){var b=this;this.data.url=a;this.helper.getFeed(a,function(a){b.sendNotification(Ka.CHANGE_FEED,a)},function(b){U.error("[AMP Feed Load Error]",a,b)});return a};La.prototype.getURL=function(){return this.data.url};La.prototype.setFeedData=function(a){this.data.data=a;this.feed=this.helper.createFeed(a);this.sendNotification(Ka.FEED_CHANGED,this.feed);this.sendNotification(d.DISPATCH_EVENT,new R("loaded",a));
return a};La.prototype.getFeedData=function(){return this.data.data};La.prototype.invoke=function(){null!=this.data.url&&""!==this.data.url?this.sendNotification(Ka.LOAD_FEED,this.data.url):null!=this.data.data&&this.sendNotification(Ka.CHANGE_FEED,this.data.data)};var rf=function(){rf.__super__.constructor.call(this)};f(rf,puremvc.SimpleCommand);rf.prototype.execute=function(a){this.facade.logger.debug("LoadFeedCommand",a.getBody());this.facade.retrieveProxy(La.NAME).setURL(a.getBody())};var sf=
function(){sf.__super__.constructor.call(this)};f(sf,puremvc.SimpleCommand);sf.prototype.execute=function(a){this.facade.logger.debug("ChangeFeedCommand",a.getBody());this.facade.retrieveProxy(La.NAME).setFeedData(a.getBody())};var tf=function(){tf.__super__.constructor.call(this)};f(tf,puremvc.SimpleCommand);tf.prototype.execute=function(a){this.facade.logger.debug("FeedChangedCommand",a.getBody());this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.READY);a=a.getBody().item[0];this.facade.app.sendNotification(d.SET_MEDIA,
a)};var uf=function(){uf.__super__.constructor.call(this)};f(uf,puremvc.SimpleCommand);uf.prototype.execute=function(a){this.facade.logger.debug("FeedInitializedCommand");this.facade.retrieveProxy(La.NAME).invoke()};var gd=function(a){var b;gd.__super__.constructor.call(this,a);b=a.retrieveProxy(La.NAME);this.setURL=function(b){a.sendNotification(Ka.LOAD_FEED,b);return b};this.getURL=b.getURL.bind(b);this.setData=function(b){a.sendNotification(Ka.CHANGE_FEED,b);return b};this.getData=b.getFeedData.bind(b)};
f(gd,yb);gd.prototype.setURL=function(a){};gd.prototype.getURL=function(){};gd.prototype.setData=function(a){};gd.prototype.getData=function(){};var Ma=function(a,b){null==b&&(b={});Ma.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.data&&(this.data=b.data);this.player.load=function(){}};f(Ma,G);Ma.NAME="FeedWrapper";Ma.prototype.url=null;Ma.prototype.data=null;Ma.prototype.updateData=!0;Ma.prototype.createFlashVars=function(a){null!=this.url&&""!==this.url&&(a.data_feed_url=
escape(this.url))};Ma.prototype.listNotificationInterests=function(){return Ma.__super__.listNotificationInterests.apply(this,arguments).concat([p.READY,p.FEED_LOADED])};Ma.prototype.handleNotification=function(a){var b,c,e,d,h=this;Ma.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.FEED_LOADED:!1===this.updateData?this.updateData=!0:this.data=JSON.parse(a);c="loaded";a=this.data;b=new vc;b=null!=(e=b.createFeed(this.data))?null!=(d=e.item)?d[0]:void 0:void 0;
null!=b&&this.player.mediaProxy.setData(b);this.sendNotification(Ka.FEED_CHANGED,this.data);break;case p.READY:null!=this.data?setTimeout(function(){h.setData(h.data)},25):null!=this.url&&""!==this.url&&this.sendNotification(Ka.LOAD_FEED,this.url)}null!=c&&this.dispatchEvent(new R(c,a))};Ma.prototype.setURL=function(a){null!=a&&""!==a&&(this.url=a,this.player.video.playFile(this.url,this.player.getAutoplay()),this.sendNotification(Ka.LOAD_FEED,this.url));return a};Ma.prototype.getURL=function(){return this.url};
Ma.prototype.setData=function(a){this.data=a;this.updateData=!1;this.player.video.playFile(this.data,this.player.getAutoplay());return a};Ma.prototype.getData=function(){return this.data};var Tb=function(a,b){Tb.__super__.constructor.call(this,a,b)};f(Tb,Z);Tb.NAME="BrandingPlugin";Tb.prototype.moduleName="branding";Tb.prototype.createModel=function(){this.registerProxy(new Wa(this.config))};Tb.prototype.createView=function(){this.registerMediator(new Sb)};Tb.prototype.onRegister=function(){null!=
this.config.id&&this.sendNotification(d.ADD_APPLICATION_STATE,"branding-"+this.config.id);Tb.__super__.onRegister.call(this)};Tb.prototype.listNotificationInterests=function(){return[d.READY]};r.registerPlugin("branding","html",Tb);r.registerPlugin("branding","flash",wd);r.registerPlugin("branding","external",Tb);var Xa=function(a,b){Xa.__super__.constructor.call(this,a,b)};f(Xa,Z);Xa.NAME="Feature";Xa.prototype.featureName=null;Xa.prototype.getFeatureName=function(){return this.featureName};Xa.prototype.registerFeature=
function(){null!=this.getFeatureName()&&this.app.sendNotification("registerfeature",this)};Xa.prototype.onRegister=function(){this.registerFeature();Xa.__super__.onRegister.call(this)};Xa.prototype.listNotificationPublications=function(){return Xa.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};var lb=function(a,b){lb.__super__.constructor.call(this,a,b)};f(lb,Z);lb.NAME="FeedPlugin";lb.prototype.moduleName="feed";lb.prototype.createModel=function(){this.registerProxy(new La(this.config))};
lb.prototype.createController=function(){lb.__super__.createController.call(this);this.registerCommand(d.READY,uf);this.registerCommand(Ka.LOAD_FEED,rf);this.registerCommand(Ka.CHANGE_FEED,sf);this.registerCommand(Ka.FEED_CHANGED,tf)};lb.prototype.createAPI=function(){return new gd(this)};lb.prototype.listNotificationInterests=function(){return lb.__super__.listNotificationInterests.call(this).concat([d.READY])};lb.prototype.listNotificationPublications=function(){var a,b;return lb.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in Ka)b=Ka[a],c.push(b);return c}())};r.registerPlugin("feed","html",lb);r.registerPlugin("feed","flash",Ma);var hd=function(a){hd.__super__.constructor.call(this,a)};f(hd,ad);hd.prototype.getType=function(a){return hd.__super__.getType.call(this,a.replace(/^ads/,""))};hd.prototype.getMessage=function(a){if("timeupdate"!==a.type&&"timeremaining"!==a.type)return hd.__super__.getMessage.call(this,a)};var wa=function(){wa.__super__.constructor.call(this)};f(wa,Y);wa.prototype.duration=null;
wa.prototype.currentTime=null;wa.prototype.container=null;wa.prototype.banner=null;wa.prototype.text=null;wa.prototype.adText=null;wa.prototype.bg=null;wa.prototype.totalAds=null;wa.prototype.adPosition=null;wa.prototype.adContainerRequired=!0;wa.prototype.componentName="ads";wa.prototype.onRegister=function(){this.adContainerRequired&&(this.container=this.create("ad-container"));this.banner=this.create("ad-banner");this.bg=this.create("ad-text-bg",this.banner);this.adText=this.create("ad-text-title",
this.banner);this.text=this.create("ad-text",this.banner);this.adContainerRequired&&(this.viewComponent.container=this.container);wa.__super__.onRegister.call(this);this.sendNotification(m.AD_CONTAINER_CREATED,this.viewComponent);this.facade.setViewComponent(this.viewComponent)};wa.prototype.listNotificationInterests=function(){return[m.BREAK_START,m.BREAK_END,m.AD_TIME_REMAINING,m.AD_STARTED]};wa.prototype.handleNotification=function(a){var b;switch(a.getName()){case m.BREAK_END:this.text.textContent=
"";this.adText.textContent="";break;case m.AD_TIME_REMAINING:a=a.getBody();b=null!=this.totalAds&&0<this.totalAds&&null!=this.adPosition&&this.adPosition!==this.totalAds?0<a?""+this.localizationManager.getString(v.MSG_NEXT_AD)+g.formatTimecode(a):"":0<a?""+this.localizationManager.getString(v.MSG_NEXT_VIDEO)+g.formatTimecode(a):"";this.text.textContent=b;this.facade.retrieveProxy(w.NAME);break;case m.AD_STARTED:a=a.getBody(),this.totalAds=a.totalAds,this.adPosition=a.position,b="Ad "+a.position+" of "+
a.totalAds,null!=a.position&&null!=a.totalAds&&0!==a.position&&(this.adText.textContent=b)}};var vf=function(){vf.__super__.constructor.call(this)};f(vf,za);vf.prototype.execute=function(a){this.facade.logger.debug("AdMediaChangeCommand");!1!==this.ads.getEnabled()&&(a=a.getBody(),this.ads.engage(a))};var wf=function(){wf.__super__.constructor.call(this)};f(wf,za);wf.prototype.execute=function(a){this.facade.logger.debug("AdLoadedCommand");this.sendNotification(d.UPDATE_DATA_BINDINGS,{contexts:[this.ads.getContextName()]})};
var xf=function(){xf.__super__.constructor.call(this)};f(xf,za);xf.prototype.execute=function(a){this.facade.logger.debug("AdBreakStartCommand");this.facade.app.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");"desktop"!==this.applicationState.getDevice()&&this.facade.app.sendNotification(d.DISABLE_FULL_SCREEN);this.ads.breakStart()};var yf=function(){yf.__super__.constructor.call(this)};f(yf,za);yf.prototype.execute=function(a){this.facade.logger.debug("AdBreakEndCommand");this.ads.breakEnd();
this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");"desktop"!==this.applicationState.getDevice()&&this.facade.app.sendNotification(d.ENABLE_FULL_SCREEN)};var ce=function(){ce.__super__.constructor.call(this)};f(ce,za);ce.prototype.execute=function(a){this.facade.logger.debug("AdSeekCommand");this.ads.contentSeek(a.getBody())};var Na=function(a,b,c,e,d,h,f,g,k,n,m){this.id=a;this.title=b;this.duration=c;this.position=e;this.type=d;this.partner=h;this.advertiser=f;this.companions=
g;this.request=k;this.metadata=n;this.totalAds=m};Na.prototype.id=null;Na.prototype.title=null;Na.prototype.duration=NaN;Na.prototype.position=NaN;Na.prototype.totalAds=NaN;Na.prototype.type=null;Na.prototype.partner=null;Na.prototype.advertiser=null;Na.prototype.companions=null;Na.prototype.metadata=null;Na.prototype.request=null;Na.prototype.error=null;var hc=function(a){tb.attachModuleDispatcher(a,new hd(this));this.getConfig=function(){return plugin.getConfig()};a=a.retrieveProxy(B.NAME);this.setEnabled=
a.setEnabled.bind(a);this.getEnabled=a.getEnabled.bind(a);this.getInProgress=a.getInProgress.bind(a);this.getStarted=a.getStarted.bind(a);this.getPaused=a.getPaused.bind(a);this.getCompanions=a.getCompanions.bind(a);this.terminateAd=a.terminateAd.bind(a);this.terminateAllAds=a.terminateAllAds.bind(a)};f(hc,yb);hc.prototype.setEnabled=function(a){};hc.prototype.getEnabled=function(){};hc.prototype.getInProgress=function(){};hc.prototype.getStarted=function(){};hc.prototype.getPaused=function(){};hc.prototype.getCompanions=
function(){};hc.prototype.terminateAd=function(){};hc.prototype.terminateAllAds=function(){};var ia=function(a){ia.__super__.constructor.call(this,a)};f(ia,B);ia.NAME=B.NAME;ia.prototype.defaults={plugin:null,videoId:null,defaultId:null,domain:null,zoneId:null,companion:null,userData:null,params:null};ia.prototype.key="auditude";ia.prototype.session=null;ia.prototype.options=null;ia.prototype.initialize=function(){var a=this;this.options={controls:!1,auditudeHandlesChapterBreaks:!1,style:{backgroundColor:"#000",
width:this.facade.app.video.clientWidth,height:this.facade.app.video.clientHeight},handlers:{play:function(){a.facade.logger.debug("ad play")},timeupdate:function(b,e,d){a.facade.sendNotification(m.AD_TIME_REMAINING,d.duration-d.currentTime)},error:function(b){a.facade.logger.debug("ad error:",b);a.error()},pause:function(){a.facade.logger.debug("ad pause")},loadedmetadata:function(b,e,d){a.facade.logger.debug("ad loadedmetadata")},end:function(){a.facade.logger.debug("ad end")}}};try{this.plugin=
this.createPlugin(),this.plugin.subscribe(aud.events.init_complete,function(b,e){a.facade.logger.debug("init_complete:",b,e);try{a.plugin.publish(aud.notifications.break_begin)}catch(d){a.error(d)}}),this.plugin.subscribe(aud.events.init_failed,function(b,e){a.error(b)}),this.plugin.subscribe(aud.events.break_begin,function(b,e){a.facade.logger.debug("break_begin:",b,e);a.sendNotification(m.BREAK_START)}),this.plugin.subscribe(aud.events.pause_playback,function(b,e){a.facade.logger.debug("pause_playback: "+
b+", "+e);a.contentPause(b,e)}),this.plugin.subscribe(aud.events.resume_playback,function(b,e){a.facade.logger.debug("resume_playback: ",b,e);a.contentPlay(b,e)}),this.plugin.subscribe(aud.events.linear_ad_begin,function(b,e,l){var h,f;a.facade.logger.debug("linear ad begin:",b,e,l);b=e._xmlDoc.querySelector("ad[id]");null!=b&&(h=b.getAttribute("id"));b=e._xmlDoc.querySelector("inLine[adTitle]");null!=b&&(f=b.getAttribute("adTitle"));a.adVO=new Na(h,f,l.asset.duration,1,"preroll","auditude",null,
l.banners,null,l);a.sendNotification(m.AD_LOADED,a.adVO);a.sendNotification(m.AD_DURATION_CHANGE,a.adVO);a.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING);a.sendNotification(m.AD_PLAY);a.setInProgress(!0);a.setCompanions(l.banners);a.session=l.session;a.sendNotification(m.AD_STARTED)}),this.plugin.subscribe(aud.events.linear_ad_end,function(b,e,d){a.facade.logger.debug("linear ad end:",b,e,d);a.sendNotification(m.AD_ENDED)}),this.plugin.subscribe(aud.events.break_end,function(b,e){a.facade.logger.debug("break_end:",
b,e);a.sendNotification(m.BREAK_END)}),this.plugin.subscribe(aud.events.non_linear_ad_begin,function(b,e,d){a.facade.logger.debug("non linear ad begin");a.setCompanions(d.banners)}),this.plugin.subscribe(aud.events.non_linear_ad_end,function(b,e,d){a.facade.logger.debug("non linear ad end")})}catch(b){this.error(b)}};ia.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.container.container,null,this.value.domain,this.value.zoneId,this.options)};ia.prototype.start=function(){var a,
b,c,e,d,h,f;if(!1===ia.__super__.start.call(this))return!1;try{e=this.value.params||{};d="";if(null!=this.value.userData)for(c in f=this.value.userData,f)h=f[c],d+=""+c+"\x3d"+h+";";null!=e.userData&&(d+=e.userData);""!==d&&(e.userData=d);b=this.value.videoId+"";null!=this.value.defaultId&&(a=this.value.defaultId+"",b=null!=b?[b,a]:a);this.facade.logger.log("Auditude init: ",b,e);this.plugin.init(b,e)}catch(g){this.error(g)}};ia.prototype.play=function(){ia.__super__.play.call(this);this.session.notifyResume()};
ia.prototype.pause=function(){ia.__super__.pause.call(this);this.session.notifyPause()};ia.prototype.breakStart=function(){};ia.prototype.setCompanions=function(a){var b,c,e,d,h;if(!(null==a||1>a.length)){c=[];e=0;for(d=a.length;e<d;e++)b=a[e],c.push({data:b.data,type:b.resourceType,width:parseInt(b.width),height:parseInt(b.height),metadata:b});ia.__super__.setCompanions.call(this,c);if(null!=this.value.companion&&(c=this.value.companion,e=document.getElementById(c.id),null!=e))for(d=0,h=a.length;d<
h;d++)if(b=a[d],c.width===parseInt(b.width)&&c.height===parseInt(b.height)){e.innerHTML=b.data;break}}};ia.prototype.contentStarted=function(){this.plugin.publish(aud.notifications.video_playback_started)};ia.prototype.contentEnded=function(){this.plugin.publish(aud.notifications.video_playback_complete)};var bb=function(a){bb.__super__.constructor.call(this,a)};f(bb,ia);bb.NAME=ia.NAME;bb.prototype.createPlugin=function(){return aud.html5.AdPlayer(this.facade.app.video,null,this.value.domain,this.value.zoneId,
this.options)};bb.prototype.engage=function(a){bb.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["ended"])};bb.prototype.reset=function(a){bb.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,["ended"])};bb.prototype.play=function(){bb.__super__.play.call(this);this.facade.app.video.play()};bb.prototype.pause=function(){bb.__super__.pause.call(this);this.facade.app.video.pause()};bb.prototype.contentPause=function(){this.facade.app.video.pause()};
var V=function(a,b){V.__super__.constructor.call(this,a,b)};f(V,G);V.NAME="AdWrapper";V.prototype.enabled=!0;V.prototype.paused=!1;V.prototype.started=!1;V.prototype.adVO=null;V.prototype.getFeatureName=function(){return"ads"};V.prototype.getInProgress=function(){return this.player.video.getPlayerProperty("adInProgress")};V.prototype.getStarted=function(){return this.started};V.prototype.getPaused=function(){return this.paused};V.prototype.getCompanions=function(){var a;return null!=(a=this.adVO)?
a.companions:void 0};V.prototype.setEnabled=function(a){this.enabled=a;this.player.video.setPlayerProperty("adsEnabled",a);return a};V.prototype.getEnabled=function(){return this.enabled};V.prototype.enable=function(){this.setEnabled(!0)};V.prototype.disable=function(){this.setEnabled(!1)};V.prototype.createFlashVars=function(a){a.core_ads_enabled=!0;return a};V.prototype.listNotificationInterests=function(){var a,b;return V.__super__.listNotificationInterests.call(this).concat(function(){var c;c=
[];for(a in ea)b=ea[a],c.push(b);return c}())};V.prototype.handleNotification=function(a){var b,c,e;V.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();this.adVO=this.createAdVO(a);c=this;switch(b){case ea.BREAK_START:e="breakstart";break;case ea.BREAK_END:e="breakend";break;case ea.AD_LOADED:case ea.AD_MEDIA_LOADED:e="loaded";this.start=!1;break;case ea.AD_STARTED:e="started";this.started=!0;this.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");break;case ea.AD_TIME_UPDATE:case ea.AD_TIME_REMAINING:e=
"timeupdate";break;case ea.AD_ERROR:case ea.AD_PLAYBACK_FAILED:e="error";this.start=!1;this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case ea.AD_ENDED:case ea.AD_PLAYBACK_TERMINATED:e="ended";this.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-mode");break;case ea.AD_CLICKED:e="clicked";break;case ea.AD_COMPANION:e="companion";null!=this.adVO&&null!=a&&(this.adVO.companions=a);break;case ea.AD_PAUSE:e="pause";c=this.player.getAPI();this.paused=!0;this.player.setPlayState("paused");
break;case ea.AD_PLAY:e="playing";c=this.player.getAPI();this.paused=!0;this.player.setPlayState("playing");c.dispatchEvent(new R("play",a));break;case ea.AD_LOG:e="log";break;case ea.AD_FIRST_QUARTILE:e="firstquartile";break;case ea.AD_MIDPOINT:e="midpoint";break;case ea.AD_THIRD_QUARTILE:e="thirdquartile";break;case ea.AD_REQUEST:e="request"}null!=e&&c.dispatchEvent(new R(e,this.adVO))};V.prototype.createAdVO=function(a){return null==a?null:new Na(a.id,a.title,a.duration,a.podIndex,a.podPosition,
a.adPlatform,null,null,a.requestURL,a)};V.prototype.terminateAd=function(){this.player.video.terminateAd()};V.prototype.terminateAllAds=function(){this.player.video.terminateAllAds()};var xd=function(){return xd.__super__.constructor.apply(this,arguments)};f(xd,V);xd.NAME="AuditudeWrapper";xd.prototype.createFlashVars=function(a){null!=this.config.companion&&(a.ad_partner_companion_size=""+this.config.companion.width+"x"+this.config.companion.height);return a};xd.prototype.createXML=function(a){var b,
c,e,d,h,f,g;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","auditude");b.appendChild(c);e=[{value:this.config.domain,key:"AUDITUDE_DOMAIN"},{value:this.config.videoId,key:"AUDITUDE_MEDIA_ID"},{value:this.config.defaultId,key:"AUDITUDE_DEFAULT_MEDIA_ID"},{value:this.config.zoneId,key:"AUDITUDE_ZONE_ID"},{value:this.config.prerollId,key:"AUDITUDE_PREROLL_MEDIA_ID"},
{value:this.config.midrollId,key:"AUDITUDE_MIDROLL_MEDIA_ID"},{value:this.config.audienceManagerURL,key:"AUDITUDE_AUDIENCE_MGR_URL"},{value:this.config.version,key:"AUDITUDE_VERSION"}];d=0;for(h=e.length;d<h;d++)b=e[d],null!=b.value&&this.createProperty(a,b.key,b.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);if(null!=this.config.companions){e=[];d=[];g=this.config.companions;h=0;for(f=g.length;h<f;h++)b=g[h],e.push(b.width+"x"+b.height),d.push(b.id);this.createProperty(a,
"AUDITUDE_COMPANION_SIZE",e.join(","),c);this.createProperty(a,"AUDITUDE_COMPANION_ID",e.join(","),c)}null!=this.config.params&&this.createProperty(a,"AUDITUDE_PARAMS",this.config.params,c);null!=this.config.userData&&this.createProperty(a,"AUDITUDE_USER_DATA",this.config.userData,c);return a};var ka=function(a,b){ka.__super__.constructor.call(this,a,b)};f(ka,Xa);ka.NAME="AdPlugin";ka.prototype.container=null;ka.prototype.featureName="ads";ka.prototype.createModel=function(){this.isFullscreenDevice()?
this.registerProxy(this.createFullscreenProxy()):this.registerProxy(this.createProxy())};ka.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,vf);this.registerCommand(m.BREAK_START,xf);this.registerCommand(m.AD_LOADED,wf);this.registerCommand(m.BREAK_END,yf);this.registerCommand(d.SEEK,ce);this.registerCommand(P.SEEK,ce)};ka.prototype.createView=function(){return this.registerMediator(new wa)};ka.prototype.createAPI=function(){return new hc(this)};ka.prototype.isFullscreenDevice=
function(){return g.isFullscreenDevice()};ka.prototype.createProxy=function(){};ka.prototype.createFullscreenProxy=function(){};ka.prototype.registered=function(){ka.__super__.registered.call(this);this.app.retrieveProxy(da.NAME).registerContext(this.retrieveProxy(B.NAME))};ka.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.PLAY,d.PAUSE,d.START,d.STARTED,d.ENDED,d.READY,d.SEEK,d.VOLUME_CHANGE,d.FULL_SCREEN_CHANGE,P.PLAY,P.PAUSE,P.SEEK,P.TOGGLE_PLAY_PAUSE]};ka.prototype.listNotificationPublications=
function(){var a,b;return ka.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in m)b=m[a],c.push(b);return c}()).concat([d.PLAY_REQUEST,d.UPDATE_DATA_BINDINGS,d.DISPLAY_TIME,d.ADD_CUE_POINTS,d.DISABLE_FULL_SCREEN])};ka.prototype.listNotificationEvents=function(){var a,b;return ka.__super__.listNotificationEvents.call(this).concat(function(){var c;c=[];for(a in m)b=m[a],c.push(b);return c}())};var Cb={TIME_UPDATE:"autoadvancetimeupdate",START:"autoadvancestart",
STOP:"autoadvancestop",ADVANCE:"autoadvanceadvance"},Db=function(a,b){null==b&&(b={});Db.__super__.constructor.call(this,a,b);null!=b.interval&&(this.interval=b.interval);null!=b.handler&&(this.handler=b.handler)};f(Db,G);Db.NAME="AutoAdvanceWrapper";Db.prototype.interval=null;Db.prototype.handler=null;Db.prototype.getInterval=function(){return this.interval};Db.prototype.setInterval=function(a){return this.interval=a};Db.prototype.getHandler=function(){return this.handler};Db.prototype.setHandler=
function(a){return this.handler=a};Db.prototype.listNotificationInterests=function(){return[p.CREATE_FLASH_VARS,p.AUTO_ADVANCE]};Db.prototype.handleNotification=function(a){var b,c,e;b=a.getName();a=a.getBody();switch(b){case p.CREATE_FLASH_VARS:b=a.flashvars;null!=this.interval&&(b.next_video_timer=this.interval,b.auto_play_list=!0);break;case p.AUTO_ADVANCE:"function"===typeof(e=this.config).handler&&e.handler(),c="advance"}null!=c&&this.dispatchEvent(new R(c))};var cb=function(a){cb.__super__.constructor.call(this,
a)};f(cb,w);cb.NAME=w.NAME;cb.prototype.defaults={interval:15,handler:null};cb.prototype.currentTime=0;cb.prototype.timeout=null;cb.prototype.start=function(){var a=this;this.currentTime=this.data.interval;this.timeout=setInterval(function(){a.updateTime()},1E3);this.sendNotification(Cb.TIME_UPDATE,this.currentTime)};cb.prototype.stop=function(){clearInterval(this.timeout)};cb.prototype.updateTime=function(){this.currentTime--;this.sendNotification(Cb.TIME_UPDATE,this.currentTime);0>=this.currentTime&&
(this.stop(),this.sendNotification(Cb.ADVANCE,this.data.handler))};var zf=function(){zf.__super__.constructor.call(this)};f(zf,puremvc.SimpleCommand);zf.prototype.execute=function(a){this.sendNotification(d.ADD_APPLICATION_STATE,"autoadvance-mode");this.facade.retrieveProxy(cb.NAME).start()};var Af=function(){Af.__super__.constructor.call(this)};f(Af,puremvc.SimpleCommand);Af.prototype.execute=function(a){this.facade.retrieveProxy(cb.NAME);a=a.getBody();null!=a&&("string"===typeof a?eval(""+a+"()"):
"function"===typeof a&&a());this.sendNotification(d.REMOVE_APPLICATION_STATE,"autoadvance-mode")};var Bf=function(){Bf.__super__.constructor.call(this)};f(Bf,puremvc.SimpleCommand);Bf.prototype.execute=function(a){null!=this.facade.retrieveProxy(cb.NAME).getData().interval&&this.sendNotification(Cb.START)};var id=function(){id.__super__.constructor.call(this)};f(id,puremvc.SimpleCommand);id.prototype.execute=function(a){this.facade.retrieveProxy(cb.NAME).stop()};var ic=function(a,b,c,e,d,h,f,g,k){this.guid=
a;this.link=b;this.title=c;this.description=e;this.thumbnail=d;this.duration=h;this.pubDate=f;this.target=g;this.metadata=null!=k?k:{}};ic.prototype.guid=null;ic.prototype.link=null;ic.prototype.title=null;ic.prototype.description=null;ic.prototype.thumbnail=null;ic.prototype.duration=null;ic.prototype.pubDate=null;ic.prototype.target=null;ic.prototype.metadata=null;var Eb={RECOMMENDATIONS_LOADED:"recommendationsloaded",RECOMMENDATION_SELECTED:"recommendationsselected"},xc=function(){xc.__super__.constructor.call(this)};
f(xc,Y);xc.prototype.componentName="autoadvance";xc.prototype.text=null;xc.prototype.onRegister=function(){this.text=this.create("autoadvance-text");xc.__super__.onRegister.call(this)};xc.prototype.listNotificationInterests=function(){return[Cb.TIME_UPDATE]};xc.prototype.handleNotification=function(a){switch(a.getName()){case Cb.TIME_UPDATE:a=a.getBody(),this.text.textContent=""+this.localizationManager.getString("MSG_NEXT_VIDEO")+" "+a+" "+this.localizationManager.getString("MSG_SECONDS")}};var sa=
function(a,b){null==b&&(b={});sa.__super__.constructor.call(this,a,b);null!=b.url&&(this.url=b.url);null!=b.target&&(this.target=b.target)};f(sa,G);sa.NAME="RecommendationsWrapper";sa.prototype.url=null;sa.prototype.target=null;sa.prototype.recommendations=null;sa.prototype.getFeatureName=function(){return"recommendations"};sa.prototype.getData=function(){return this.recommendations};sa.prototype.setData=function(a){return this.recommendations=a};sa.prototype.getTarget=function(){var a,b;return this.target||
(null!=(a=this.player)?null!=(b=a.config)?b.target:void 0:void 0)};sa.prototype.getURL=function(){return this.url};sa.prototype.createFlashVars=function(a){a.recommendations_partner="mrss";null!=this.config.target&&(a.external_target=this.config.target)};sa.prototype.createXML=function(a){var b,c;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("recommendations")[0];null==c&&(c=a.createElement("recommendations"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id",
"mrss");c.appendChild(b);this.createProperty(a,"RECOMMENDATIONS_MRSS_URL",this.url,b)};sa.prototype.listNotificationInterests=function(){return sa.__super__.listNotificationInterests.apply(this,arguments).concat([p.RECOMMENDATION_SELECTED,p.RECOMMENDATIONS_LOADED])};sa.prototype.handleNotification=function(a){var b,c;sa.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.RECOMMENDATIONS_LOADED:c="loaded";this.recommendations=a;break;case p.RECOMMENDATION_SELECTED:c=
"selected"}null!=c&&this.dispatchEvent(new R(c,a))};var jc=function(){jc.__super__.constructor.call(this)};f(jc,Y);jc.prototype.componentName="recommendations";jc.prototype.listArea=null;jc.prototype.onRegister=function(){this.createText("recommendations-label","Recommended");this.listArea=this.create("recommendations-list-area");jc.__super__.onRegister.call(this)};jc.prototype.listNotificationInterests=function(){return[Eb.RECOMMENDATIONS_LOADED]};jc.prototype.handleNotification=function(a){var b,
c,e;switch(a.getName()){case Eb.RECOMMENDATIONS_LOADED:if(this.listArea.innerHTML="",b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a)}};jc.prototype.addElement=function(a){var b,c=this;b=this.create("recommendation",this.listArea);null==b.dataset&&(b.dataset={});b.dataset.link=a.link;b.dataset.target=a.target;b.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+"recommendation-thumbnail' /\x3e \x3cspan class\x3d'"+this.cssPrefix+"recommendation-text'\x3e"+
a.description+"\x3c/span\x3e";b.onclick=function(a){a.stopImmediatePropagation();c.sendNotification(Eb.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1}};var Cf=function(){Cf.__super__.constructor.call(this)};f(Cf,puremvc.SimpleCommand);Cf.prototype.execute=function(a){this.facade.retrieveProxy(la.NAME);a=a.getBody();this.facade.logger.debug("Recommendation Selected: ",a);"none"!==a.target&&"player"!==a.target&&window.open(a.link,a.target)};var Df=function(){Df.__super__.constructor.call(this)};
f(Df,puremvc.SimpleCommand);Df.prototype.execute=function(a){this.facade.retrieveProxy(la.NAME).invoke()};var Ef=function(){Ef.__super__.constructor.call(this)};f(Ef,puremvc.SimpleCommand);Ef.prototype.execute=function(a){var b;b=this.facade.retrieveProxy(la.NAME).getRecommendations();a=a.getBody();a.newState===I.ENDED?0<(null!=b?b.length:void 0)&&this.facade.sendNotification(d.ADD_APPLICATION_STATE,"recommendations-mode"):a.oldState===I.ENDED&&0<(null!=b?b.length:void 0)&&this.facade.sendNotification(d.REMOVE_APPLICATION_STATE,
"recommendations-mode")};var la=function(a){la.__super__.constructor.call(this,a);this.helper=new vc};f(la,T);la.NAME=w.NAME;la.prototype.defaults={url:null,target:"_blank"};la.prototype.loaded=!0;la.prototype.recommendations=null;la.prototype.helper=null;la.prototype.getRecommendations=function(){return this.recommendations};la.prototype.setRecommendations=function(a){this.recommendations=a;this.sendNotification(Eb.RECOMMENDATIONS_LOADED,this.recommendations);return a};la.prototype.getURL=function(){return this.getConfigurationData().url};
la.prototype.setURL=function(a){this.data.url=a;this.invoke();return a};la.prototype.getTarget=function(){return this.getConfigurationData().target||this.facade.app.retrieveProxy(H.NAME).getTarget()};la.prototype.setTarget=function(a){return this.data.target=a};la.prototype.invoke=function(){var a;a=this.getURL();null==a||""===a?this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error: No url provided"):g.getJson(a,this.onload.bind(this),this.onerror.bind(this))};la.prototype.onload=function(a){a=
this.createRecommendations(a);this.setRecommendations(a)};la.prototype.onerror=function(a){this.facade.logger.error("[AMP RECOMMENDATIONS ERROR]","Load Error:",a)};la.prototype.createRecommendations=function(a){var b,c,e,d;a=this.helper.createFeed(a);c=[];d=a.item;a=0;for(e=d.length;a<e;a++)b=d[a],b=new ic(b.guid,b.link,b.title,b.description,b.thumbnail,b.duration,b.pubDate,this.getTarget(),b),c.push(b);return c};var yc=function(a,b){yc.__super__.constructor.call(this,a,b)};f(yc,ka);yc.NAME="AuditudePlugin";
yc.prototype.moduleName="auditude";yc.prototype.featureName="ads";yc.prototype.createFullscreenProxy=function(){return new bb(this.config)};yc.prototype.createProxy=function(){return new ia(this.config)};yc.prototype.isFullscreenDevice=function(){return!0};r.registerPlugin("auditude","html",yc);r.registerPlugin("auditude","flash",xd);var zc=function(a){zc.__super__.constructor.call(this,a);a=a.retrieveProxy(la.NAME);this.setURL=a.setURL.bind(a);this.getURL=a.getURL.bind(a);this.getData=a.getRecommendations.bind(a);
this.setData=a.setRecommendations.bind(a);this.getTarget=a.getTarget.bind(a);this.setTarget=a.setTarget.bind(a)};f(zc,yb);zc.prototype.setURL=function(a){};zc.prototype.getURL=function(){};zc.prototype.getData=function(){};zc.prototype.setData=function(a){};zc.prototype.getTarget=function(){};zc.prototype.setTarget=function(a){};var db=function(a,b){db.__super__.constructor.call(this,a,b)};f(db,Z);db.NAME="AutoAdvancePlugin";db.prototype.moduleName="autoadvance";db.prototype.createController=function(){db.__super__.createController.call(this);
this.registerCommand(Cb.START,zf);this.registerCommand(Cb.ADVANCE,Af);this.registerCommand(d.ENDED,Bf);this.registerCommand(d.CHANGE_MEDIA,id);this.registerCommand(d.PLAY,id);this.registerCommand(d.PLAYING,id);this.registerCommand(d.REPLAY,id)};db.prototype.createModel=function(){this.registerProxy(new cb(this.config))};db.prototype.createView=function(){this.registerMediator(new xc)};db.prototype.listNotificationInterests=function(){return[d.ENDED,d.CHANGE_MEDIA,d.PLAY,d.PLAYING,d.REPLAY]};db.prototype.listNotificationPublications=
function(){var a,b;return db.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in Cb)b=Cb[a],c.push(b);return c}())};db.prototype.listNotificationEvents=function(){var a,b;return db.__super__.listNotificationEvents.call(this).concat(function(){var c;c=[];for(a in Cb)b=Cb[a],c.push(b);return c}())};r.registerPlugin("autoadvance","html",db);r.registerPlugin("autoadvance","flash",Db);var kc=function(){kc.__super__.constructor.call(this)};f(kc,Y);kc.prototype.componentName=
"recommendations-grid";kc.prototype.grid=null;kc.prototype.onRegister=function(){this.createText("recommendations-grid-label",this.localizationManager.getString(v.MSG_RECOMMENDATIONS_TITLE));this.grid=this.create("recommendations-grid-table-grid",this,"table");kc.__super__.onRegister.call(this)};kc.prototype.listNotificationInterests=function(){return[Eb.RECOMMENDATIONS_LOADED]};kc.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case Eb.RECOMMENDATIONS_LOADED:if(this.grid.innerHTML=
"",this.create("recommendations-grid-row",this.grid,"tr"),this.create("recommendations-grid-row",this.grid,"tr"),b=a.getBody(),null!=b&&0<b.length)for(c=0,e=b.length;c<e;c++)a=b[c],this.addElement(a,c)}};kc.prototype.addElement=function(a,b){var c,e=this;c=this.create("recommendations-grid-item",this.grid.childNodes[2>b%4?0:1],"td");null==c.dataset&&(c.dataset={});c.dataset.link=a.link;c.dataset.target=this.config.getTarget();c.innerHTML="\x3cimg src\x3d'"+a.thumbnail+"' class\x3d'"+this.cssPrefix+
"recommendations-grid-thumbnail' /\x3e \x3cspan class\x3d'"+this.cssPrefix+"recommendations-grid-text'\x3e"+a.description+"\x3c/span\x3e";c.onclick=function(a){a.stopImmediatePropagation();e.sendNotification(Eb.RECOMMENDATION_SELECTED,a.currentTarget.dataset);return!1}};var Oa=function(a,b){Oa.__super__.constructor.call(this,a,b)};f(Oa,Xa);Oa.NAME="RecommendationsPlugin";Oa.prototype.featureName="recommendations";Oa.prototype.moduleName="recommendations";Oa.prototype.createController=function(){this.registerCommand(Eb.RECOMMENDATION_SELECTED,
Cf);this.registerCommand(d.START,Df);this.registerCommand(d.PLAY_STATE_CHANGE,Ef)};Oa.prototype.createModel=function(){this.registerProxy(new la(this.config))};Oa.prototype.createView=function(){this.registerMediator(new jc)};Oa.prototype.createAPI=function(){return this.api=new zc(this)};Oa.prototype.listNotificationInterests=function(){return[d.START,d.PLAY_STATE_CHANGE]};Oa.prototype.listNotificationPublications=function(){var a,b;return Oa.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in Eb)b=Eb[a],c.push(b);return c}())};Oa.prototype.listNotificationEvents=function(){var a,b;return Oa.__super__.listNotificationEvents.call(this).concat(function(){var c;c=[];for(a in Eb)b=Eb[a],c.push(b);return c}())};r.registerPlugin("recommendations","html",Oa);r.registerPlugin("recommendations","flash",sa);var Ba=function(a){Ba.__super__.constructor.call(this,a)};f(Ba,fa);Ba.prototype.configurationName="nielsen";Ba.NAME=w.NAME;Ba.cg="OnDemand";Ba.url="http://secure-us.imrworldwide.com/cgi-bin/m";
Ba.prototype.defaults={url:null,data:{ci:null,c6:null,cg:null,tl:null},events:null};Ba.prototype.getTitle=function(){return this.title};Ba.prototype.setTitle=function(a){return this.title=a};Ba.prototype.start=function(){var a;a=this.constructURL("video","started");g.beacon(a)};Ba.prototype.end=function(){var a;a=this.constructURL("video","ended");g.beacon(a)};Ba.prototype.constructURL=function(a,b){var c,e,d,h,f,g,k,n,m,p;g=this.url||Ba.url;d=null!=(f=this.value.events)?f[a]:void 0;if(null!=d)for(k=
0,n=d.length;k<n;k++)f=d[k],f.type===b&&(h=f);d=(null!=h?null!=(c=h.data)?c.ci:void 0:void 0)||this.value.data.ci;c=(null!=h?null!=(e=h.data)?e.c6:void 0:void 0)||this.value.data.c6;e=(null!=h?null!=(m=h.data)?m.cg:void 0:void 0)||this.value.data.cg||Ba.cg;h=(null!=h?null!=(p=h.data)?p.tl:void 0:void 0)||this.value.data.tl;return""+g+"?ci\x3d"+d+"\x26c6\x3d"+c+"\x26cc\x3d1\x26tl\x3d"+h+"\x26cg\x3d"+e+"\x26rnd\x3d"+Date.now()};var de=function(){return de.__super__.constructor.apply(this,arguments)};
f(de,G);de.NAME="NielsenWrapper";de.prototype.createXML=function(a){var b,c,e,d,h,f,g,k,n,m,p,q,r,s,u,v,w;if(null!=(null!=(m=this.config)?m.events:void 0)){a.getElementsByTagName("application");d=a.getElementsByTagName("metrics")[0];m=a.createElement("vendor");m.setAttribute("id","nielsen");d.appendChild(m);d={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};g=[{value:"ci",key:"NIELSEN_CI"},{value:"cg",key:"NIELSEN_CG"},{value:"tl",key:"NIELSEN_TL"},{value:"c6",
key:"NIELSEN_C6"}];null!=this.config.url&&(c=a.createElement("property"),c.setAttribute("key","serviceURL"),b=K.createTextContent(a,this.config.url.toString()),c.appendChild(b),m.appendChild(c));u=this.config.events;for(n in u)if(e=u[n],null!=e&&0<e.length)for(p=0,r=e.length;p<r;p++)for(c=e[p],h=a.createElement("property"),h.setAttribute("key",d[n][c.type]),m.appendChild(h),q=0,s=g.length;q<s;q++)f=g[q],k=(null!=(v=c.data)?v[f.value]:void 0)||(null!=(w=this.config.data)?w[f.value]:void 0),null!=k&&
""!==k&&(b=a.createElement("property"),b.setAttribute("key",f.key),k=K.createTextContent(a,k),b.appendChild(k),h.appendChild(b));return a}};var ee=function(){ee.__super__.constructor.call(this)};f(ee,puremvc.SimpleCommand);ee.prototype.execute=function(a){this.facade.logger.debug("NielsenEndCommand");this.facade.retrieveProxy(Ba.NAME).end()};var fe=function(){fe.__super__.constructor.call(this)};f(fe,puremvc.SimpleCommand);fe.prototype.execute=function(a){this.facade.logger.debug("NielsenStartCommand");
this.facade.retrieveProxy(Ba.NAME).start()};var yd=function(a,b){yd.__super__.constructor.call(this,a,b)};f(yd,Oa);yd.NAME="RecommendationsGridPlugin";yd.prototype.moduleName="recommendationsgrid";yd.prototype.createView=function(){this.registerMediator(new kc)};r.registerPlugin("recommendationsgrid","html",yd);r.registerPlugin("recommendationsgrid","flash",sa);var Ub=function(a){Ub.__super__.constructor.call(this,a)};f(Ub,fa);Ub.prototype.configurationName="comscore";Ub.NAME=w.NAME;Ub.prototype.defaults=
{url:"http://b.scorecardresearch.com/b",events:{ads:null,video:null},data:{c1:null,c2:null,c3:null,c4:null,c5:null,c6:null,c7:null,c8:null,c9:null,c10:null,c14:null}};Ub.prototype.adStart=function(){var a;this.facade.logger.log("ComscoreProxy -\x3e adStart");a=this.constructURL("ads","started");g.beacon(a)};Ub.prototype.videoStart=function(){var a;this.facade.logger.log("ComscoreProxy -\x3e videoStart");a=this.constructURL("video","started");g.beacon(a)};Ub.prototype.constructURL=function(a,b){var c,
e,d,h,f,g,k,m;c={};d=null!=(h=this.value.events)?h[a]:void 0;if(null!=d)for(k=0,m=d.length;k<m;k++)h=d[k],h.type===b&&(e=h);h=this.value.data;for(f in h)d=h[f],c[f]=(null!=e?null!=(g=e.data)?g[f]:void 0:void 0)||d;null==c.c7&&(c.c7=document.location.href.substr(0,512));null==c.c8&&(c.c8=document.referrer.substr(0,512));null==c.c9&&(c.c9=document.title);null==c.cv&&(c.cv="2.0");c.rn=Date.now();g=this.value.url;e=[];for(f in c)d=c[f],null!=d&&""!==d&&e.push(f+"\x3d"+escape(d));0<e.length&&(g+="?"+e.join("\x26"));
return g.substr(0,2080)};var ge=function(){return ge.__super__.constructor.apply(this,arguments)};f(ge,G);ge.NAME="ComscoreWrapper";ge.prototype.createXML=function(a){var b,c,e,d,h,f,g,k,m,n,p,q,r,s,u,v,w;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("metrics")[0];null==c&&(c=a.createElement("metrics"),b.appendChild(c));b=a.createElement("vendor");b.setAttribute("id","comscore");c.appendChild(b);h={ads:{started:"adStart",ended:"adComplete"},video:{started:"videoStart",ended:"videoComplete"}};
k=[{value:"c1",key:"COMSCORE_CSC1"},{value:"c2",key:"COMSCORE_CSC2"},{value:"c3",key:"COMSCORE_CSC3"},{value:"c4",key:"COMSCORE_CSC4"},{value:"c5",key:"COMSCORE_CSC5"},{value:"c6",key:"COMSCORE_CSC6"},{value:"c7",key:"COMSCORE_CSC7"},{value:"c8",key:"COMSCORE_CSC8"},{value:"c9",key:"COMSCORE_CSC9"},{value:"c10",key:"COMSCORE_CSC10"},{value:"c11",key:"COMSCORE_CSC14"}];u=this.config.events;for(n in u)if(d=u[n],null!=d&&0<d.length)for(p=0,r=d.length;p<r;p++)for(e=d[p],f=a.createElement("property"),
f.setAttribute("key",h[n][e.type]),b.appendChild(f),c=a.createElement("property"),c.setAttribute("key","COMSCORE_CSURL"),m=K.createTextContent(a,this.config.url),c.appendChild(m),f.appendChild(c),q=0,s=k.length;q<s;q++)g=k[q],m=(null!=(v=e.data)?v[g.value]:void 0)||(null!=(w=this.config.data)?w[g.value]:void 0),null!=m&&""!==m&&(c=a.createElement("property"),c.setAttribute("key",g.key),m=K.createTextContent(a,m),c.appendChild(m),f.appendChild(c));return a};var Ff=function(){Ff.__super__.constructor.call(this)};
f(Ff,puremvc.SimpleCommand);Ff.prototype.execute=function(a){this.facade.logger.debug("ComscoreAdStartCommand");this.facade.retrieveProxy(Ub.NAME).adStart()};var he=function(){he.__super__.constructor.call(this)};f(he,puremvc.SimpleCommand);he.prototype.execute=function(a){this.facade.logger.debug("ComscoreStartCommand");this.facade.retrieveProxy(Ub.NAME).videoStart()};var Pc=function(a,b){Pc.__super__.constructor.call(this,a,b)};f(Pc,Z);Pc.NAME="NielsenPlugin";Pc.prototype.moduleName="nielsen";Pc.prototype.createController=
function(){var a,b,c,e;b=null!=(a=this.config)?null!=(c=a.events)?c.video:void 0:void 0;if(null!=b)for(c=0,e=b.length;c<e;c++)a=b[c],"started"===a.type&&(this.registerCommand(d.STARTED,fe),this.registerCommand(d.CONTENT_CHANGED,fe)),"ended"===a.type&&(this.registerCommand(d.ENDED,ee),this.registerCommand(d.CHANGE_CONTENT,ee))};Pc.prototype.createModel=function(){this.registerProxy(new Ba(this.config))};Pc.prototype.listNotificationInterests=function(){return[d.STARTED,d.ENDED,d.CONTENT_CHANGED,d.CHANGE_CONTENT]};
r.registerPlugin("nielsen","html",Pc);r.registerPlugin("nielsen","flash",de);var Ca=function(a){this.proxy=a;Ca.__super__.constructor.call(this);this.plugin=this.proxy.plugin;this.error=this.proxy.error};f(Ca,puremvc.Proxy);Ca.NAME="OmnitureAdProxy";Ca.prototype.proxy=null;Ca.prototype.plugin=null;Ca.prototype.error=null;Ca.prototype.currentTime=null;Ca.prototype.started=!1;Ca.prototype.ad=null;Ca.prototype.getAd=function(){return this.ad};Ca.prototype.setAd=function(a){this.started=!1;this.currentTime=
0;return this.ad=a};Ca.prototype.setTimeRemaining=function(a){if(null!=this.ad)return this.currentTime=this.ad.duration-a,a};Ca.prototype.start=function(){try{this.plugin.Media.openAd(this.ad.title,this.ad.duration,this.proxy.value.playerName,this.proxy.getMediaName(),this.ad.type,this.ad.position,this.ad.cpm),this.started=!0}catch(a){this.error("open",a)}};Ca.prototype.play=function(){!0!==this.started&&this.start();try{this.plugin.Media.play(this.ad.title,this.currentTime||0)}catch(a){this.error("ad play",
a)}};Ca.prototype.pause=function(){try{this.plugin.Media.stop(this.ad.title,this.currentTime)}catch(a){this.error("ad pause",a)}};Ca.prototype.ended=function(){if(!1!==this.started)try{this.started=!1,this.plugin.Media.stop(this.ad.title,this.ad.duration),this.plugin.Media.close(this.ad.title)}catch(a){this.error("ad end",a)}};var Gf=function(){Gf.__super__.constructor.call(this)};f(Gf,J);Gf.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdLoadedCommand");this.config.ads.setAd(a.getBody())};
var X=function(a){X.__super__.constructor.call(this,a)};f(X,T);X.NAME=w.NAME;X.prototype.defaults={plugin:null,main:"s",heartbeat:null,account:null,playerName:null,mediaName:null,trackingServer:null,visitorNamespace:null};X.prototype.heartbeatConfig=null;X.prototype.delegate=null;X.prototype.media=null;X.prototype.started=!1;X.prototype.ads=null;X.prototype.load=function(a){var b;b=this.getConfigurationData().heartbeat.resources;g.loadAMPScripts(b,a)};X.prototype.getLoaded=function(){var a,b,c;return"undefined"!==
typeof AppMeasurement&&null!==AppMeasurement&&null!=("undefined"!==typeof ADB&&null!==ADB?null!=(a=ADB.va)?a.VideoHeartbeat:void 0:void 0)&&null!=("undefined"!==typeof ADB&&null!==ADB?null!=(b=ADB.va)?null!=(c=b.plugins)?c.AdobeAnalyticsPlugin:void 0:void 0:void 0)};X.prototype.getMedia=function(){return this.media};X.prototype.setMedia=function(a){this.started=!1;return this.media=a};X.prototype.setAd=function(a){this.adVO=a};X.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||
this.media.title};X.prototype.initialize=function(){var a,b,c;X.__super__.initialize.call(this);this.delegate=this.createDelegate();b=this.getConfigurationData();a=new AppMeasurement;a.account=b.account;a.trackingServer=b.trackingServer;null!=b.visitorNamespace&&"undefined"!==typeof Visitor&&null!==Visitor&&(a.visitorNamespace=b.visitorNamespace,c=new Visitor("2B8D246452DD9FBF0A490D45"),c.trackingServer=b.trackingServer,a.visitor=c);a=new ADB.va.plugins.AdobeAnalyticsPlugin(a);this.plugin=new ADB.va.VideoHeartbeat(this.delegate,
[a]);a=new ADB.va.ConfigData;a.trackingServer="http://heartbeats.omtrdc.net/";a.jobId="sc_va";a.debugLogging=this.facade.logger.enabled;a.publisher=this.getConfigurationData().heartbeat.publisher;this.plugin.configure(a)};X.prototype.createPlugin=function(){return ADB.va.VideoHeartbeat};X.prototype.createDelegate=function(){var a,b=this;a=new ADB.va.PlayerDelegate;a.getVideoInfo=function(){var a,e;a=b.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();e=new ADB.va.VideoInfo;e.id=b.media.guid||
b.media.title;e.playerName=b.media.title;e.length="live"===b.media.temporalType?-1:a.getDuration();e.streamType=b.media.temporalType||ADB.va.ASSET_TYPE_VOD;e.playhead=a.getCurrentTime();return e};a.getAdInfo=function(){var a;if(null==b.adVO)return null;a=new ADB.va.AdInfo;a.id=b.adVO.id;a.length=b.adVO.duration;a.position=b.adVO.position;a.name=b.adVO.title;a.cpm="";return a};a.getChapterInfo=function(){var a;if(null==b.media.scenes)return null;a=new ADB.va.ChapterInfo;a.name="";a.length=-1;a.position=
"1";a.startTime=-1;return a};a.onError=function(a){b.facade.logger.error("Heartbeat Error:",a)};a.getQoSInfo=function(){return null};return a};X.prototype.start=function(){try{this.plugin.trackVideoLoad(),this.started=!0}catch(a){this.error(a)}};X.prototype.play=function(){!0!==this.started&&this.start();try{this.plugin.trackPlay()}catch(a){this.error(a)}};X.prototype.pause=function(){try{this.plugin.trackStop()}catch(a){this.error(a)}};X.prototype.seeking=function(){try{this.plugin.trackSeekStart()}catch(a){this.error(a)}};
X.prototype.seeked=function(){try{this.plugin.trackSeekComplete()}catch(a){this.error(a)}};X.prototype.ended=function(){try{this.plugin.trackComplete(),this.plugin.trackVideoUnload(),this.started=!1}catch(a){this.error(a)}};var Hf=function(){Hf.__super__.constructor.call(this)};f(Hf,J);Hf.prototype.execute=function(a){this.facade.logger.debug("OmniturePlayCommand");this.config.play()};var If=function(){If.__super__.constructor.call(this)};f(If,J);If.prototype.execute=function(a){this.config.setMedia(a.getBody());
this.facade.removeCommand(d.PLAY)};var Jf=function(){Jf.__super__.constructor.call(this)};f(Jf,J);Jf.prototype.execute=function(a){this.config.pause()};var Kf=function(){Kf.__super__.constructor.call(this)};f(Kf,J);Kf.prototype.execute=function(a){this.facade.logger.debug("OmnitureSeekingCommand");this.config.seeking()};var Lf=function(){Lf.__super__.constructor.call(this)};f(Lf,J);Lf.prototype.execute=function(a){this.facade.logger.debug("OmnitureSeekedCommand");this.config.seeked()};var ie=function(){ie.__super__.constructor.call(this)};
f(ie,J);ie.prototype.execute=function(a){this.config.ended()};var Mf=function(){Mf.__super__.constructor.call(this)};f(Mf,J);Mf.prototype.execute=function(a){this.config.setMedia(a.getBody());this.config.start()};var Nf=function(){Nf.__super__.constructor.call(this)};f(Nf,J);Nf.prototype.execute=function(a){this.facade.logger.debug("OmnitureStartCommand");this.config.start();this.facade.registerCommand(d.PLAY,Hf)};var Of=function(){Of.__super__.constructor.call(this)};f(Of,J);Of.prototype.execute=
function(a){this.facade.logger.debug("OmnitureAdStartedCommand");this.config.ads.start()};var Pf=function(){Pf.__super__.constructor.call(this)};f(Pf,J);Pf.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdPlayCommand");this.config.ads.play()};var Qf=function(){Qf.__super__.constructor.call(this)};f(Qf,J);Qf.prototype.execute=function(a){this.facade.logger.debug("OmnitureAdPauseCommand");this.config.ads.pause()};var Rf=function(){Rf.__super__.constructor.call(this)};f(Rf,J);Rf.prototype.execute=
function(a){this.facade.logger.debug("OmnitureAdBreakEndCommand");this.config.ads.ended()};var Ac=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};Ac.prototype.id=null;Ac.prototype.startTime=null;Ac.prototype.endTime=null;Ac.prototype.text=null;Ac.prototype.html=null;Ac.prototype.align=null;var Sf=function(){Sf.__super__.constructor.call(this)};f(Sf,J);Sf.prototype.execute=function(a){this.config.ads.setTimeRemaining(a.getBody())};var rg=function(){};rg.prototype.parse=function(a,b){var c,
e,d,h,f,t,k,m,n;b=b.replace(/\r/g,"");e=b.split("\n\n");m=0;for(n=e.length;m<n;m++){c=e[m];c=c.split("\n");try{h=c[0],k=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),f=g.flattenTimecode(k[0]),d=g.flattenTimecode(k[1]),t=c.slice(2)}catch(p){U.warn("SRT Parsing Warning")}c=new Ac(f,d,"cue_"+h);c.html="\x3cp\x3e"+t.join("\x3cbr /\x3e")+"\x3c/p\x3e";c.text=t.join("\n");a.cues.push(c)}return a};var qg=function(){};qg.prototype.parse=function(a,b){var c,e;Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,
c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===a.prefix)return d+=g.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=
e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var f;d=b.getAttribute("begin");b.removeAttribute("begin");null!=b.getAttribute("end")?(f=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(f=c[e+1].getAttribute("begin"));e=new Ac(g.flattenTimecode(d),g.flattenTimecode(f),"cue_"+e);f=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=f&&(e.align="center"===f?"middle":f,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling",
"textAlign"));b=K.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var je=function(){return je.__super__.constructor.apply(this,arguments)};f(je,G);je.NAME="OmnitureWrapper";je.prototype.createXML=function(a){var b,c,e,d,h,f,g,k,m,n,p,q;b=a.getElementsByTagName("application")[0];f=a.getElementsByTagName("metrics")[0];
null==f&&(f=a.createElement("metrics"),b.appendChild(f));b=a.createElement("vendor");b.setAttribute("id","omniture");f.appendChild(b);g=[{value:this.config.channel,key:"OMNITURE_CHANNEL"},{value:this.config.account,key:"OMNITURE_ACCOUNT"},{value:this.config.debugTracking,key:"OMNITURE_DEBUG_TRACKING"},{value:this.config.trackLocal,key:"OMNITURE_TRACK_LOCAL"},{value:this.config.visitorNamespace,key:"OMNITURE_VISITOR_NAMESPACE"},{value:this.config.trackingServer,key:"OMNITURE_TRACKING_SERVER"},{value:this.config.trackingServerSecure,
key:"OMNITURE_TRACKING_SERVER_SECURE"},{value:this.config.currencyCode,key:"OMNITURE_CURRENCY_CODE"},{value:this.config.trackWhilePlaying,key:"OMNITURE_TRACK_WHILE_PLAYING"},{value:this.config.trackMediaMethods,key:"OMNITURE_TRACK_MEDIA_METHODS"},{value:this.config.mediaName,key:"OMNITURE_MEDIA_NAME"},{value:this.config.playerName,key:"OMNITURE_PLAYER_NAME"}];c=0;for(e=g.length;c<e;c++)f=g[c],null!=f.value&&this.createProperty(a,f.key,f.value,b);c=this.config.Media;if(null!=c){g=[{value:c.autoTrack,
key:"OMNITURE_AUTO_TRACK"},{value:c.segmentByMilestones,key:"OMNITURE_SEGMENT_MILESTONES"},{value:c.trackVars,key:"OMNITURE_TRACKVARS"},{value:c.trackEvents,key:"OMNITURE_TRACKEVENTS"},{value:c.trackUsingContextData,key:"OMNITURE_TRACK_CONTEXT_DATA"},{value:c.trackSecondIntervals,key:"OMNITURE_TRACKSECOND_INTERVALS"}];e=0;for(k=g.length;e<k;e++)f=g[e],null!=f.value&&this.createProperty(a,f.key,f.value,b);if(null!=c.trackMilestones)for(m=this.createProperty(a,"OMNITURE_TRACK_MILESTONES",null,b),e=
c.trackMilestones,n=0,p=e.length;n<p;n++)for(h in f=e[n],k=this.createProperty(a,f.percent,null,m),f)g=f[h],"percent"!==h&&this.createProperty(a,h,g,k);e=c.contextDataMapping;if(null!=e)for(h in c=this.createProperty(a,"OMNITURE_CONTEXT_DATA",null,b),e)if(g=e[h],"string"===typeof g&&this.createProperty(a,h,g,c),g instanceof Array)for(k=this.createProperty(a,h,null,c),m=0,n=g.length;m<n;m++)f=g[m],this.createProperty(a,f.percent,f.events,k)}e=this.config.customLinkTracking;if(null!=e)for(h in k=this.createProperty(a,
"OMNITURE_CUSTOM_LINK_TRACKING",null,b),e)if("intervalReached"===h)for(g=this.createProperty(a,h,null,k),p=e[h],n=0,m=p.length;n<m;n++)for(h in c=p[n],f=this.createProperty(a,c.interval,null,g),c)"interval"!==h&&this.createProperty(a,h,c[h],f);else this.createProperty(a,h,e[h],k);h=null!=(d=this.config.events)?d.video:void 0;if(null!=h)for(c=0,g=h.length;c<g;c++){d=h[c];switch(d.type){case "started":f="videoStart";break;case "ended":f="videoComplete";break;case "play":f="videoResume";break;case "pause":f=
"videoPause";break;default:f=d.type}this.createProperty(a,f,d.data,b)}h=null!=(q=this.config.events)?q.ads:void 0;if(null!=h)for(g=0,q=h.length;g<q;g++)d=h[g],f="started"===d.type?"adStart":"ended"===d.type?"adComplete":d.type,this.createProperty(a,f,d.data,b)};var mb=function(a,b){mb.__super__.constructor.call(this,a,b)};f(mb,G);mb.NAME="CaptioningWrapper";mb.prototype.hidden=!0;mb.prototype.createXML=function(a){var b,c,e,d;e=null!=(d=this.config.flash)?d.subply:void 0;if(null!=e)try{null!=e.timeMethod&&
(c=a.getElementsByTagName("player")[0],c.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=a.getElementsByTagName("application")[0],e=a.getElementsByTagName("subply")[0],null==e&&(e=a.createElement("subply"),b.appendChild(e)),this.createProperty(a,"SUBPLY_URL",this.config.flash.subply.plugin,e))}catch(h){this.facade.logger.error("AMP Captioning Error",h)}};mb.prototype.createFlashVars=function(a){var b,c,e,d,h,f;e=this.player.config;if(null!=(null!=(b=e.media)?b.track:void 0)){d=
g.selectTrack(e.media.track,"captions");null!=d.src&&""!==d.src&&(a.caption_url=d.src);if(1<e.media.track.length){c=[];b=[];f=e.media.track;e=0;for(h=f.length;e<h;e++)d=f[e],c.push(d.src),b.push(d.srclang);a.caption_url=c.join(",");a.caption_language=b.join(",")}a.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml"}};mb.prototype.listNotificationInterests=function(){return mb.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIA_CHANGE,p.CAPTIONING_REQUEST,
p.CAPTION_LANG_CHANGE])};mb.prototype.handleNotification=function(a){var b,c,e;mb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.CAPTION_LANG_CHANGE:e="";break;case p.CAPTIONING_REQUEST:e="visibilitychange";a=a.enabled;this.hidden=!a;break;case d.MEDIA_CHANGE:b=a,null!=b.track&&(c=g.selectTrack(b.track,"captions"),null!=(null!=c?c.src:void 0)&&""!==c.src&&(b.captioningUrl=c.src),b.captioningType=c.type||"application/ttml+xml")}null!=e&&""!==e&&this.dispatchEvent(new R(e,
a))};mb.prototype.getHidden=function(){return this.hidden};mb.prototype.setHidden=function(a){this.hidden=a;this.facade.getVideo().setPlayerProperty("captionDisplay",{visible:!a});return a};r.registerPlugin("captioning","flash",mb);var nb=function(){nb.__super__.constructor.call(this)};f(nb,Y);nb.prototype.initializeNotifier=function(a){nb.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(w.NAME);this.media=this.facade.app.retrieveProxy(q.NAME)};nb.prototype.onRegister=
function(){nb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};var ba=function(a){ba.__super__.constructor.call(this,null,null,a,null)};f(ba,S);ba.prototype.componentName="captioning-settings";ba.prototype.captioningObject={"default":{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",selected:{fontFamily:null,size:null,
fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"Arial,sans-serif",size:"1.3em",
fontColor:"rgba(255,255,255,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"Arial,sans-serif",size:"1.3em",fontColor:"rgba(255,255,0,1)",edgeType:null,edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};ba.prototype.captionText=null;ba.prototype.settingsUiVisible=!1;ba.prototype.captionningStyle=null;ba.prototype.swatchColorCurr=null;ba.prototype.swatchOpacityCurr=
null;ba.prototype.colorPicker=null;ba.prototype.colorPickerOpacity=null;ba.prototype.advancedSettingContainer=null;ba.prototype.list={font:null,language:null,edge:null,size:null,scroll:null};ba.prototype.picker={color:null,background:null,edge:null,window:null};ba.prototype.toggle={ON:null,OFF:null,disabled:!1};ba.prototype.onRegister=function(){var a,b,c,e,d,f=this;this.captionText=this.create("caption-text",this.viewComponent.parentElement);c=this.create("captioning-titlebar");this.create("captioning-title",
c,"span",this.localizationManager.getString(v.MSG_CC_TITLE));this.toggle.ON=this.create("captioning-toggle-btn",c,"div","ON");this.toggle.OFF=this.create("captioning-toggle-btn",c,"div","OFF");k.create(this.toggle.ON,k.CLICK,function(a){a.stopImmediatePropagation();f.toggle.disabled||f.toggleButtonHandler(!0);return!1});this.toggle.disabled||this.classList.add("captioning-floater-btnselected",this.toggle.OFF);k.create(this.toggle.OFF,k.CLICK,function(a){a.stopImmediatePropagation();f.toggle.disabled||
f.toggleButtonHandler(!1);return!1});c=this.create("captioning-row");this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",c,"select");this.languageListPopulate();k.create(this.list.language,"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;f.sendNotification(A.VISIBILITY_CHANGE,b);b&&f.facade.moduleAPI.setTrack(f.facade.moduleAPI.selectTrackByIndex(a.target.selectedIndex));
return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_PRESETS));a=this.create(["captioning-preset","captioning-preset1"],c,null,"Aa");b=this.create(["captioning-preset","captioning-preset2"],c,null,"Aa");d=this.create(["captioning-preset","captioning-preset3"],c,null,"Aa");c=this.create(["captioning-preset","captioning-preset4"],c,null,"Aa");k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();f.captioningObject.selected=f.cloneObject(f.captioningObject.preset1);
f.applyCaptioningStyle();return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();f.captioningObject.selected=f.cloneObject(f.captioningObject.preset2);f.applyCaptioningStyle();return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();f.captioningObject.selected=f.cloneObject(f.captioningObject.preset3);f.applyCaptioningStyle();return!1});k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();f.captioningObject.selected=f.cloneObject(f.captioningObject.preset4);f.applyCaptioningStyle();
return!1});this.advancedSettingContainer=this.create("captioning-advanced-container");c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_FONT));this.list.font=this.create("captioning-dropdown",c,"select");this.create(null,this.list.font,"option","Arial").value="Arial,sans-serif";this.create(null,this.list.font,"option","Times New Roman");this.create(null,this.list.font,"option","Courier");this.create(null,
this.list.font,"option","Georgia");this.create(null,this.list.font,"option","Helvetica");this.create(null,this.list.font,"option","Verdana");this.create(null,this.list.font,"option","Impact");this.create(null,this.list.font,"option","Comic Sans Serif");this.create(null,this.list.font,"option","Times New Roman");k.create(this.list.font,"change",function(a){a.stopImmediatePropagation();f.captioningObject.selected.fontFamily=a.target.value;f.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);
this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",c,"select");this.create(null,this.list.edge,"option","none").value="none";this.create(null,this.list.edge,"option","Right drop shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Left drop shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px";this.create(null,
this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";k.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();f.captioningObject.selected.edgeType=a.target.value;f.applyCaptioningStyle(!1);return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",
c,"select");this.create(null,this.list.size,"option","Small").value=".8em";this.create(null,this.list.size,"option","Medium").value="1.3em";this.create(null,this.list.size,"option","Large").value="2.3em";this.list.size.selectedIndex=1;k.create(this.list.size,"change",function(a){a.stopImmediatePropagation();f.captioningObject.selected.size=a.target.value;f.applyCaptioningStyle(!1);return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(v.MSG_CC_SCROLL));this.list.scroll=
this.create("captioning-dropdown",c,"select");this.create(null,this.list.scroll,"option","Roll up");this.create(null,this.list.scroll,"option","Roll down");k.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",c,"span",this.localizationManager.getString(v.MSG_CC_COLOR));this.picker.color=this.create("captioning-color-picker",c);this.picker.color.style.backgroundColor=
this.captioningObject["default"].fontColor;k.create(this.picker.color,k.CLICK,function(a){var b;a.stopImmediatePropagation();f.colorPicker.style.display="block"===f.colorPicker.style.display?"none":"block";"block"===f.colorPicker.style.display&&(null!=(a=f.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),f.colorPicker.style.left="152px",f.colorPicker.name="fontColor",f.captioningObject.instance=f.picker.color,-1!==f.picker.color.style.backgroundColor.indexOf("rgba")&&(b=f.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,
"").split(",")[3]),f.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(v.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",c);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;k.create(this.picker.background,k.CLICK,function(a){var b;a.stopImmediatePropagation();f.colorPicker.style.display="block"===f.colorPicker.style.display?"none":"block";"block"===
f.colorPicker.style.display&&(null!=(a=f.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),f.colorPicker.style.left="264px",f.colorPicker.name="backgroundColor",f.captioningObject.instance=f.picker.background,-1!==f.picker.background.style.backgroundColor.indexOf("rgba")&&(b=f.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),f.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(v.MSG_CC_EDGE));
this.picker.edge=this.create("captioning-color-picker",c);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;k.create(this.picker.edge,k.CLICK,function(a){var b;a.stopImmediatePropagation();f.colorPicker.style.display="block"===f.colorPicker.style.display?"none":"block";"block"===f.colorPicker.style.display&&(null!=(a=f.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),f.colorPicker.style.left="212px",f.colorPicker.name="edgeColor",f.captioningObject.instance=
f.picker.edge,-1!==f.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=f.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),f.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(v.MSG_CC_WINDOW));this.picker.window=this.create("captioning-color-picker",c);this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor;k.create(this.picker.window,k.CLICK,function(a){var b;
a.stopImmediatePropagation();f.colorPicker.style.display="block"===f.colorPicker.style.display?"none":"block";"block"===f.colorPicker.style.display&&(null!=(a=f.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),f.colorPicker.style.left="300px",f.colorPicker.name="windowColor",f.captioningObject.instance=f.picker.window,-1!==f.picker.window.style.backgroundColor.indexOf("rgba")&&(b=f.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),f.colorPickerOpacity.value=
null!=b?b:1);return!1});c=this.create(["caption-text","caption-text-preview"]);this.create(null,c,"p","Lorem ipsum dolor sit amet");c=this.create("captioning-footer-container");a=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(v.MSG_CC_APPLY));b=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(v.MSG_CC_CANCEL));d=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(v.MSG_CC_RESET));450<this.facade.app.getViewComponent().clientWidth&&
(c=this.create("captioning-advanced-button",c,"div",this.localizationManager.getString(v.MSG_CC_SHOW_ADVANCED)),k.create(c,k.CLICK,function(a){a.stopImmediatePropagation();"block"===f.advancedSettingContainer.style.display?(a.target.innerHTML=f.localizationManager.getString(v.MSG_CC_SHOW_ADVANCED),f.advancedSettingContainer.style.display="none",f.colorPicker.style.display="none"):(a.target.innerHTML=f.localizationManager.getString(v.MSG_CC_HIDE_ADVANCED),f.advancedSettingContainer.style.display="block");
return!1}));k.create(a,k.CLICK,function(a){a.stopImmediatePropagation();try{localStorage.setItem(nd.PREFIX+"captioningDefault",JSON.stringify(f.captioningObject.selected))}catch(b){f.facade.logger.error("LocalStorage Not Supported on this Browser",b)}f.sendNotification(A.SETTINGS_VISIBILITY_CHANGE,f.settingsUiVisible);f.applyCaptioningStyle(!1,!0);f.sendNotification(A.SETTINGS_CHANGE,f.captioningObject.selected);return!1});k.create(b,k.CLICK,function(a){a.stopImmediatePropagation();f.sendNotification(A.SETTINGS_VISIBILITY_CHANGE,
f.settingsUiVisible);return!1});k.create(d,k.CLICK,function(a){a.stopImmediatePropagation();f.colorPicker.style.display="none";f.applyCaptioningStyle(!0);return!1});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";c="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);a=this.create("colorpicker-swatch",!1,null,"\x26nbsp;");b=0;for(d=c.length;b<d;b++)e=c[b],a.style.backgroundColor=e,e=a.cloneNode(),k.create(e,k.CLICK,function(a){a.stopImmediatePropagation();null!==f.swatchColorCurr&&(f.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");f.swatchColorCurr=a.target;f.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";f.captioningObject.instance.style.backgroundColor=f.captioningObject.selected[f.colorPicker.name]=
f.toRGBA(a.target.style.backgroundColor);f.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(e);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(v.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;k.create(this.colorPickerOpacity,"change",
function(a){a.stopImmediatePropagation();f.captioningObject.instance.style.backgroundColor=f.captioningObject.selected[f.colorPicker.name]=f.toRGBA(f.captioningObject.instance.style.backgroundColor);f.applyCaptioningStyle(!1);return!1});this.swatchOpacityCurr=this.colorPickerOpacity;k.create(document,k.CLICK,function(a){a.stopImmediatePropagation();"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==
f.colorPicker.style.display&&(f.colorPicker.style.display="none");return!1});null!=localStorage.getItem(nd.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(nd.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1)):(c=!(null!=this.facade.config.style||"undefined"!==this.facade.config.style),c||(this.captioningObject.selected=this.cloneObject(this.facade.config.style)),this.applyCaptioningStyle(c));ba.__super__.onRegister.call(this)};ba.prototype.toRGBA=
function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};ba.prototype.languageListPopulate=function(){var a,b,c,e;b=null!=(c=this.facade.moduleAPI)?c.getTracks():void 0;if(null!=b){this.list.language.innerHTML="";c=0;for(e=b.length;c<e;c++)a=b[c],a=a.language,a=this.facade.app.retrieveProxy(oa.NAME).getLanguageString(a),null!=a&&""!==a&&this.create(null,this.list.language,"option",a);this.toggle.disabled=0===this.list.language.childElementCount;
this.toggle.disabled&&this.create(null,this.list.language,"option","None")}};ba.prototype.cloneObject=function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};ba.prototype.applyCaptioningStyle=function(a,b){var c,e,d,f,g,k;null==a&&(a=!1);null==b&&(b=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:
"none",this.list.size.value=this.captioningObject["default"].size,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null!=this.captioningObject.selected.fontFamily&&(this.list.font.value=this.captioningObject.selected.fontFamily),
this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"none",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=
this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));f="font-family: "+(a?this.captioningObject["default"].fontFamily:this.list.font.value)+" ;";d=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+";";g="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+
" ;";e="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" ;";c="background-color: "+(a?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" ;";k="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" ;";this.captionningStyle.innerHTML=b?this.captioningObject.appliedStyleText=".akamai-caption-text { "+f+g+d+k+" }.akamai-caption-text p { "+e+c+" }":this.captioningObject.appliedStyleText+
".akamai-caption-text-preview { "+f+g+d+k+" }.akamai-caption-text-preview p { "+e+c+" }"};ba.prototype.toggleButtonHandler=function(a){null==a&&(a=!1);a?(this.classList.add("captioning-floater-btnselected",this.toggle.ON),this.classList.remove("captioning-floater-btnselected",this.toggle.OFF)):(this.classList.add("captioning-floater-btnselected",this.toggle.OFF),this.classList.remove("captioning-floater-btnselected",this.toggle.ON));this.sendNotification(A.VISIBILITY_CHANGE,a);this.sendNotification(Tf.UPDATE_SETTINGS,
{captioning:{hidden:!a}})};ba.prototype.listNotificationInterests=function(){return[A.CUE_CHANGE,A.SETTINGS_VISIBILITY_CHANGE,A.TOGGLE_SETTINGS_VISIBILITY,A.SETTINGS_CHANGE]};ba.prototype.handleNotification=function(a){var b,c,e,f;b=a.getName();a=a.getBody();switch(b){case A.CUE_CHANGE:b="";e=0;for(f=a.length;e<f;e++)c=a[e],b+=c.html;this.captionText.innerHTML=b;break;case A.SETTINGS_VISIBILITY_CHANGE:case A.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");
(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();a=this.settingsUiVisible?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;this.sendNotification(a,"cc-setting-active");break;case A.SETTINGS_CHANGE:this.captioningObject.selected=a,this.applyCaptioningStyle(!1,!0)}};var Da=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=
a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);b.poll()};null==window.com&&(window.com=a);Da.__super__.constructor.call(this,this.constructor.NAME)};f(Da,puremvc.Proxy);Da.NAME="LiveCaptionProxy";Da.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};Da.prototype.caption=null;Da.prototype.head=null;Da.prototype.script=null;Da.prototype.timeout=null;Da.prototype.getURL=
function(){return this.data.url};Da.prototype.setURL=function(a){return this.data.url=a};Da.prototype.start=function(){this.send()};Da.prototype.poll=function(){var a=this;setTimeout(function(){a.send()},this.data.interval||1E3)};Da.prototype.send=function(){null!=this.script&&this.head.removeChild(this.script);this.script=g.loadScript(this.data.base+this.data.url+".js?nocache\x3d"+Date.now())};Da.prototype.stop=function(){clearTimeout(timeout)};Da.prototype.parse=function(a){var b,c,e,d;if(a.Stream===
this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=new Ac(g.flattenTimecode(a.From),g.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(A.CUE_CHANGE,[this.caption]);return this.caption}};var lc=function(a){lc.__super__.constructor.call(this,lc.NAME,a)};f(lc,Yc);lc.NAME="CaptioningNativeMediator";
lc.prototype.video=null;lc.prototype.index=-1;lc.prototype.plugin=null;lc.prototype.onRegister=function(){this.video=this.facade.app.video;this.plugin=this.facade.retrieveProxy(W.NAME)};lc.prototype.listNotificationInterests=function(){return[A.VISIBILITY_CHANGE,A.TRACK_SELECTED,A.TRACKS_LOADED]};lc.prototype.handleNotification=function(a){var b,c,e,d,f,g,k,m;b=a.getBody();switch(a.getName()){case A.TRACKS_LOADED:d=0;for(g=b.length;d<g;d++)if(c=b[d],"captions"===c.kind||"subtitles"===c.kind)for(a=
this.video.addTextTrack(c.kind,c.label,c.srclang),m=c.cues,f=0,k=m.length;f<k;f++)c=m[f],e=new TextTrackCue(c.startTime,c.endTime,c.text),c.id=c.id,a.addCue(e);break;case A.TRACK_SELECTED:-1<this.index&&(this.video.textTracks[this.index].mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.plugin.getHidden()||(this.video.textTracks[this.index].mode="showing");break;case A.VISIBILITY_CHANGE:this.video.textTracks[this.index].mode=this.plugin.getHidden()?"hidden":"showing"}};var Uf=function(){Uf.__super__.constructor.call(this)};
f(Uf,puremvc.SimpleCommand);Uf.prototype.execute=function(a){var b,c,e,d,f,g;d=a.getBody();b=this.facade.retrieveProxy(W.NAME).getTrack();if(null!=b){a=b.activeCues;e=b.cues;b=!1;f=0;for(g=e.length;f<g;f++)c=e[f],d>=c.startTime&&d<c.endTime?0<=Gd.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(A.CUE_CHANGE,a)}};var Vf=function(){Vf.__super__.constructor.call(this)};f(Vf,puremvc.SimpleCommand);Vf.prototype.execute=function(a){var b;a=a.getBody();
b=this.facade.retrieveProxy(W.NAME);null!=a.track&&b.setTracks(a.track);null!=a.track&&this.sendNotification(A.ENABLED,!0)};var Wf=function(){Wf.__super__.constructor.call(this)};f(Wf,puremvc.SimpleCommand);Wf.prototype.execute=function(a){this.facade.retrieveProxy(W.NAME).setHidden(!a.getBody())};var Tf={SETTING_CHANGE:"settingchange",UPDATE_SETTINGS:"updatesettings"},Xf=function(){Xf.__super__.constructor.call(this)};f(Xf,puremvc.SimpleCommand);Xf.prototype.execute=function(a){var b,c;this.facade.logger.debug("CaptioningStartedCommand");
a=this.facade.retrieveProxy(W.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(Da.NAME),null==a&&(a=new Da,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};var mc=function(a){mc.__super__.constructor.call(this,a)};f(mc,nb);mc.prototype.componentName="captioning";mc.prototype.captionButton=null;mc.prototype.onRegister=function(){var a;a=new ab(this.localizationManager.getString(v.MSG_CC),
this.viewComponent,null,"caption",this.onclick.bind(this));this.facade.registerMediator(a);this.captionButton=a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.captionButton);mc.__super__.onRegister.call(this)};mc.prototype.onclick=function(a){a.stopImmediatePropagation();"embedded"===this.plugin.getTrack().type?this.sendNotification(A.VISIBILITY_CHANGE,this.plugin.getHidden()):a.currentTarget===this.captionButton&&this.sendNotification(A.SETTINGS_VISIBILITY_CHANGE,this.plugin.getHidden());
return!1};mc.prototype.listNotificationInterests=function(){return[A.VISIBILITY_CHANGE,A.ENABLED,A.TRACK_SELECTED]};mc.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;switch(a.getName()){case A.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case A.VISIBILITY_CHANGE:e="cc-active";break;case A.ENABLED:c=b?d.ADD_CONTROL_STATE:d.REMOVE_CONTROL_STATE,e="cc-enabled"}this.sendNotification(c,
e)};CaptionParsers={"application/ttml+xml":new qg,"application/x-subrip":new rg,undefined:new qg};var A={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningEnabled",TRACKS_LOADED:"captioningTracksLoaded",TRACK_SELECTED:"captioningTrackSelected",CUE_CHANGE:"captioningCueChange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},nc=function(a,b){var c,e=this;this.kind=a.kind;this.type=
a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=g.get(this.src,{onload:function(){try{CaptionParsers[e.type].parse(e,c.response)}catch(a){U.error("Could not parse caption track: "+e.src);return}"function"===typeof b&&b()},onerror:function(){U.error("Could not load caption track: "+e.src)}})};
nc.prototype.kind=null;nc.prototype.src=null;nc.prototype.language=null;nc.prototype.cues=null;nc.prototype.label=null;nc.prototype.activeCues=null;nc.prototype.type=null;nc.prototype.styles=null;nc.prototype.isLive=!1;var ma=function(a){ma.__super__.constructor.call(this,a)};f(ma,T);ma.NAME=w.NAME;ma.prototype.defaults={plugin:null,account:null,playerName:null,mediaName:null,main:"s"};ma.prototype.media=null;ma.prototype.started=!1;ma.prototype.video=null;ma.prototype.ads=null;ma.prototype.getLoaded=
function(){return null!=window[this.getConfigurationData().main]};ma.prototype.getMedia=function(){return this.media};ma.prototype.setMedia=function(a){this.started=!1;return this.media=a};ma.prototype.getMediaName=function(){return this.getConfigurationData().mediaName||this.media.title};ma.prototype.initialize=function(){var a;ma.__super__.initialize.call(this);if(null!=this.plugin){try{null==this.plugin.Media&&this.plugin.loadModule("Media")}catch(b){this.error("initialize",b)}null!=(null!=(a=
this.plugin.Media)?a.openAd:void 0)&&(this.ads=new Ca(this),this.facade.registerProxy(this.ads),this.facade.registerCommand(m.AD_LOADED,Gf),this.facade.registerCommand(m.AD_STARTED,Of),this.facade.registerCommand(m.AD_PLAY,Pf),this.facade.registerCommand(m.AD_PAUSE,Qf),this.facade.registerCommand(m.AD_TIME_REMAINING,Sf),this.facade.registerCommand(m.BREAK_END,Rf));this.video=this.facade.app.getVideo()}};ma.prototype.createPlugin=function(){return window[this.getConfigurationData().main]};ma.prototype.start=
function(){try{this.plugin.Media.open(this.getMediaName(),this.media.duration,this.getConfigurationData().playerName),this.started=!0,this.play()}catch(a){this.error(a)}};ma.prototype.play=function(){!0!==this.started&&this.start();try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime||0)}catch(a){this.error(a)}};ma.prototype.pause=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime)}catch(a){this.error(a)}};ma.prototype.seeking=function(){try{this.plugin.Media.stop(this.getMediaName(),
this.video.currentTime)}catch(a){this.error(a)}};ma.prototype.seeked=function(){try{this.plugin.Media.play(this.getMediaName(),this.video.currentTime)}catch(a){this.error(a)}};ma.prototype.ended=function(){try{this.plugin.Media.stop(this.getMediaName(),this.video.currentTime),this.plugin.Media.close(this.getMediaName()),this.started=!1}catch(a){this.error(a)}};var W=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];W.__super__.constructor.call(this,a)};f(W,T);W.NAME=w.NAME;W.prototype.defaults=
{};W.prototype.hidden=!0;W.prototype.tracks=null;W.prototype.track=null;W.prototype.activeCaptions=null;W.prototype.captions=null;W.prototype.loaded=!0;W.prototype.useNative=function(){var a;return null!=this.facade.app.video.textTracks&&3===(null!=(a=window.TextTrackCue)?a.length:void 0)};W.prototype.getTracks=function(){return this.tracks};W.prototype.setTracks=function(a){var b,c,e,d,f,g,k=this;this.tracks=[];this.track=null;b=a.length;e=0;d=function(){e++;e===b&&(k.sendNotification(A.TRACKS_LOADED,
k.tracks),k.autoSelectTrack())};f=0;for(g=a.length;f<g;f++)c=a[f],c=new nc(c,d),this.tracks.push(c);return a};W.prototype.getTrack=function(){return this.track};W.prototype.setTrack=function(a){this.track=a;this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(A.TRACK_SELECTED,this.track);return a};W.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};W.prototype.selectTrackByLanguage=function(a){var b,c,e,d,
f;f=this.tracks;e=0;for(d=f.length;e<d;e++)if(b=f[e],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};W.prototype.getHidden=function(){return this.hidden};W.prototype.setHidden=function(a){return this.hidden=a};W.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.app.retrieveProxy(oa.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var Qc=function(a,b){Qc.__super__.constructor.call(this,
a,b)};f(Qc,Z);Qc.NAME="ComscorePlugin";Qc.prototype.moduleName="comscore";Qc.prototype.createController=function(){this.registerCommand(d.STARTED,he);this.registerCommand(d.CONTENT_CHANGED,he);this.registerCommand(m.AD_STARTED,Ff)};Qc.prototype.createModel=function(){this.registerProxy(new Ub(this.config))};Qc.prototype.listNotificationInterests=function(){return[d.STARTED,m.AD_STARTED,d.CONTENT_CHANGED]};r.registerPlugin("comscore","html",Qc);r.registerPlugin("comscore","flash",ge);var Vb=function(a){var b;
Vb.__super__.constructor.call(this,a);b=a.retrieveProxy(W.NAME);this.getHidden=b.getHidden.bind(b);this.setHidden=function(b){a.sendNotification(A.VISIBILITY_CHANGE,!b);return b};this.getTracks=b.getTracks.bind(b);this.getTrack=b.getTrack.bind(b);this.setTrack=b.setTrack.bind(b);this.selectTrackByIndex=b.selectTrackByIndex.bind(b);this.selectTrackByLanguage=b.selectTrackByLanguage.bind(b);this.changeSettings=function(b){a.sendNotification(A.SETTINGS_CHANGE,b);return b}};f(Vb,yb);Vb.prototype.getHidden=
function(){};Vb.prototype.setHidden=function(a){};Vb.prototype.getTracks=function(){};Vb.prototype.getTrack=function(){};Vb.prototype.setTrack=function(a){};Vb.prototype.selectTrackByIndex=function(a){};Vb.prototype.selectTrackByLanguage=function(a){};Vb.prototype.changeSettings=function(a){};var Rc=function(a,b){Rc.__super__.constructor.call(this,a,b)};f(Rc,Z);Rc.NAME="OmniturePlugin";Rc.prototype.moduleName="omniture";Rc.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,
If);this.registerCommand(d.ENDED,ie);this.registerCommand(d.STARTED,Nf);this.registerCommand(d.PAUSE,Jf);this.registerCommand(d.SEEKING,Kf);this.registerCommand(d.SEEKED,Lf);this.registerCommand(d.CHANGE_CONTENT,ie);this.registerCommand(d.CONTENT_CHANGED,Mf)};Rc.prototype.createModel=function(){null!=this.config.heartbeat&&!0===this.config.heartbeat.enabled?this.registerProxy(new X(this.config)):this.registerProxy(new ma(this.config))};Rc.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,
d.CHANGE_CONTENT,d.CONTENT_CHANGED,d.TIME_UPDATE,d.ENDED,d.STARTED,d.PLAY,d.PAUSE,d.SEEKING,d.SEEKED,m.AD_LOADED,m.AD_STARTED,m.AD_PLAY,m.AD_PAUSE,m.AD_TIME_REMAINING,m.BREAK_END]};r.registerPlugin("omniture","html",Rc);r.registerPlugin("omniture","flash",je);var zd=function(a,b){null==b&&(b={});zd.__super__.constructor.call(this,a,b)};f(zd,G);zd.NAME="InfoWrapper";zd.prototype.listNotificationInterests=function(){return[p.CREATE_FLASH_VARS,p.CREATE_XML,p.SHARE,p.SHARE_REQUEST]};zd.prototype.handleNotification=
function(a){var b,c,e,d,f,g,k,m;d=a.getName();a=a.getBody();switch(d){case p.CREATE_XML:d=a.xml;d.getElementsByTagName("application");f=d.getElementsByTagName("view")[0];c=d.getElementsByTagName("element");k=0;for(m=c.length;k<m;k++)if(b=c[k],"infoOverlayAdvanced"===b.getAttribute("id")){e=b;break}if(null==f)return;null==e&&(e=d.createElement("element"),e.setAttribute("id","infoOverlayAdvanced"),e.setAttribute("displayStates","preplay,paused,ns,fs,mouseover"),f.insertBefore(e,f.childNodes[0]));b=
d.createElement("data");e.appendChild(b);null!=this.config.title&&(e=d.createElement("property"),e.setAttribute("key","title"),f=K.createTextContent(d,this.config.title),e.appendChild(f),b.appendChild(e));null!=this.config.description&&(e=d.createElement("property"),e.setAttribute("key","description"),f=K.createTextContent(d,this.config.description),e.appendChild(f),b.appendChild(e));null!=this.config.more&&(e=d.createElement("property"),e.setAttribute("key","more"),f=K.createTextContent(d,this.config.more),
e.appendChild(f),b.appendChild(e));null!=this.config.less&&(e=d.createElement("property"),e.setAttribute("key","less"),f=K.createTextContent(d,this.config.less),e.appendChild(f),b.appendChild(e));null!=this.config.provider&&(c=d.createElement("property"),c.setAttribute("key","provider"),b.appendChild(c),null!=this.config.provider.name&&(e=d.createElement("property"),e.setAttribute("key","name"),f=K.createTextContent(d,this.config.provider.name),e.appendChild(f),c.appendChild(e)),null!=this.config.provider.image&&
(e=d.createElement("property"),e.setAttribute("key","image"),f=K.createTextContent(d,this.config.provider.image),e.appendChild(f),c.appendChild(e)));break;case p.SHARE:case p.SHARE_REQUEST:g="share"}if(null!=g)return this.dispatchEvent(new R(g,a))};r.registerPlugin("info","flash",zd);var Pa=function(){Pa.__super__.constructor.call(this)};f(Pa,nb);Pa.prototype.componentName="info";Pa.prototype.title=null;Pa.prototype.shortDescription=null;Pa.prototype.icon=null;Pa.prototype.provider=null;Pa.prototype.onRegister=
function(){this.title=this.create("info-title");this.provider=this.create("info-provider");this.shortDescription=this.create("info-short-description");this.icon=this.create("info-icon",this,"img");this.dataChangedHandler();Pa.__super__.onRegister.call(this)};Pa.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Pa.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.MEDIA_CHANGE:this.dataChangedHandler()}};Pa.prototype.moreClicked=function(a){return this.classList.add("open")};
Pa.prototype.closeClicked=function(a){return this.classList.remove("open")};Pa.prototype.dataChangedHandler=function(){var a;null!=this.plugin.value.title&&(this.title.textContent=this.plugin.value.title);null!=(null!=(a=this.plugin.value.provider)?a.image:void 0)&&(this.icon.src=this.plugin.value.provider.image);a=getComputedStyle(this.title);this.title.clientHeight>parseInt(a.lineHeight)?(this.classList.add("info-small"),this.shortDescription.innerHTML=this.provider.innerHTML=""):(this.classList.remove("info-small"),
this.truncateDescription(this.plugin.value.description,this.plugin.value.more),this.provider.textContent=null!=this.plugin.value.provider.name?""+this.plugin.value.provider.name:"")};Pa.prototype.truncateDescription=function(a){var b,c,e,d,f;c="";e=this.shortDescription;e.textContent="";if(null!=a)for(b=d=0,f=a.length;d<f;b=++d)if(b=a[b],e.textContent=c+b+"...",e.scrollHeight>e.clientHeight){e.textContent=c+"...";break}else c+=b};var Ad=function(a){Ad.__super__.constructor.call(this,a)};f(Ad,fa);
Ad.prototype.configurationName="info";Ad.NAME=w.NAME;Ad.prototype.defaults={title:"#{media.title}",description:"#{media.description}",provider:{},more:"read more",less:"less"};var eb=function(a,b){eb.__super__.constructor.call(this,a,b)};f(eb,Xa);eb.NAME="CaptioningPlugin";eb.prototype.featureName="captioning";eb.prototype.moduleName="captioning";eb.prototype.createController=function(){this.registerCommand(d.CHANGE_MEDIA,Vf);this.registerCommand(d.STARTED,Xf);this.registerCommand(d.TIME_UPDATE,Uf);
this.registerCommand(A.VISIBILITY_CHANGE,Wf)};eb.prototype.createModel=function(){this.registerProxy(new W(this.config))};eb.prototype.createView=function(){var a;a=new mc;this.registerMediator(a);this.registerMediator(new ba(a.viewComponent))};eb.prototype.createAPI=function(){return new Vb(this)};eb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,A.TOGGLE_SETTINGS_VISIBILITY]};eb.prototype.listNotificationPublications=function(){var a,b;return eb.__super__.listNotificationPublications.call(this).concat(function(){var c;
c=[];for(a in A)b=A[a],b!==A.TOGGLE_SETTINGS_VISIBILITY&&c.push(b);return c}()).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,Tf.UPDATE_SETTINGS,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};eb.prototype.listNotificationEvents=function(){return[A.VISIBILITY_CHANGE,A.ENABLED]};r.registerPlugin("captioning","html",eb);var Ea=function(a){Ea.__super__.constructor.call(this,a)};f(Ea,fa);Ea.prototype.configurationName="imaoverlay";Ea.NAME="IMAOveralyProxy";Ea.prototype.defaults={adTagUrl:null,duration:15,interval:30,
delay:30};Ea.prototype.durationTimer=null;Ea.prototype.intervalTimer=null;Ea.prototype.delayTimer=null;Ea.prototype.stop=function(){clearTimeout(this.durationTimer);clearTimeout(this.delayTimer);clearTimeout(this.intervalTimer)};Ea.prototype.play=function(){var a=this;this.stop();this.delayTimer=setTimeout(function(){return a.requestAd()},1E3*this.value.delay)};Ea.prototype.requestAd=function(){var a;a=this.getValue("adTagUrl");null!=a&&(a=a.replace("[timestamp]",(new Date).getTime()),a=a.replace("__random-number__",
(new Date).getTime()));g.get(a,{withCredentials:!0,onload:this.vastLoadHandler.bind(this),onerror:this.error.bind(this)},!1)};Ea.prototype.vastLoadHandler=function(a){var b,c,e,d,f;a=a.target.responseXML;if(null!=a)try{b=a.querySelector("NonLinear"),null!=b?(f=null!=a.querySelector("Impression")?a.querySelector("Impression").textContent:"",e=null!=a.querySelector("Tracking[event\x3dcreativeView]")?a.querySelector("Tracking[event\x3dcreativeView]").textContent:"",c=null!=b.querySelector("NonLinearClickThrough")?
b.querySelector("NonLinearClickThrough").textContent:"",d={src:b.querySelector("StaticResource").textContent,width:b.getAttribute("width"),height:b.getAttribute("height"),tracking:[f,e],href:c},this.displayAd(d)):this.error("No overlay was returned")}catch(g){this.error(g)}};Ea.prototype.error=function(a){this.facade.logger.error("[AMP IMA OVERLAY ERROR]",a);this.stop()};Ea.prototype.displayAd=function(a){var b=this;this.sendNotification("ima/addOverlay",a);this.durationTimer=setTimeout(function(){b.sendNotification("ima/removeOverlay");
return b.intervalTimer=setTimeout(function(){return b.requestAd()},1E3*b.value.interval)},1E3*this.value.duration)};var ke=function(){return ke.__super__.constructor.apply(this,arguments)};f(ke,V);ke.NAME="IMAWrapper";ke.prototype.createXML=function(a){var b,c,e,d,f,g,k,m,n;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","dfp");b.appendChild(c);d=[{value:this.config.adTagUrl,
key:"DFP_AD_TAG_URL"},{value:this.config.maxBitrate,key:"DFP_MAX_BITRATE"},{value:this.config.sceneMarkers,key:"displaySceneMarkers"},{value:this.config.ppid,key:"DFP_PPID"}];f=0;for(k=d.length;f<k;f++)e=d[f],null!=e.value&&this.createProperty(a,e.key,e.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);null!=this.config.params&&(null!=this.config.params.adTag&&this.createProperty(a,"DFP_AD_TAG_PARAMS",this.config.params.adTag,c),null!=this.config.params.manual&&
this.createProperty(a,"DFP_MANUAL_PARAMS",this.config.params.manual,c));if(null!=this.config.companions){d=[];f=[];n=this.config.companions;k=0;for(m=n.length;k<m;k++)e=n[k],d.push(e.width+"x"+e.height),f.push(e.id);this.createProperty(a,"DFP_SIZE",d.join(","),c);this.createProperty(a,"COMPANION_ID",f.join(","),c)}null!=this.config.disableCompanionAds&&this.createProperty(a,"disableCompanionAds",this.config.disableCompanionAds,c);if(null!=this.config.overlay)for(!0===this.config.overlay.enabled&&
(g=a.createElement("overlay"),b.appendChild(g)),d=[{value:"dfp",key:"OVERLAY_AD_PARTNER"},{value:this.config.overlay.adTagUrl,key:"OVERLAY_AD_BASE_URL"},{value:this.config.overlay.delay,key:"OVERLAY_AD_DELAY"},{value:this.config.overlay.interval,key:"OVERLAY_AD_INTERVAL"},{value:this.config.overlay.duration,key:"OVERLAY_AD_DURATION"},{value:""+this.config.overlay.width+"x"+this.config.overlay.height,key:"OVERLAY_AD_SIZE"}],b=0,c=d.length;b<c;b++)e=d[b],null!=e.value&&this.createProperty(a,e.key,e.value,
g);return a};var u=function(a){u.__super__.constructor.call(this,a);this.intervals=[];this.loadedmetadata=this.onLoadedMetadata.bind(this)};f(u,B);u.NAME=B.NAME;u.prototype.defaults={plugin:null,adTagUrl:null,overlay:null,width:null,height:null,maxBitrate:-1,ppid:null,companions:null};u.prototype.key="ima";u.prototype.intervals=null;u.prototype.adDisplayContainer=null;u.prototype.adDisplayContainerInitialized=!1;u.prototype.adsLoader=null;u.prototype.adsRenderingSettings=null;u.prototype.adsManagerLoaded=
!1;u.prototype.adsManager=null;u.prototype.cuepoints=null;u.prototype.adLoaded=!1;u.prototype.playWhenLoaded=!1;u.prototype.contentHasEnded=!1;u.prototype.adTagUrl=null;u.prototype.viewMode=null;u.prototype.playbackCore=null;u.prototype.loadedmetadata=null;u.prototype.setEnabled=function(a){var b;u.__super__.setEnabled.call(this,a);!1===a&&(null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy(),this.getInProgress()&&this.contentPlay());return a};u.prototype.getLoaded=function(){return null!=
("undefined"!==typeof google&&null!==google?google.ima:void 0)};u.prototype.getScript=function(){return this.value.plugin};u.prototype.onLoadedMetadata=function(a){a.target.removeEventListener("loadedmetadata",this.loadedmetadata);this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};u.prototype.initialize=function(){};u.prototype.ready=function(){this.viewMode=google.ima.ViewMode.NORMAL;this.facade.app.getViewComponent().addEventListener("resize",this.resize.bind(this));null!=this.config.vpaidAllowed&&
google.ima.settings.setVpaidAllowed(this.config.vpaidAllowed);this.adDisplayContainer=this.createPlugin();this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer);this.adsRenderingSettings=new google.ima.AdsRenderingSettings;this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1);this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)};u.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container)};
u.prototype.engage=function(a){var b;!1!==this.getEnabled()&&(u.__super__.engage.call(this),!0===this.adsManagerLoaded&&!1===this.contentHasEnded&&null!=(b=this.adsManager)&&"function"===typeof b.destroy&&b.destroy(),this.playWhenLoaded=this.adsManagerLoaded=this.contentHasEnded=this.adsManagerLoaded=!1)};u.prototype.setVolume=function(a){var b;null!=(b=this.adsManager)&&b.setVolume(a);return a};u.prototype.getVolume=function(){var a;return null!=(a=this.adsManager)?a.getVolume():void 0};u.prototype.requestAd=
function(){var a,b,c,e,d,f;this.sendNotification(m.REQUEST,this.adVO);e=this.facade.app.getViewComponent().clientWidth;c=this.facade.app.getViewComponent().clientHeight;a=new google.ima.AdsRequest;this.adTagUrl=this.getValue("adTagUrl");b=this.getValue("adsResponse");null!=b&&""!==b?a.adsResponse=g.read(b,null,g.mimeTypes.txt):a.adTagUrl=this.adTagUrl;if(null==a.adsResponse&&null==a.adTagUrl)this.onAdError("No valid adTagUrl or adsResponse provided.");else a.linearAdSlotWidth=e,a.linearAdSlotHeight=
c,a.nonLinearAdSlotWidth=(null!=(d=this.value.overlay)?d.width:void 0)||e,a.nonLinearAdSlotHeight=(null!=(f=this.value.overlay)?f.height:void 0)||c,b=this.adsLoader.getSettings(),null!=this.config.ppid&&b.setPpid(this.getValue("ppid")),this.adsLoader.requestAds(a)};u.prototype.requestOverlay=function(){var a,b;b=this.value.overlay;null!=b&&(a=new google.ima.AdsRequest,a.adTagUrl=b.adTagUrl,a.nonLinearAdSlotWidth=b.width||300,a.nonLinearAdSlotHeight=b.height||50,this.adsLoader.requestAds(a))};u.prototype.start=
function(){var a;this.playbackCore=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();a=this.facade.app.getVideo();this.playbackCore.setEnabled(!1);a.src=this.playbackCore.getSrc();a.addEventListener("loadedmetadata",this.loadedmetadata);a.load();if(!1===u.__super__.start.call(this))return!1;!0!==this.adDisplayContainerInitialized&&(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0);!0===this.canPlay()?this.startAd():(this.playWhenLoaded=!0,this.requestAd())};u.prototype.canPlay=
function(){return!0===this.adsManagerLoaded};u.prototype.startAd=function(){var a;this.playWhenLoaded=!1;try{a=this.facade.app.retrieveProxy(n.NAME).getVolume(),this.setVolume(a),null==this.viewMode&&(this.viewMode=google.ima.ViewMode.NORMAL),this.adsManager.init(this.facade.app.getViewComponent().clientWidth,this.facade.app.getViewComponent().clientHeight,this.viewMode),this.adsManager.start()}catch(b){this.error(b)}};u.prototype.resize=function(a){var b;null!=a&&(this.viewMode=a===ca.FULL_SCREEN?
google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL);null!=(b=this.adsManager)&&b.resize(this.facade.app.getViewComponent().clientWidth,this.facade.app.getViewComponent().clientHeight,this.viewMode)};u.prototype.onAdsManagerLoaded=function(a){var b;this.facade.logger.log("IMA: adsManagerLoaded");this.adsRenderingSettings.bitrate=this.getValue("maxBitrate");this.adsRenderingSettings.autoAlign=!0;this.adsRenderingSettings.useStyledNonLinearAds=!0;null!=(b=this.adsManager)&&"function"===typeof b.destroy&&
b.destroy();this.adsManager=a.getAdsManager(this.facade.app.video,this.adsRenderingSettings);this.adsManagerLoaded=!0;this.cuePoints=this.adsManager.getCuePoints();this.facade.app.sendNotification(d.ADD_CUE_POINTS,this.cuePoints);a=this.onAdEvent.bind(this);this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPause.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,
this.contentPlay.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUME,this.onAdResumed.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,
this.onAdClick.bind(this));this.adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,a);this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,a);this.canPlay()&&!0===this.playWhenLoaded&&this.startAd()};u.prototype.onAdClick=function(a){!1===(null!=a?a.getAd().isLinear():void 0)?this.facade.app.sendNotification(d.PAUSE):this.getPaused()||
this.pause()};u.prototype.onAdPaused=function(a){this.setPaused(!0);this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PAUSED);this.facade.app.sendNotification(d.CHANGE_ACTIVE_STATE,Ra.ACTIVE);this.facade.app.sendNotification(m.AD_PAUSED,this.adVO)};u.prototype.onAdResumed=function(a){this.setPaused(!1);this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING)};u.prototype.onAdEvent=function(a){var b,c,e,f,h,g;b=a.getAd();null!=this.adVO&&(this.adVO.metadata=b);switch(a.type){case google.ima.AdEvent.Type.LOADED:b.isLinear()?
(a=b.getAdPodInfo().getPodIndex(),c=0===a?"preroll":-1===a?"postroll":"midroll",this.adVO=new Na(b.getAdId(),b.getAdId(),b.getDuration(),a,c,"ima",null,null,this.adTagUrl,b,b.getAdPodInfo().getTotalAds()),this.sendNotification(m.AD_LOADED,this.adVO),this.sendNotification(m.AD_DURATION_CHANGE,this.adVO),"midroll"!==c&&"postroll"!==c||this.engageAds()):(this.facade.app.sendNotification(d.ADD_APPLICATION_STATE,"ad-overlaymode"),this.contentPlay());break;case google.ima.AdEvent.Type.STARTED:b.isLinear()&&
(this.setInProgress(!0),this.adVO.position=b.getAdPodInfo().getAdPosition(),this.sendNotification(m.AD_STARTED,this.adVO),this.intervals.push(setInterval(this.onAdTimeUpdate.bind(this),300)),this.facade.app.sendNotification(d.CHANGE_PLAY_STATE,I.PLAYING),this.sendNotification(m.AD_PLAY,this.adVO));try{e=[];g=this.getConfigurationData().companions;f=0;for(h=g.length;f<h;f++)c=g[f],e=e.concat(b.getCompanionAds(c.width,c.height));0<(null!=e?e.length:void 0)&&this.setCompanions(e)}catch(k){this.facade.logger.error("[AMP IMA ERROR]",
"Could not retrieve companion ads:",k)}break;case google.ima.AdEvent.Type.COMPLETE:b.isLinear()&&this.sendNotification(m.AD_ENDED,this.adVO);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.sendNotification(m.FIRST_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.MIDPOINT:this.sendNotification(m.MIDPOINT,this.adVO);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.sendNotification(m.THIRD_QUARTILE,this.adVO);break;case google.ima.AdEvent.Type.LOG:this.sendNotification(m.LOG,this.adVO)}};
u.prototype.onAdTimeUpdate=function(a){this.sendNotification(m.AD_TIME_REMAINING,this.adsManager.getRemainingTime())};u.prototype.onAdError=function(a){a=(null!=a?a.getError():void 0)||a;this.error(a);this.contentPlay()};u.prototype.play=function(){var a;u.__super__.play.call(this);try{null!=(a=this.adsManager)&&a.resume(),this.sendNotification(m.AD_RESUME)}catch(b){this.facade.logger.error("[AMP IMA ERROR]","resume",b)}};u.prototype.pause=function(){u.__super__.pause.call(this);try{this.adsManager.pause()}catch(a){this.facade.logger.error("[AMP IMA ERROR]",
"pause",a)}};u.prototype.breakEnd=function(){var a,b;b=this.intervals;a=0;for(b=b.length;a<b;a++)clearInterval(this.intervals.pop());u.__super__.breakEnd.call(this);a=this.facade.retrieveProxy(Ea.NAME);null!=a&&a.play()};u.prototype.setCompanions=function(a){var b,c,e,d,f;c=[];e=0;for(d=a.length;e<d;e++)b=a[e],c.push({data:b.getContent(),type:null!=(f=b.getContentType())?f.toLowerCase():void 0,width:b.getWidth(),height:b.getHeight(),metadata:b});u.__super__.setCompanions.call(this,c);return a};u.prototype.contentPause=
function(){this.sendNotification(d.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);u.__super__.contentPause.call(this);this.sendNotification(m.BREAK_START,this.adVO)};u.prototype.contentPlay=function(){var a,b;this.facade.logger.log("IMA: contentPlay");this.sendNotification(d.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"]);this.sendNotification(m.BREAK_END,this.adVO);"midroll"===(null!=(a=this.adVO)?a.type:void 0)&&"desktop"===g.getDevice()&&(a=this.facade.app.getAPI(),
a.setCurrentTime(Math.floor(a.getCurrentTime())));"postroll"===(null!=(b=this.adVO)?b.type:void 0)?this.facade.app.sendNotification(d.ENDED):u.__super__.contentPlay.call(this)};u.prototype.contentEnded=function(){var a;this.facade.logger.log("IMA: contentComplete");this.contentHasEnded=!0;try{null!=(a=this.adsLoader)&&"function"===typeof a.contentComplete&&a.contentComplete()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","contentComplete",b)}};u.prototype.terminateAd=function(){var a;try{null!=
(a=this.adsManager)&&a.stop()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAd",b)}this.breakEnd();this.contentPlay()};u.prototype.terminateAllAds=function(){var a;try{null!=(a=this.adsManager)&&a.destroy()}catch(b){this.facade.logger.error("[AMP IMA ERROR]","terminateAllAds",b)}this.breakEnd();this.contentPlay()};var Yf=function(){Yf.__super__.constructor.call(this)};f(Yf,puremvc.SimpleCommand);Yf.prototype.execute=function(a){this.facade.sendNotification(d.ADD_APPLICATION_STATE,
"ad-overlay-mode")};var Zf=function(){Zf.__super__.constructor.call(this)};f(Zf,puremvc.SimpleCommand);Zf.prototype.execute=function(a){this.facade.retrieveProxy(Ea.NAME).stop();this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,"ad-overlay-mode")};var fb=function(){fb.__super__.constructor.call(this)};f(fb,Y);fb.prototype.componentName="ad-overlay";fb.prototype.anchor=null;fb.prototype.image=null;fb.prototype.tracker=null;fb.prototype.tracker2=null;fb.prototype.closeButton=null;fb.prototype.closeText=
null;fb.prototype.onRegister=function(){var a=this;this.anchor=this.create("ad-overlay-anchor");this.anchor.target="_blank";this.image=this.create("ad-overlay-img",this.anchor,"img");this.tracker=this.create();this.tracker.width=0;this.tracker.height=0;this.tracker2=this.create(null,this,"img");this.tracker2.width=0;this.tracker2.height=0;this.closeButton=this.create("ad-close-button",this.anchor);this.closeButton.onclick=function(b){b.stopImmediatePropagation();a.sendNotification("ima/removeOverlay");
return!1};this.closeText=this.createText("ad-close-text","x",this.closeButton);fb.__super__.onRegister.call(this)};fb.prototype.listNotificationInterests=function(){return["ima/addOverlay","ima/removeOverlay"]};fb.prototype.handleNotification=function(a){switch(a.getName()){case "ima/addOverlay":a=a.getBody(),this.image.src=a.src,this.anchor.href=a.href,this.tracker.src=a.tracking[0],this.tracker2.src=a.tracking[1]}};var $f=function(){$f.__super__.constructor.call(this)};f($f,puremvc.SimpleCommand);
$f.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).ready()};var ag=function(){ag.__super__.constructor.call(this)};f(ag,puremvc.SimpleCommand);ag.prototype.execute=function(a){this.facade.retrieveProxy(u.NAME).resize(a.getBody())};var Fb=function(a){Fb.__super__.constructor.call(this,a)};f(Fb,u);Fb.NAME=u.NAME;Fb.prototype.createPlugin=function(){return new google.ima.AdDisplayContainer(this.facade.getViewComponent().container,this.facade.app.getVideo(),this.facade.getViewComponent().container)};
Fb.prototype.engage=function(a){Fb.__super__.engage.call(this,a);this.sendNotification(d.DISABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])};Fb.prototype.reset=function(a){Fb.__super__.reset.call(this,a);this.sendNotification(d.ENABLE_VIDEO_EVENTS,["paused","ended","durationchange","error"])};Fb.prototype.breakStart=function(){this.playbackCore=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(!1)};Fb.prototype.breakEnd=function(){Fb.__super__.breakEnd.call(this);
this.playbackCore.setEnabled(!0)};var Bc=function(a,b){Bc.__super__.constructor.call(this,a,b)};f(Bc,Z);Bc.NAME="InfoPlugin";Bc.prototype.moduleName="info";Bc.prototype.createModel=function(){this.registerProxy(new Ad(this.config))};Bc.prototype.createView=function(){this.registerMediator(new Pa)};Bc.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};r.registerPlugin("info","html",Bc);r.registerPlugin("info","external",Bc);var Gb=function(a,b){null==b&&(b={});Gb.__super__.constructor.call(this,
a,b)};f(Gb,G);Gb.NAME="ShareWrapper";Gb.prototype.controls=["share","facebook","twitter"];Gb.prototype.createFlashVars=function(a){null==a.share_mode&&(a.share_mode=2);return a};Gb.prototype.createXML=function(a){this.createControls(a);return a};Gb.prototype.createControls=function(a){var b,c,e,d,f;if(!1!==this.hasControls(a))for(this.config.share=!0,f=this.controls=this.getControls(a),e=0,d=f.length;e<d;e++)c=f[e],b=""+c+"Btn",null==controls[b]&&!0===this.config[c]&&this.createElement(a,b)};Gb.prototype.listNotificationInterests=
function(){return Gb.__super__.listNotificationInterests.call(this).concat([p.SHARE,p.SHARE_REQUEST])};Gb.prototype.handleNotification=function(a){var b,c;Gb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.SHARE:case p.SHARE_REQUEST:c="share"}null!=c&&this.dispatchEvent(new R(c,a))};r.registerPlugin("share","flash",Gb);var ob=function(){ob.__super__.constructor.call(this)};f(ob,nb);ob.prototype.componentName="share";ob.prototype.shareControl=null;ob.prototype.shareSeparator=
null;ob.prototype.embed=null;ob.prototype.onRegister=function(){this.sendNotification(d.ADD_CONTROL_STATE,"share-enabled");this.shareControl=this.create(["share","control"],!1);this.shareSeparator=this.create(["share","separator"],this.shareControl);this.createButton("share");!0===this.plugin.getFacebook()&&this.createButton("facebook");!0===this.plugin.getTwitter()&&this.createButton("twitter");this.sendNotification(d.ADD_CONTROL,this.shareControl);ob.__super__.onRegister.call(this)};ob.prototype.createButton=
function(a){a=new ab(null,this.shareControl,null,a,this.clickHandler.bind(this,a));this.facade.registerMediator(a)};ob.prototype.clickHandler=function(a,b){b.stopImmediatePropagation();this.sendNotification(d.DISPATCH_EVENT,new R("share",{provider:a,link:this.plugin.getLink(),embed:this.plugin.getEmbed()}));return!1};ob.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};ob.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:null!=
a.embed?this.sendNotification(d.ADD_CONTROL_STATE,"share-enabled"):this.sendNotification(d.REMOVE_CONTROL_STATE,"share-enabled")}};var Fa=function(a){Fa.__super__.constructor.call(this,a)};f(Fa,T);Fa.NAME=w.NAME;Fa.prototype.defaults={facebook:!1,twitter:!1};Fa.prototype.loaded=!0;Fa.prototype.link=null;Fa.prototype.embed=null;Fa.prototype.getEmbed=function(){return this.embed};Fa.prototype.setEmbed=function(a){return this.embed=a};Fa.prototype.getLink=function(){return this.link};Fa.prototype.setLink=
function(a){return this.link=a};Fa.prototype.getFacebook=function(){return this.getConfigurationData().facebook};Fa.prototype.setFacebook=function(a){return this.data.facebook=a};Fa.prototype.getTwitter=function(){return this.getConfigurationData().twitter};Fa.prototype.setTwitter=function(a){return this.data.twitter=a};var bg=function(){bg.__super__.constructor.call(this)};f(bg,puremvc.SimpleCommand);bg.prototype.execute=function(a){var b;this.facade.logger.debug("ShareMediaChangeCommand");a=a.getBody();
b=this.facade.retrieveProxy(Fa.NAME);b.setEmbed(a.embed);b.setLink(a.link)};var pb=function(a){pb.__super__.constructor.call(this,a)};f(pb,w);pb.NAME=w.NAME;pb.prototype.defaults={url:null};pb.prototype.hidden=!0;pb.prototype.getURL=function(){return this.data.url};pb.prototype.setURL=function(a){return this.data.url=a};pb.prototype.getHidden=function(){return this.hidden};pb.prototype.setHidden=function(a){return this.hidden=a};pb.prototype.invoke=function(){var a,b=this;if(null!=this.data.url)return a=
g.get(this.data.url,{onload:function(){null!=a.response&&b.sendNotification("bitratesUpdate",a.response)},onerror:function(a){return b.sendNotification("bitratesUpdate",null)}})};var Qa=function(){Qa.__super__.constructor.call(this)};f(Qa,nb);Qa.prototype.componentName="stats";Qa.prototype.statsText=null;Qa.prototype.statsButton=null;Qa.prototype.bitrateText=null;Qa.prototype.bitrateArr=null;Qa.prototype.onRegister=function(){var a=this;this.sendNotification(d.ADD_CONTROL_STATE,"stats-enabled");this.classList.add("hidden");
this.statsFormat=this.create("stats-text");this.statsBitRate=this.create("stats-text");this.statsPlayBack=this.create("stats-text");this.statsAnalytics=this.create("stats-text");this.statsButton=this.create("stats-button",!1);this.statsButton.onclick=function(b){b.stopImmediatePropagation();a.sendNotification("statsvisibilitychange",!a.plugin.getHidden());return!1};this.sendNotification(d.ADD_CONTROL,this.statsButton);Qa.__super__.onRegister.call(this)};Qa.prototype.listNotificationInterests=function(){return["statsvisibilitychange",
"bitratesUpdate"]};Qa.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case "statsvisibilitychange":this.plugin.getHidden()?this.classList.add("hidden"):(this.classList.remove("hidden"),this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eLoading...\x3c/p\x3e",this.renderStats());break;case "bitratesUpdate":null!=a?this.checkContentType(a):this.statsBitRate.innerHTML=
"\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e\x3cp\x3eNot Available\x3c/p\x3e"}};Qa.prototype.renderStats=function(){var a,b,c,e,d,f,k,m,n,p;try{k=this.facade.app,b=k.getAPI(),e=void 0===b.getMedia()?"Not Available":b.getMedia().type,m=""===b.getSrc()||null===b.getSrc()?"Not Available":b.getSrc(),c=g.getDevice(),null==c&&(c=""),f=""!==this.facade.app.getConfig().mode&&null!==this.facade.app.getConfig().mode&&-1!==this.facade.app.getConfig().mode.indexOf("html")?
this.facade.app.parent.version+", HTML5 Video: "+c:"Not Available",d=null!=(n=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore())?null!=(p=n.playbackCoreName)?p.indexOf("dash"):void 0:void 0,-1<d&&(f+=", dash.js"),a=""===this.facade.app.getAPI().getConfig().mediaanalytics.config||null===this.facade.app.getAPI().getConfig().mediaanalytics.config?"Not Available":this.facade.app.getAPI().getConfig().mediaanalytics.config,this.statsFormat.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+
"stats-header'\x3eStream\x3c/b\x3e\x3c/p\x3e\x3cp\x3eFormat: "+e+"\x3c/p\x3e\x3cp\x3eURL: "+m+"\x3c/p\x3e",this.statsPlayBack.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3ePlayback\x3c/b\x3e\x3c/p\x3e"+f,this.statsAnalytics.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAnalytics\x3c/b\x3e\x3c/p\x3e"+a}catch(q){this.facade.logger.error("[AMP Stats Render Error]:",q)}};Qa.prototype.checkContentType=function(a){var b,c,e,d=this;this.bitrateArr=
[];if("object"===typeof a&&-1!==this.facade.app.getAPI().getMedia().type.indexOf("dash"))g.get(a.URL,{onload:function(a){var b,c,e,f;a=K.parse(a.data.responseText).querySelectorAll("AdaptationSet[mimeType*\x3d'video']")[0].querySelectorAll("Representation");e=0;for(f=a.length;e<f;e++)c=a[e],b=(parseInt(c.getAttribute("bandwidth"))/1E3).toFixed(0),c=c.getAttribute("width")+"x"+c.getAttribute("height"),d.bitrateArr.push({bitrate:b,res:c});return d.constructBitrateText(d.bitrateArr)},onerror:function(a){return d.facade.logger.error("[AMP Stats ERROR]",
a)}});else{e=a.split("#");b=0;for(c=e.length;b<c;b++)a=e[b],-1!==a.indexOf("BANDWIDTH")&&-1!==a.indexOf("RESOLUTION")&&this.bitrateArr.push(this.parseBitrate(a));this.constructBitrateText(this.bitrateArr)}};Qa.prototype.constructBitrateText=function(a){var b,c,e,d;this.bitrateArr=a;this.bitrateText="";this.bitrateArr.sort(function(a,b){var c,e;c=parseInt(a.bitrate);e=parseInt(b.bitrate);return c<e?-1:c>e?1:0});d=this.bitrateArr;a=c=0;for(e=d.length;c<e;a=++c)b=d[a],this.bitrateText+="\x3cp\x3e"+(a+
1)+". "+b.bitrate+" kbps "+b.res+"\x3c/p\x3e";""===this.bitrateText&&(this.bitrateText="\x3cp\x3eNot Available\x3c/p\x3e");this.statsBitRate.innerHTML="\x3cp\x3e\x3cb class\x3d'"+this.classList.prefix+"stats-header'\x3eAdaptive Bitrate Renditions\x3c/b\x3e\x3c/p\x3e"+this.bitrateText};Qa.prototype.parseBitrate=function(a){var b,c,e;c=a.indexOf("BANDWIDTH");b=a.indexOf(",",c+10);b=a.slice(c+10,b);e=a.indexOf("RESOLUTION");c=a.indexOf(",",e+10);if(20<c-e||-1===c)c=a.indexOf("x",e+10)+4;a=a.slice(e+
11,c);return{bitrate:parseInt(b)/1E3,res:a}};var cg=function(){cg.__super__.constructor.call(this)};f(cg,puremvc.SimpleCommand);cg.prototype.execute=function(a){var b;this.facade.logger.debug("StatsVisibilityChangeCommand");b=this.facade.retrieveProxy(pb.NAME);b.setHidden(a.getBody());b.setURL(""+this.facade.app.parent.getSrc());!1===a.getBody()&&b.invoke()};var gb=function(a,b){gb.__super__.constructor.call(this,a,b)};f(gb,ka);gb.NAME="IMAPlugin";gb.prototype.moduleName="ima";gb.prototype.createFullscreenProxy=
function(){return new Fb(this.config)};gb.prototype.createProxy=function(){return new u(this.config)};gb.prototype.isFullscreenDevice=function(){var a;a=navigator.userAgent;return g.isFullscreenDevice()||/Android 4\.[0-1]/.test(a)||/CrKey/.test(a)};gb.prototype.createModel=function(){gb.__super__.createModel.call(this);null!=this.config.overlay&&this.registerProxy(new Ea(this.config.overlay))};gb.prototype.createController=function(){gb.__super__.createController.call(this);null!=this.config.overlay&&
(this.registerCommand("ima/addOverlay",Yf),this.registerCommand("ima/removeOverlay",Zf));this.registerCommand(d.READY,$f);this.registerCommand(d.FULL_SCREEN_CHANGE,ag)};gb.prototype.createView=function(){gb.__super__.createView.call(this);null!=this.config.overlay&&this.registerMediator(new fb)};r.registerPlugin("ima","html",gb);r.registerPlugin("ima","flash",ke);var le=function(a){var b;le.__super__.constructor.call(this,a);b=a.retrieveProxy(pb.NAME);this.getHidden=b.getHidden.bind(b);this.setHidden=
function(b){a.sendNotification("statsvisibilitychange",b);return b}};f(le,yb);le.prototype.getHidden=function(){};le.prototype.setHidden=function(a){};var me=function(){me.__super__.constructor.call(this)};f(me,tc);me.prototype.execute=function(a){this.facade.logger.debug("AISLaunchIDPLoginCommand");this.getProxy().launchIDPLogin(a.getBody())};var hb=function(a){hb.__super__.constructor.call(this,null,null,a)};f(hb,S);hb.prototype.componentName="ais-chooser";hb.prototype.menu=null;hb.prototype.label=
null;hb.prototype.grid=null;hb.prototype.select=null;hb.prototype.login=null;hb.prototype.title=null;hb.prototype.onRegister=function(){var a=this;this.classList.add("hidden");this.title=this.createText("ais-chooser-title","Choose your provider");this.grid=this.create("ais-chooser-grid");this.menu=this.create("ais-chooser-menu");this.label=this.createText("ais-chooser-label","Providers: ",this.menu);this.select=this.create("ais-chooser-select",this.menu,"select");this.login=this.create("ais-chooser-login",
!1,"input");this.login.type="button";this.login.value="Login";k.create(this.login,k.CLICK,function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.sendNotification("launchIDPLogin",a.select.options[a.select.selectedIndex].value);return!1});this.menu.appendChild(this.login);hb.__super__.onRegister.call(this)};hb.prototype.listNotificationInterests=function(){return["chooseAuthProvider","aisathenticating"]};hb.prototype.handleNotification=function(a){var b,c,e,d,f,
g,k,m,n,p,q,r,s,u=this;switch(a.getName()){case "chooseAuthProvider":b=a.getBody();a=b.possible_idps;d=b.footprints||[];g=b.grouped_idps||[];b=this.facade.retrieveProxy(w.NAME);n=b.value.logos;b=null!=n?n.base:void 0;this.grid.innerHTML="";if(null!=g&&null!=(null!=n?n.group:void 0)){s=0;for(c=g.length;s<c;s++)if(f=g[s],f.name===n.group){e=f;break}if(null!=e)for(s=e.members,c=g=0,f=s.length;g<f;c=++g)p=s[c],e=a[p],c=this.create(["ais-chooser-grid-item","ais-chooser-grid-index-"+(c+1)],this.grid),null==
c.dataset&&(c.dataset={}),c.dataset.key=p,c.onclick=function(a){"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation();u.sendNotification("launchIDPLogin",(null!=a.currentTarget?a.currentTarget:a.srcElement).dataset.key);return!1},null!=(null!=(q=a[p].logos)?q[n.key]:void 0)&&(k=this.create("ais-chooser-grid-cell-img",c,"img"),k.alt=e.display_name,r=e.logos[n.key],-1===r.indexOf("http")&&(r=b+r),k.src=r,null==k.dataset&&(k.dataset={}),k.dataset.key=p,c=this.create("ais-chooser-grid-cell-label",
c,"span")),c.innerHTML=e.display_name}""!==this.grid.innerHTML&&(this.classList.add("ais-chooser-featured"),this.label.textContent="Other ");q=this.select.options;c=b=0;for(n=q.length;b<n;c=++b)this.select.options.remove(c);if(0<d.length)for(b=0,n=d.length;b<n;b++)m=d[b],q[q.length]=new Option(""+a[m].display_name,""+m);for(m in a)d=a[m],q[q.length]=new Option(""+d.display_name,""+m);this.classList.remove("hidden");break;case "aisathenticating":this.classList.add("hidden")}};var qb=function(a){qb.__super__.constructor.call(this,
null,null,a)};f(qb,S);qb.prototype.componentName="ais-play";qb.prototype.menu=null;qb.prototype.restart=null;qb.prototype.resume=null;qb.prototype.resumeTime=null;qb.prototype.onRegister=function(){var a=this;this.classList.add("hidden");this.menu=this.create("ais-play-menu");this.restart=this.create("ais-play-restart",this.menu);this.restart.type="button";this.restart.textContent="Restart";this.restart.onclick=function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();
a.play();return!1};this.resume=this.create("ais-play-resume",this.menu);this.resume.type="button";this.resume.value="Resume";this.restart.onclick=function(b){"function"===typeof b.stopImmediatePropagation&&b.stopImmediatePropagation();a.play(a.resumeTime);return!1};qb.__super__.onRegister.call(this)};qb.prototype.play=function(a){this.facade.retrieveProxy(D.NAME).play(a)};qb.prototype.listNotificationInterests=function(){return["choosePlayOptions"]};qb.prototype.handleNotification=function(a){switch(a.getName()){case "choosePlayOptions":this.resumeTime=
a.getBody(),this.classList.remove("hidden")}};var dg=function(){dg.__super__.constructor.call(this)};f(dg,tc);dg.prototype.execute=function(a){this.facade.logger.debug("AISAuthenticateMediaCommand");a=this.facade.app.retrieveProxy(q.NAME).getData().status.reason;"ais"!==a&&"token"!==a||this.getProxy().authorize()};var Bd=function(a){var b;Bd.__super__.constructor.call(this,a);b=a.retrieveProxy(D.NAME);this.authorize=b.authorize.bind(b);this.logout=b.logout.bind(b);this.getIdps=function(){return a.idps}};
f(Bd,yb);Bd.prototype.authorize=function(a){};Bd.prototype.logout=function(){};Bd.prototype.getIdps=function(){};var oc=function(a){oc.__super__.constructor.call(this,null,null,a)};f(oc,S);oc.prototype.componentName="ais-authenticating";oc.prototype.retry=null;oc.prototype.onRegister=function(){this.classList.add("hidden");this.retry=this.create("ais-authenticating-button");this.retry.type="button";this.retry.value="Back to Providers";this.retry.onclick=this.onclick.bind(this);oc.__super__.onRegister.call(this)};
oc.prototype.onclick=function(a){"function"===typeof a.stopImmediatePropagation&&a.stopImmediatePropagation();this.classList.add("hidden");this.sendNotification("startAuthentication");return!1};oc.prototype.listNotificationInterests=function(){return["aisathenticating"]};oc.prototype.handleNotification=function(a){switch(a.getName()){case "aisathenticating":!0===a.getBody()?this.classList.remove("hidden"):this.classList.add("hidden")}};var ne=function(){ne.__super__.constructor.call(this)};f(ne,tc);
ne.prototype.execute=function(a){this.facade.logger.debug("AISStartAuthenticationCommand");this.getProxy().bounce()};var Wb=function(){Wb.__super__.constructor.call(this)};f(Wb,Y);Wb.prototype.componentName="ais";Wb.prototype.chooser=null;Wb.prototype.auth=null;Wb.prototype.play=null;Wb.prototype.onRegister=function(){var a=this;this.classList.add("hidden");setTimeout(function(){a.chooser=new hb(a);a.facade.registerMediator(a.chooser);a.auth=new oc(a);a.facade.registerMediator(a.auth);a.play=new qb(a);
return a.facade.registerMediator(a.play)},20);Wb.__super__.onRegister.call(this)};Wb.prototype.listNotificationInterests=function(){return["startAuthentication","authenticationComplete","choosePlayOptions",d.MEDIA_CHANGE]};Wb.prototype.handleNotification=function(a){switch(a.getName()){case "choosePlayOptions":case "startAuthentication":this.classList.remove("hidden");break;case "authenticationComplete":case d.MEDIA_CHANGE:this.classList.add("hidden"),this.facade.app.sendNotification(d.REMOVE_APPLICATION_STATE,
"authenticating")}};var xa=function(a,b){xa.__super__.constructor.call(this,a,b)};f(xa,Xa);xa.NAME="AISPlugin";xa.prototype.moduleName="ais";xa.prototype.featureName="auth";xa.prototype.idps=null;xa.prototype.createController=function(){this.registerCommand(ja.AUTHORIZE,dg);this.registerCommand("launchIDPLogin",me);this.registerCommand("startAuthentication",ne)};xa.prototype.createModel=function(){this.registerProxy(new D(this.config))};xa.prototype.createView=function(){this.registerMediator(new Wb)};
xa.prototype.createAPI=function(){return new Bd(this)};xa.prototype.listNotificationInterests=function(){return xa.__super__.listNotificationInterests.call(this).concat([d.MEDIA_CHANGE,ja.AUTHORIZE])};xa.prototype.listNotificationPublications=function(){return xa.__super__.listNotificationPublications.call(this).concat([ja.AUTHORIZATION_FAILED,ja.AUTHORIZED,ja.SET_TOKEN,ja.SET_KEY,d.INITIALIZED,d.PLAY,d.SEEK])};xa.prototype.listNotificationEvents=function(){return xa.__super__.listNotificationEvents.call(this).concat(["aisauthenticated"])};
r.registerPlugin("ais","html",xa);var Cc=function(a,b){Cc.__super__.constructor.call(this,a,b)};f(Cc,xa);Cc.NAME="AISFlashPlugin";Cc.prototype.proxy=null;Cc.prototype.startTime=null;Cc.prototype.createController=function(){this.registerCommand("launchIDPLogin",me);this.registerCommand("startAuthentication",ne)};Cc.prototype.setData=function(a){var b;b=this.retrieveProxy(D.NAME);b.data.platformID=a.platformID;b.data.resourceID=a.resourceID;b.data.contentID=a.contentID};Cc.prototype.authorize=function(a){this.retrieveProxy(D.NAME).authorize(a)};
var rb=function(a,b){rb.__super__.constructor.call(this,a,b)};f(rb,Xa);rb.NAME="SharePlugin";rb.prototype.moduleName="share";rb.prototype.featureName="share";rb.prototype.createModel=function(){this.registerProxy(new Fa(this.config))};rb.prototype.createController=function(){this.registerCommand(d.MEDIA_CHANGE,bg)};rb.prototype.createView=function(){this.registerMediator(new ob)};rb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};rb.prototype.listNotificationPublications=function(){return rb.__super__.listNotificationPublications.apply(this,
arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};r.registerPlugin("share","html",rb);r.registerPlugin("share","external",rb);var Hb=function(a,b){var c=this;Hb.__super__.constructor.call(this,a,b);this.plugin=new Cc(this.player,b);this.plugin.getAPI().addEventListener("loggedin",function(a){c.facade.dispatcher.dispatchEvent(a)});a.registerModule(this.plugin)};f(Hb,G);Hb.NAME="AISWrapper";Hb.plugin=null;Hb.prototype.getAPI=function(){return this.plugin.getAPI()};
Hb.prototype.getFeatureName=function(){return"auth"};Hb.prototype.createXML=function(a){var b,c,e,d,f,g;b=a.getElementsByTagName("application")[0];c=a.getElementsByTagName("authentication");null==c||0===c.length?(c=a.createElement("authentication"),b.appendChild(c)):c=c[0];b=a.createElement("vendor");b.setAttribute("id","ais");c.appendChild(b);d=[{value:this.config.platformID,key:"platformID"},{value:this.config.resourceID,key:"resourceID"},{value:this.config.contentID,key:"contentID"}];f=0;for(g=
d.length;f<g;f++)e=d[f],null!=e.value&&(c=a.createElement("property"),c.setAttribute("key",e.key),e=K.createTextContent(a,e.value),c.appendChild(e),b.appendChild(c));return a};Hb.prototype.listNotificationInterests=function(){return Hb.__super__.listNotificationInterests.apply(this,arguments).concat([p.AUTHORIZE,p.TIME_UPDATE,p.ENDED,p.PAUSED,p.CAPABILITY_CHANGE,p.RESET])};Hb.prototype.handleNotification=function(a){var b;Hb.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.AUTHORIZE:this.plugin.startTime=
null;this.plugin.setData(a);b=this.player.retrieveProxy(Lc.NAME);null==b.getSrc()&&b.setSrc(a.media.src);this.plugin.authorize();break;case p.TIME_UPDATE:this.plugin.sendNotification(d.TIME_UPDATE,a);break;case p.ENDED:this.plugin.sendNotification(d.ENDED,a);break;case p.PAUSED:this.plugin.sendNotification(d.PAUSE,a);break;case p.RESET:this.plugin.sendNotification(d.MEDIA_CHANGE,a);break;case p.CAPABILITY_CHANGE:null!=this.plugin.startTime&&"canSeekChange"===a.type&&a.enabled&&this.player.setCurrentTime(this.plugin.startTime)}};
r.registerPlugin("ais","flash",Hb);var z=function(a){this.media={};this.adtimeupdate=this.adTimeupdate.bind(this);this.timeupdate=this.midrollCheck.bind(this);z.__super__.constructor.call(this,a)};f(z,B);z.NAME=B.NAME;z.prototype.context=null;z.prototype.prerollSlots=null;z.prototype.midrollSlots=null;z.prototype.postrollSlots=null;z.prototype.initialized=!1;z.prototype.playWhenLoaded=!1;z.prototype.timeupdate=null;z.prototype.adtimeupdate=null;z.prototype.slot=null;z.prototype.playbackCore=null;
z.prototype.nextMidroll=null;z.prototype.midrollEngaged=!1;z.prototype.defaults={plugin:{js:"http://adm.fwmrm.net/p/vitest-js/AdManager.js"},networkId:"96749",serverUrl:"http://demo.v.fwmrm.net/ad/g/1",profileId:"global-js",siteSectionId:"DemoSiteGroup.01",siteSectionFallbackId:null,videoAssetId:"#{media.guid}",videoAssetFallbackId:null,prerollSlotId:null,midrollSlotId:null,postrollSlotId:null,visitorId:null,keyValues:null,keyValuesString:null,renderers:null};z.prototype.getLoaded=function(){var a,
b;return null!=("undefined"!==typeof tv&&null!==tv?null!=(a=tv.freewheel)?null!=(b=a.SDK)?b.AdManager:void 0:void 0:void 0)};z.prototype.initialize=function(){this.plugin=this.createPlugin();this.plugin.setNetwork(this.value.networkId);this.plugin.setServer(this.value.serverUrl)};z.prototype.createPlugin=function(){return new tv.freewheel.SDK.AdManager};z.prototype.engage=function(a){var b,c,e,f,h,k;z.__super__.engage.call(this,a);this.prerollSlots=[];this.midrollSlots=[];this.postrollSlots=[];this.context=
this.plugin.newContext();this.context.registerVideoDisplayBase(this.facade.app.viewComponent.id);this.context.setProfile(this.value.profileId);this.context.setVideoAsset(this.value.videoAssetId,a.duration,this.value.networkId,null,null,null,null,this.value.videoAssetFallbackId);this.context.setSiteSection(this.value.siteSectionId,this.value.networkId,null,null,this.value.siteSectionFallbackId);null!=this.value.visitorId&&this.context.setVisitor(this.value.visitorId);if(null!=this.value.keyValues)for(e in k=
this.value.keyValues,k)h=k[e],null!=h&&this.context.addKeyValue(e,h);if(null!=this.value.keyValuesString)for(e=this.value.keyValuesString.split("\x26"),h=0,k=e.length;h<k;h++)c=e[h],""!==c&&(c=c.split("\x3d"),this.context.addKeyValue(c[0],c[1]));this.context.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.onRequestComplete.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.onSlotStarted.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,
this.onSlotEnded.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.onAdImpression.bind(this));this.context.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.onAdImpressionEnd.bind(this));this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_START_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);this.context.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_PROGRESS_DETECT_TIMEOUT,1E4,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);
null!=this.value.prerollSlotId&&this.context.addTemporalSlot(this.value.prerollSlotId,tv.freewheel.SDK.ADUNIT_PREROLL,0);if(0<(null!=(b=a.scenes)?b.length:void 0)&&null!=this.value.midrollSlotId){b=[];k=a.scenes;c=e=0;for(h=k.length;e<h;c=++e)f=k[c],0<c&&(c=g.flattenTimecode(f.sceneStartTime),b.push(c),this.context.addTemporalSlot(this.value.midrollSlotId,tv.freewheel.SDK.ADUNIT_MIDROLL,c));this.facade.app.sendNotification(d.ADD_CUE_POINTS,b)}null!=this.value.postrollSlotId&&this.context.addTemporalSlot(this.value.postrollSlotId,
tv.freewheel.SDK.ADUNIT_POSTROLL,a.duration);b=this.value.renderers;if(0<(null!=b?b.length:void 0))for(e=0,h=b.length;e<h;e++)a=b[e],this.context.addRenderer(a.url,a.baseUnit,a.contentType,a.slotType,a.soAdUnit,a.creativeApi,a.parameters);this.initialized=!1;this.context.submitRequest()};z.prototype.onRequestComplete=function(a){var b,c,e,f;this.facade.logger.log("FreeWheelProxy: -\x3e onRequestComplete, success: "+a.success,a);b=[];if(a.success)for(c=this.context.getTemporalSlots(),e=0,f=c.length;e<
f;e++)switch(a=c[e],a.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:null!=this.value.prerollSlotId&&this.prerollSlots.push(a);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:null!=this.value.midrollSlotId&&(b.push(a.getTimePosition()),this.midrollSlots.push(a));break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:null!=this.value.postrollSlotId&&this.postrollSlots.push(a)}0<b.length&&this.sendNotification(d.ADD_CUE_POINTS,b);this.initialized=!0;!0===this.playWhenLoaded&&
this.startAd()};z.prototype.breakStart=function(){var a;this.playbackCore=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();this.playbackCore.setEnabled(!1);a=this.facade.app.getVideo();a.addEventListener("playing",this.playbackCore.handlers.playing);a.addEventListener("pause",this.playbackCore.handlers.pause);a.addEventListener("waiting",this.playbackCore.handlers.waiting)};z.prototype.onAdImpression=function(a){this.sendNotification(m.AD_STARTED,this.adVO)};z.prototype.onAdImpressionEnd=
function(a){this.sendNotification(m.AD_ENDED,this.adVO)};z.prototype.midrollCheck=function(a){a=a.currentTarget;this.playbackCore.getCurrentTime()>=this.nextMidroll.getTimePosition()&&(a.removeEventListener("timeupdate",this.timeupdate),this.engageAds(),this.midrollEngaged=!1,this.playAd(this.nextMidroll))};z.prototype.adTimeupdate=function(a){try{this.slot&&this.sendNotification(m.AD_TIME_REMAINING,this.slot.getTotalDuration()-this.slot.getPlayheadTime())}catch(b){this.facade.logger.error("FreeWheelProxy Error: "+
b)}};z.prototype.onSlotStarted=function(a){this.slot=a.slot;this.facade.app.getVideo().addEventListener("timeupdate",this.adtimeupdate)};z.prototype.onSlotEnded=function(a){this.facade.logger.log("FreeWheelProxy: -\x3e onSlotEnded slotTimePositionClass: "+a.slot.getTimePositionClass());this.facade.app.getVideo().removeEventListener("timeupdate",this.adtimeupdate);a=a.slot.getTimePositionClass();this.slot=null;switch(a){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:this.prerollSlots.length&&(this.prerollSlots.shift(),
this.prerollSlots.length?this.playAd(this.prerollSlots[0]):this.sendNotification(m.BREAK_END));break;case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:a=this.midrollSlots.indexOf(this.nextMidroll);-1<a&&this.midrollSlots.splice(a,1);this.facade.app.getVideo().addEventListener("canplaythrough",this.canplaythrough);this.sendNotification(m.BREAK_END);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:this.postrollSlots.length&&(this.postrollSlots.shift(),this.postrollSlots.length?this.playAd(this.postrollSlots[0]):
this.sendNotification(m.BREAK_END))}};z.prototype.playAd=function(a){this.adVO=new Na(a.getCustomId(),a.getCustomId(),a.getTotalDuration(),a.getTimePosition(),a.getTimePositionClass().toLowerCase(),"freewheel",null,null,null,a);this.sendNotification(m.BREAK_START,this.adVO);this.sendNotification(m.AD_LOADED,this.adVO);try{a.play()}catch(b){this.error(b)}};z.prototype.start=function(){if(!1===z.__super__.start.call(this))return!1;!0===this.canPlay()?this.startAd():this.playWhenLoaded=!0;return!0};
z.prototype.canPlay=function(){return!0===this.initialized};z.prototype.startAd=function(){this.playWhenLoaded=!1;this.prerollSlots.length?this.playAd(this.prerollSlots[0]):this.sendNotification(m.BREAK_END,this.adVO)};z.prototype.play=function(){z.__super__.play.call(this);this.facade.app.getVideo().play()};z.prototype.pause=function(){var a;z.__super__.pause.call(this);a=this.facade.app.getVideo();a.pause();setTimeout(function(){return a.controls=!1},0)};z.prototype.breakEnd=function(){var a;z.__super__.breakEnd.call(this);
null==this.playbackCore&&(this.playbackCore=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore());a=this.facade.app.getVideo();a.removeEventListener("playing",this.playbackCore.handlers.playing);a.removeEventListener("pause",this.playbackCore.handlers.pause);a.removeEventListener("waiting",this.playbackCore.handlers.waiting);this.playbackCore.getEnded()?this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED):(this.playbackCore.setEnabled(!0),this.facade.app.sendNotification(d.PLAY,
!0),this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_PLAYING),this.engageMidrollCheck())};z.prototype.contentStarted=function(){this.engageMidrollCheck()};z.prototype.contentSeek=function(a){a=this.getNextMidroll(a);null!=a&&(null==this.nextMidroll||a.getTimePosition()<this.nextMidroll.getTimePosition())&&(this.midrollEngaged?this.nextMidroll=a:this.engageMidrollCheck())};z.prototype.engageMidrollCheck=function(){var a;0!==(null!=(a=this.midrollSlots)?a.length:void 0)&&!0!==this.midrollEngaged&&
(this.nextMidroll=this.getNextMidroll(this.playbackCore.getCurrentTime()),null!=this.nextMidroll&&(this.midrollEngaged=!0,this.facade.app.getVideo().addEventListener("timeupdate",this.timeupdate)))};z.prototype.getNextMidroll=function(a){var b,c,e,d,f;f=this.midrollSlots;e=0;for(d=f.length;e<d;e++)if(b=f[e],a<b.getTimePosition()){c=b;break}return c};z.prototype.contentEnded=function(){var a;this.facade.logger.log("FreeWheelProxy: -\x3e onContentVideoEnded");this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);
null!=(a=this.postrollSlots)&&a.length?this.playAd(this.postrollSlots[0]):this.context.setVideoState(tv.freewheel.SDK.VIDEO_STATE_COMPLETED)};var oe=function(){return oe.__super__.constructor.apply(this,arguments)};f(oe,V);oe.NAME="FreeWheelWrapper";oe.prototype.createXML=function(a){var b,c,e,d,f,g;c=a.getElementsByTagName("application")[0];b=a.getElementsByTagName("admedia")[0];null==b&&(b=a.createElement("admedia"),c.appendChild(b));c=a.createElement("vendor");c.setAttribute("id","freewheel");
b.appendChild(c);d=[{value:this.config.plugin.swf,key:"FREEWHEEL_AD_MANAGER_URL"},{value:this.config.serverUrl,key:"FREEWHEEL_SERVER_URL"},{value:this.config.networkId,key:"FREEWHEEL_NETWORK_ID"},{value:this.config.profileId,key:"FREEWHEEL_PROFILE"},{value:this.config.siteSectionId,key:"FREEWHEEL_SITE_SECTION_ID"},{value:this.config.siteSectionFallbackId,key:"FREEWHEEL_SITE_SECTION_FALLBACK_ID"},{value:this.config.prerollSlotId,key:"FREEWHEEL_PREROLL_SLOT_ID"},{value:this.config.midrollSlotId,key:"FREEWHEEL_MIDROLL_SLOT_ID"},
{value:this.config.postrollSlotId,key:"FREEWHEEL_POSTROLL_SLOT_ID"},{value:this.config.videoAssetId,key:"FREEWHEEL_VIDEO_ASSET_ID"},{value:this.config.videoAssetFallbackId,key:"FREEWHEEL_VIDEO_ASSET_FALLBACK_ID"},{value:this.config.videoAssetVideoPlayRandom,key:"FREEWHEEL_VIDEO_ASSET_VIDEO_PLAY_RANDOM"},{value:this.config.visitorId,key:"FREEWHEEL_VISITOR_ID"},{value:this.config.keyValuesString,key:"FREEWHEEL_KEY_VALUES_STRING"},{value:"30898",key:"FREEWHEEL_SITE_SECTION_PAGE_VIEW_RANDOM"},{value:"EXACT",
key:"FREEWHEEL_VIDEO_ASSET_DURATION_TYPE"},{value:this.config.visitorHeader,key:"FREEWHEEL_VISITOR_HTTP_HEADER_KEY_VALUE"}];f=0;for(g=d.length;f<g;f++)b=d[f],null!=b.value&&this.createProperty(a,b.key,b.value,c);null!=this.config.position&&c.setAttribute("position",this.config.position);if(null!=this.config.keyValues){b=a.createElement("property");b.setAttribute("key","FREEWHEEL_KEY_VALUE");f=this.config.keyValues;for(e in f)d=f[e],null!=d&&this.createProperty(a,e,d,b);c.appendChild(b)}};var Ga=function(a){Ga.__super__.constructor.call(this,
a.types);this.buffer=a.buffer};f(Ga,Nb);Ga.prototype.initialized=!0;Ga.prototype.playbackCoreName="dash";Ga.prototype.context=null;Ga.prototype.player=null;Ga.prototype.buffer=null;Ga.prototype.isDVR=!1;Ga.prototype.resumecomplete=function(){this.applyHandlers(!0);this.play()};Ga.prototype.load=function(){var a,b=this;this.getVideo().addEventListener("canplay",this.resumeHandlers.canplay);a=this.facade.getVideo();this.context=new Dash.di.DashContext;this.player=new MediaPlayer(this.context);null!=
this.buffer&&(MediaPlayer.dependencies.BufferExtensions.DEFAULT_MIN_BUFFER_TIME=this.buffer);this.player.startup();this.player.addEventListener("error",this.onError.bind(this));this.player.debug.setLogToBrowserConsole(this.facade.logger.enabled);this.player.attachView(a);this.player.setAutoPlay(!1);this.player.attachSource(this.getSrc());this.isDVR="dvr"===this.facade.retrieveProxy(q.NAME).getTemporalType();!0===this.isDVR&&a.addEventListener("timeupdate",function(a){var e,f;try{f=b.player.time(),
e=b.player.duration(),b.sendNotification(d.DISPLAY_TIME,{value:f/e,currentTime:f,duration:e})}catch(g){b.facade.logger.error(g)}})};Ga.prototype.seek=function(a){Ga.__super__.seek.call(this,!0===this.isDVR?this.player.getDVRSeekOffset(a):a)};Ga.prototype.getDuration=function(){return!0===this.isDVR?this.player.duration():Ga.__super__.getDuration.call(this)};Ga.prototype.getStats=function(){return{}};Ga.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",a)};var Xb=function(a,
b){Xb.__super__.constructor.call(this,a,b)};f(Xb,Z);Xb.NAME="StatsPlugin";Xb.prototype.moduleName="stats";Xb.prototype.createModel=function(){this.registerProxy(new pb(this.config))};Xb.prototype.createController=function(){this.registerCommand("statsvisibilitychange",cg)};Xb.prototype.createView=function(){this.registerMediator(new Qa)};Xb.prototype.createAPI=function(){return new le(this)};Xb.prototype.listNotificationPublications=function(){return Xb.__super__.listNotificationPublications.call(this).concat([d.ADD_CONTROL,
d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,"statsvisibilitychange"])};r.registerPlugin("stats","html",Xb);var eg=function(){eg.__super__.constructor.call(this)};f(eg,puremvc.SimpleCommand);eg.prototype.execute=function(a){var b,c,e,f,g=this;e=a.getBody();this.facade.retrieveProxy(n.NAME);a=this.facade.getVideo();null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(y.NAME),c.setDisplayState(e),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},
b.exit=function(){return document.cancelFullscreen()},b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",
b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===ca.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,ca.NORMAL)})):e===ca.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new R("fullscreenchange",e===ca.FULL_SCREEN)))};
var Cd=function(a){Cd.__super__.constructor.call(this,a)};f(Cd,T);Cd.NAME=w.NAME;Cd.prototype.defaults={plugin:null,types:["application/dash+xml"],buffer:null};Cd.prototype.initialize=function(){var a,b;window.MediaSource=window.MediaSource||window.WebKitMediaSource;null!=window.MediaSource&&(this.sendNotification(d.INITIALIZED),a=new Ga(this.getConfigurationData()),b=this.facade.app.retrieveProxy(O.NAME),b.registerPlaybackCore(a))};var wg=[g.mimeTypes.m3u8,g.mimeTypes.mp4,g.mimeTypes.mpd,g.mimeTypes.ism,
g.mimeTypes.webm,g.mimeTypes.mp3],Sc=function(a,b){Sc.__super__.constructor.call(this,a,b)};f(Sc,ka);Sc.NAME="FreeWheelPlugin";Sc.prototype.moduleName="freewheel";Sc.prototype.featureName="ads";Sc.prototype.createProxy=function(){return new z(this.config)};Sc.prototype.isFullscreenDevice=function(){return!1};r.registerPlugin("freewheel","html",Sc);r.registerPlugin("freewheel","flash",oe);var pe=function(){pe.__super__.constructor.call(this)};f(pe,J);pe.prototype.execute=function(a){this.config.launch()};
var fg=function(){fg.__super__.constructor.call(this)};f(fg,J);fg.prototype.execute=function(a){this.config.setFeed(a.getBody())};var gg=function(){gg.__super__.constructor.call(this)};f(gg,J);gg.prototype.execute=function(a){this.config.send({type:"captioning.visibilitychange",details:{visibility:a.getBody()}})};var hg=function(){hg.__super__.constructor.call(this)};f(hg,J);hg.prototype.execute=function(a){this.config.send({type:"captioning.settingschange",details:a.getBody()})};var ig=function(){ig.__super__.constructor.call(this)};
f(ig,J);ig.prototype.execute=function(a){this.facade.logger.debug("ChromeCastReceiverReadyCommand");this.facade.app.getViewComponent().hidden=!1;this.plugin.ready()};var ta=function(a,b){this.receiver=b;ta.__super__.constructor.call(this,a)};f(ta,Nb);ta.prototype.initialized=!0;ta.prototype.player=null;ta.prototype.host=null;ta.prototype.protocol=null;ta.prototype.playbackCoreName="chromecast";ta.prototype.manifest=null;ta.prototype.xhr=null;ta.prototype.trackInfo=null;ta.prototype.receiver=null;
ta.prototype.reset=function(){ta.__super__.reset.call(this);this.manifest=this.xhr=null};ta.prototype.unload=function(){null!=this.player&&(this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle},this.receiver.chromecastPlayer.activeTrackId=null,this.receiver.chromecastPlayer.textTrackStyle=null,this.player.unload(),this.player=null)};ta.prototype.load=function(){var a=this;null!=this.xhr?null!=this.manifest&&this.loadMediaPlayer():
(this.xhr=new XMLHttpRequest,this.xhr.onload=function(b){200===a.xhr.status&&(a.manifest=a.xhr.responseText,a.loadMediaPlayer())},this.xhr.onerror=function(b){a.facade.logger.error(b);a.player.unload()},this.xhr.open("Redirectc1f0.html",this.getSrc()),this.xhr.send())};ta.prototype.loadMediaPlayer=function(){var a,b,c=this;this.playWhenLoaded=this.data.loading=!0;this.unload();a=this.facade.getVideo();a.addEventListener("canplay",this.resumeHandlers.canplay);a.addEventListener("loadedmetadata",this.handlers.loadedmetadata);
a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);null!=a.src&&(a.src=null);!0===U.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);this.host=new cast.player.api.Host({mediaElement:a,url:this.getSrc()});this.host.updateManifestRequestInfo=function(a){a.url===c.getSrc()&&(a.skipRequest=!0,a.setResponse(c.manifest))};this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+
a);c.player.unload()};a=this.facade.retrieveProxy(q.NAME).getType();b=g.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case b.ism:this.protocol=cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};
ta.prototype.resumecomplete=function(){var a;null!=this.trackInfo&&(a=this.receiver.mediaManager.getMediaInformation(),this.receiver.chromecastPlayer.loadTracks(a.tracks),this.receiver.chromecastPlayer.editTracksInfo(this.trackInfo));ta.__super__.resumecomplete.call(this)};var E=function(a,b){var c,e,d;this.proxy=a;this.callbackMap={};this.handlerMap={};this.state=cast.receiver.media.PlayerState.IDLE;this.registerPlayer(b);try{d=document.createElement("style"),d.type="text/css",d.appendChild(document.createTextNode("")),
document.head.appendChild(d),e=d.sheet,c=e.insertRule(".akamai-html5.akamai-video::cue {color: #FFFFFF;background: #000000;visibility: hidden;}",0),this.cssRule=e.rules[c]}catch(f){U.error(f)}};E.prototype.proxy=null;E.prototype.player=null;E.prototype.callbackMap=null;E.prototype.handlerMap=null;E.prototype.state=null;E.prototype.activeTrackId=null;E.prototype.cssRule=null;E.prototype.textTrackStyle=null;E.prototype.registerPlayer=function(a){this.player=a;this.registerHandler("playing",this.setState.bind(this,
cast.receiver.media.PlayerState.PLAYING));this.registerHandler("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.registerHandler("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};E.prototype.registerHandler=function(a,b){this.handlerMap[a]=b;this.player.addEventListener(a,b)};E.prototype.removeHandler=function(a){this.player.removeEventListener(a,this.handlerMap[a]);this.handlerMap[a]=null;delete this.handlerMap[a]};E.prototype.registerCallback=
function(a,b){this.callbackMap[a]=b;this.player.addEventListener(a,b)};E.prototype.unregisterCallback=function(a){this.player.removeEventListener(a,this.callbackMap[a]);this.callbackMap[a]=null;delete this.callbackMap[a]};E.prototype.setState=function(a){a!==this.state&&(this.state=a,this.proxy.mediaManager.broadcastStatus(!0))};E.prototype.registerErrorCallback=function(a){this.registerCallback("error",a)};E.prototype.registerEndedCallback=function(a){this.registerCallback("ended",a)};E.prototype.registerLoadCallback=
function(a){this.registerCallback("loadedmetadata",a)};E.prototype.unregisterErrorCallback=function(){this.unregisterCallback("error")};E.prototype.unregisterEndedCallback=function(){this.unregisterCallback("ended")};E.prototype.unregisterLoadCallback=function(){this.unregisterCallback("loadedmetadata")};E.prototype.load=function(a,b,c,e){var d,f,g,k,m,n;f=this.proxy.mediaManager.getMediaInformation();d=f.customData;null!=e?this.editTracksInfo(e):this.activeTrackId=null;if(null!=(null!=d?d.feed:void 0)&&
null!=this.player.feed)f=d.feed,this.registerHandler("mediachange",this.mediachangeHandler.bind(this)),null!=f.data?this.player.feed.setData(f.data):null!=f.url&&this.player.feed.setURL(f.url);else{a={src:a,type:f.contentType,title:f.metadata.title,poster:null!=(k=f.metadata.images)?null!=(m=k[0])?m.url:void 0:void 0,description:f.metadata.subtitle,pubDate:new Date(f.releaseDate),metadata:d,duration:f.duration,startTime:c||(null!=d?null!=(n=d.media)?n.startTime:void 0:void 0)||0,autoplay:b};if(null!=
d.media)for(g in k=d.media,k)d=k[g],null==a[g]&&(a[g]=d);this.player.setMedia(a);this.setState(cast.receiver.media.PlayerState.BUFFERING);this.ccHandler=this.loadTracks.bind(this,f.tracks);this.player.addEventListener("loadedmetadata",this.ccHandler)}};E.prototype.ccHandler=null;E.prototype.loadTracks=function(a,b){var c,d,f;this.player.removeEventListener("loadedmetadata",this.ccHandler);0<(null!=a?a.length:void 0)&&(d=this.getTrack(0),null!=d&&(f=/ttml/.test(d.trackContentType)?"ttml":d.trackContentType,
c=this.proxy.facade.app.retrieveProxy("PlayerProxy").getActivePlaybackCore(),c.player.enableCaptions(!0,f,d.trackContentId)))};E.prototype.mediachangeHandler=function(a){var b;this.removeHandler("mediachange");a=this.player.getMedia();b=new cast.receiver.media.MediaInformation;b.contentId=a.src;b.contentType=a.type;b.customData=a.metadata;b.duration=a.duration;b.metadata={title:a.title,subtitle:a.description,images:[{url:a.poster}],releaseDate:a.pubDate.toISOString()};this.proxy.mediaManager.setMediaInformation(b,
!0)};E.prototype.reset=function(){};E.prototype.play=function(){this.player.play()};E.prototype.seek=function(a,b){this.player.setCurrentTime(a);switch(b){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};E.prototype.pause=function(){this.player.pause()};E.prototype.getState=function(){return this.state};E.prototype.getCurrentTimeSec=function(){return this.player.getCurrentTime()};E.prototype.getDurationSec=
function(){return this.player.getDuration()};E.prototype.getVolume=function(){var a;a=cast.receiver.media.Volume;a.level=this.player.getVolume();a.muted=this.player.getMuted();return a};E.prototype.setVolume=function(a){null!=a.level&&this.player.setVolume(a.level);!0===a.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1)};E.prototype.editTracksInfo=function(a){var b;null!=a.activeTrackIds&&(b=a.activeTrackIds[0],this.activeTrackId!==b&&(this.activeTrackId=b,b=this.player.getVideo().classList,
null!=this.activeTrackId?b.add("akamai-cc"):b.remove("akamai-cc")));a=a.textTrackStyle;null!=a&&null!=this.cssRule&&(this.textTrackStyle=a,null!=a.foregroundColor&&(this.cssRule.style.color=this.hexToRgba(a.foregroundColor)),null!=a.backgroundColor&&(this.cssRule.style.backgroundColor=this.hexToRgba(a.backgroundColor)),a.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS&&(this.cssRule.style.borderRadius=a.windowRoundedCornerRadius+"px"),null!=a.fontScale&&(this.cssRule.style.fontSize=
a.fontScale+"em"),null!=a.fontFamily&&(this.cssRule.style.fontFamily=a.fontFamily))};E.prototype.hexToRgba=function(a){var b,c,d;if(!/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(a))return a;d=parseInt(a.substring(1,3),16);c=parseInt(a.substring(3,5),16);b=parseInt(a.substring(5,7),16);a=9===a.length?parseInt(a.substring(7,9),16)/256:1;return"rgba("+d+","+c+","+b+","+a+")"};E.prototype.getTrack=function(a){var b;null==a&&(a=this.activeTrackId);b=this.proxy.mediaManager.getMediaInformation().tracks.filter(function(b){return b.trackId===
a})[0];null!=b&&null==b.trackContentType&&(b.trackContentType=cast.player.api.CaptionsType.CEA608);return b};var qe=function(){qe.__super__.constructor.call(this)};f(qe,nb);qe.prototype.onRegister=function(){this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver");qe.__super__.onRegister.call(this)};var Yb=function(){Yb.__super__.constructor.call(this)};f(Yb,nb);Yb.prototype.componentName="chromecast";Yb.prototype.controls=null;Yb.prototype.onRegister=function(){this.controls=new sb;Yb.__super__.onRegister.call(this)};
Yb.prototype.registerOverlay=function(){};Yb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_TARGET_CHANGE,d.CHANGE_PLAY_STATE]};Yb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_TARGET_CHANGE:b=a.target;"chromecast"===b?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case d.CHANGE_PLAY_STATE:this.controls.setState(a)}};var pc=function(){pc.__super__.constructor.call(this)};
f(pc,Yb);pc.prototype.chromeCastButton=null;pc.prototype.onRegister=function(){this.chromeCastButton=new Dd;this.facade.registerMediator(this.chromeCastButton);pc.__super__.onRegister.call(this)};pc.prototype.listNotificationInterests=function(){return pc.__super__.listNotificationInterests.call(this).concat([Zb.AVAILABILITY_CHANGE])};pc.prototype.handleNotification=function(a){var b;pc.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case Zb.AVAILABILITY_CHANGE:!0===
a?(this.sendNotification(d.ADD_CONTROL_STATE,"chromecast"),this.facade.app.sendNotification(d.ADD_CONTROL,this.chromeCastButton.getViewComponent())):(this.sendNotification(d.REMOVE_CONTROL_STATE,"chromecast"),this.facade.app.sendNotification(d.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}};var jg=function(){jg.__super__.constructor.call(this)};f(jg,J);jg.prototype.execute=function(a){this.facade.logger.debug("ChromeCastBreakStartCommand");a=this.facade.app.retrieveProxy(O.NAME).getActivePlaybackCore();
"chromecast"===a.getPlaybackCoreName()&&(a.unload(),a.src=null)};var F=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";F.__super__.constructor.call(this,a.receiver)};f(F,T);F.NAME=w.NAME;F.prototype.defaults={plugin:null,mpl:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]};F.prototype.messageBus=null;F.prototype.castReceiverManager=null;F.prototype.castMessageBus=null;F.prototype.startTime=0;F.prototype.currentTime=0;F.prototype.boundHandler=
null;F.prototype.amp=null;F.prototype.mediaManager=null;F.prototype.mediaManagerHandlers=null;F.prototype.playbackCore=null;F.prototype.teardownTimeout=null;F.prototype.chromecastPlayer=null;F.prototype.load=function(a){var b,c=this;b=this.getScript();null==("undefined"!==typeof cast&&null!==cast?cast.receiver:void 0)?null!=b&&""!==b?g.loadAMPScript(b,function(){c.loadMPL(a)}):this.loadComplete(!1,a):this.loadMPL(a)};F.prototype.loadMPL=function(a){var b,c=this;b=this.getConfigurationData().mpl;null==
("undefined"!==typeof cast&&null!==cast?cast.player:void 0)?null!=b&&""!==b?g.loadAMPScript(b,function(){c.loadComplete(!0,a)}):this.loadComplete(!1,a):this.loadComplete(!0,a)};F.prototype.loadComplete=function(a,b){this.loaded=a;"function"===typeof b&&b(a)};F.prototype.getLoaded=function(){return this.loaded||null!=("undefined"!==typeof cast&&null!==cast?cast.receiver:void 0)&&null!=("undefined"!==typeof cast&&null!==cast?cast.player:void 0)};F.prototype.initialize=function(){var a;this.sendNotification(d.INITIALIZED);
a=new ta(this.getConfigurationData().types,this);this.facade.app.retrieveProxy(O.NAME).registerPlaybackCore(a)};F.prototype.ready=function(){!0===this.facade.logger.enabled&&cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG);this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);this.castReceiverManager.onSenderConnected=
this.onSenderConnected.bind(this);this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.app.parent;this.amp.addEventListener("playstatechange",this.eventHandler.bind(this));this.amp.addEventListener("timeupdate",this.timeupdateHandler.bind(this));this.amp.addEventListener("durationchange",this.durationchangeHandler.bind(this));this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));
this.amp.addEventListener("pause",this.startTeardownTimeout.bind(this,1200));this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this));this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this));null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",
this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads")));this.chromecastPlayer=this.createPlayer(this.amp);this.mediaManager=new cast.receiver.MediaManager(this.chromecastPlayer);this.castMessageBus=this.castReceiverManager.getCastMessageBus(this.messageBus,cast.receiver.CastMessageBus.MessageType.JSON);
this.castMessageBus.onMessage=this.onMessage.bind(this);this.castReceiverManager.start();this.startTeardownTimeout(300)};F.prototype.createPlayer=function(a){return new E(this,a)};F.prototype.logEvent=function(a,b){null==a?a=b.type||"":null==b&&(b=a.data,a=b.type);this.facade.logger.log("[CHROMECAST] ",a,b)};F.prototype.onSenderConnected=function(a){this.logEvent("senderconnected",a);setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new R("senderconnected",a)),0)};F.prototype.onSenderDisconnected=
function(a){this.logEvent("sender disconnected",a);0===this.castReceiverManager.getSenders().length&&a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&this.teardown();setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new R("senderdisconnected",a)),0)};F.prototype.onMessage=function(a){var b,c,e,f,g;this.logEvent("message from sender",a);try{if(e=a.data||a.message,null!=e&&(g=e.type,b=e.details,"string"===typeof b&&(b=JSON.parse(b)),null!=b)){switch(g){case "captioning.visibilitychange":c=
[];!0===b.visibility&&c.push(0);this.chromecastPlayer.editTracksInfo({activeTrackIds:c});break;case "captioning.settingschange":f=new cast.receiver.media.TextTrackStyle;f.foregroundColor=b.fontColor;f.backgroundColor=b.backgroundColor;f.fontScale=b.size;f.windowColor=b.windowColor;f.fontFamily=b.fontFamily;f.edgeColor=b.edgeColor;f.edgeType=b.edgeType;this.chromecastPlayer.editTracksInfo({textTrackStyle:f});break;case "stats.visibilitychange":this.amp.stats.setHidden(!b.visibility)}this.sendNotification(d.DISPATCH_EVENT,
a)}}catch(k){this.error(k)}};F.prototype.onClose=function(a){this.logEvent("message channel closed",a)};F.prototype.timeupdateHandler=function(a){var b;b=Math.floor(this.amp.getCurrentTime());this.currentTime!==b&&(this.currentTime=b,this.send({type:a.type,details:{currentTime:b}}))};F.prototype.durationchangeHandler=function(a){this.send({type:a.type,details:{duration:this.amp.getDuration()}})};F.prototype.eventHandler=function(a){var b;b={type:a.type};null!=a.details&&(b.details=a.details);this.send(b)};
F.prototype.dispatchEvent=function(a,b){this.send({type:"dispatchevent",details:{target:a,event:b}});this.send({type:""+a+"."+b.type,details:b.details})};F.prototype.send=function(a){this.castMessageBus.broadcast(a)};F.prototype.startTeardownTimeout=function(a){this.stopTeardownTimeout();this.teardownTimeout=setTimeout(this.teardown.bind(this),1E3*a)};F.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)};F.prototype.teardown=function(){window.close()};var re=function(){re.__super__.constructor.call(this)};
f(re,J);re.prototype.execute=function(a){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(a.getBody())};var Dd=function(){Dd.__super__.constructor.call(this)};f(Dd,ab);Dd.prototype.componentName="chromecast";Dd.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(Zb.LAUNCH);return!1};var se=function(){se.__super__.constructor.call(this)};f(se,J);se.prototype.execute=function(a){this.facade.logger.debug("ChromeCastTogglePlayPauseCommand");this.facade.app.retrieveProxy(y.NAME);
switch(this.config.getPlayState()){case I.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case I.PAUSED:case I.READY:this.plugin.play();break;case I.PLAYING:case I.WAITING:this.plugin.pause()}};var sb=function(){sb.__super__.constructor.call(this)};f(sb,zb);sb.prototype.componentName="chromecast-controls";sb.prototype.message=null;sb.prototype.messageContainer=null;sb.prototype.button=null;sb.prototype.captioningActive=!1;sb.prototype.initializeNotifier=function(a){sb.__super__.initializeNotifier.call(this,
a);this.viewComponent.innerHTML="";this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=new Dd};sb.prototype.onRegister=function(){var a,b,c;this.facade.registerMediator(this.button);sb.__super__.onRegister.call(this);a=new fc(this.controlBar);a.setDisabled(!0);this.facade.registerMediator(a);this.sendNotification(d.ADD_CONTROL,this.button.getViewComponent());
this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||!0!==(null!=(b=this.facade.app.parent.captioning)?null!=(c=b.config)?c.enabled:void 0:void 0)||(a=new ab(this.localizationManager.getString(v.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(a),this.captionButton=a.getViewComponent(),this.sendNotification(d.ADD_CONTROL,this.captionButton),this.sendNotification(d.ADD_CONTROL_STATE,
"cc-enabled"))};sb.prototype.captionButtonClick=function(){this.captioningActive=!this.captioningActive;try{this.facade.app.parent.chromecast.postMessage({type:"captioning.visibilitychange",details:{visibility:this.captioningActive}})}catch(a){this.facade.logger.error("[AMP Chromecast Captioning Error]",a)}this.sendNotification(this.captioningActive?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"cc-active")};var jd=function(){jd.__super__.constructor.call(this)};f(jd,J);jd.prototype.execute=
function(a){var b,c;b=a.getBody().target;a=this.facade.app.getAPI();"chromecast"===b?a.pause():"amp"===b&&(b=this.config.getCurrentTime(),c=a.getDuration(),0!==b&&(b!==c&&(this.seekedHandler=this.seeked.bind(this),a.addEventListener("seeked",this.seekedHandler)),this.facade.app.getAPI().setCurrentTime(b)))};jd.prototype.seeked=function(a){a=this.facade.app.getAPI();a.removeEventListener("seeked",this.seekedHandler);a.play()};jd.prototype.seekedHandler=null;var ua=function(a,b){ua.__super__.constructor.call(this,
a,b)};f(ua,Z);ua.NAME="ChromeCastPlugin";ua.prototype.moduleName="chromecast";ua.prototype.initialize=function(){(this.isSender()||this.isReceiver())&&ua.__super__.initialize.call(this)};ua.prototype.createModel=function(){this.isSender()?this.registerProxy(new x(this.config)):this.isReceiver()&&this.registerProxy(new F(this.config))};ua.prototype.createController=function(){this.isSender()?(this.registerCommand(d.PLAYBACK_TARGET_CHANGE,jd),this.registerCommand(Zb.LAUNCH,pe),this.registerCommand(P.TOGGLE_PLAY_PAUSE,
se),this.registerCommand(P.SEEK,re),this.registerCommand(A.VISIBILITY_CHANGE,gg),this.registerCommand(A.SETTINGS_CHANGE,hg)):this.isReceiver()&&(this.registerCommand(d.READY,ig),this.registerCommand(m.BREAK_START,jg))};ua.prototype.createView=function(){this.isSender()?this.registerMediator(new pc):this.isReceiver()&&this.registerMediator(new qe)};ua.prototype.createAPI=function(){return new Tc(this)};ua.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};ua.prototype.isReceiver=
function(){return/CrKey/.test(navigator.userAgent)};ua.prototype.listNotificationInterests=function(){return[d.READY,A.VISIBILITY_CHANGE,A.SETTINGS_CHANGE,m.BREAK_START]};ua.prototype.listNotificationEvents=function(){return ua.__super__.listNotificationEvents.call(this).concat([Zb.AVAILABILITY_CHANGE])};ua.prototype.listNotificationPublications=function(){return ua.__super__.listNotificationPublications.apply(this,arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,
d.REMOVE_CONTROL_STATE,d.PLAYBACK_TARGET_CHANGE,Zb.AVAILABILITY_CHANGE,d.MEDIA_CHANGE])};r.registerPlugin("chromecast","html",ua);var Uc=function(a,b){Uc.__super__.constructor.call(this,a,b)};f(Uc,ua);Uc.NAME="ChromeCastFlashPlugin";Uc.prototype.createModel=function(){this.registerProxy(new x(this.config))};Uc.prototype.createController=function(){this.registerCommand(d.PLAYBACK_TARGET_CHANGE,jd);this.registerCommand(Zb.LAUNCH,pe);this.registerCommand(Ka.FEED_CHANGED,fg);this.registerCommand(P.TOGGLE_PLAY_PAUSE,
se);this.registerCommand(P.SEEK,re)};Uc.prototype.createView=function(){this.registerMediator(new Yb)};Uc.prototype.listNotificationInterests=function(){return[Ka.FEED_CHANGED,d.CHANGE_MEDIA]};var x=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";x.__super__.constructor.call(this,a.sender)};f(x,T);x.NAME=w.NAME;x.prototype.defaults={plugin:null,applicationID:"44B6E47D"};x.prototype.session=null;x.prototype.media=null;x.prototype.messageBus=null;x.prototype.feed=null;x.prototype.playState=
null;x.prototype.currentTime=null;x.prototype.duration=null;x.prototype.receiverAvailable=!1;x.prototype.getLoaded=function(){return this.loaded||null!=("undefined"!==typeof chrome&&null!==chrome?chrome.cast:void 0)};x.prototype.initialize=function(){var a,b=this;"undefined"!==typeof chrome&&null!==chrome&&null!=(a=chrome.cast)&&a.isAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(a,d){!0===a?b.initializeCastApi():b.logError("cast load error",d)}};x.prototype.initializeCastApi=
function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,this.sessionListener.bind(this),this.receiverListener.bind(this),chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};x.prototype.onInitSuccess=function(a){this.logEvent("init success",a)};x.prototype.onInitError=function(a){this.logError("init error",a)};x.prototype.receiverListener=function(a){this.receiverAvailable=
"available"===a;this.sendNotification(Zb.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+(this.receiverAvailable?"found":"list empty"))};x.prototype.sessionListener=function(a){this.logEvent("session listener",a);if(0!==a.media.length)this.onMediaDiscovered(a.media[0]);else this.onRequestSessionSuccess(a)};x.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};x.prototype.send=function(a){this.session.sendMessage(this.messageBus,
a,this.onMessageSuccess.bind(this),this.onMessageError.bind(this))};x.prototype.onLaunchError=function(a){this.logError("launch error.",a)};x.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));a=this.facade.app.retrieveProxy(n.NAME);0===this.session.media.length&&this.loadMedia(a.getCurrentTime())};x.prototype.onUpdate=
function(a){a||this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"amp"})};x.prototype.onMessageSuccess=function(a){this.logEvent("message sent",a)};x.prototype.onMessageError=function(a){this.logError("message error",a)};x.prototype.onMessage=function(a,b){var c,e,f;b=JSON.parse(b);f=b.type;c=b.details;switch(f){case "playstatechange":this.playState=c.newState;this.sendNotification(d.CHANGE_PLAY_STATE,this.playState);break;case "timeupdate":this.currentTime=c.currentTime;this.sendNotification(d.DISPLAY_TIME,
{currentTime:this.currentTime,duration:this.duration});break;case "durationchange":0===c.duration||isNaN(c.duration)||(this.duration=c.duration,this.sendNotification(d.DURATION_CHANGE,this.duration));break;case "dispatchevent":e="player"===c.target?this.facade.app.parent:this.facade.app.parent[c.target],null!=e&&e.dispatchEvent(c.event)}"timeupdate"!==f&&this.logEvent("message from receiver",b);this.sendNotification(d.DISPATCH_EVENT,{type:"message",message:b})};x.prototype.onStop=function(a){this.logEvent("stop");
this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};x.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};x.prototype.onStopError=function(a){this.logError("stop error",a)};x.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};x.prototype.logError=function(a,b){this.facade.logger.error("[AMP CHROMECAST ERROR] "+a,b)};x.prototype.getPlayState=function(){return this.playState};x.prototype.getFeed=function(){return this.feed};
x.prototype.setFeed=function(a){this.feed!==a&&(this.feed=a,null!=this.session&&this.loadMedia())};x.prototype.loadMedia=function(a){var b,c,d,f,h,k;null==a&&(a=0);d=this.facade.app.retrieveProxy(q.NAME).getData();null!=d&&(b=function(a){return-1<wg.indexOf(a)?"maybe":""},f=g.selectSource(d.source,b),null!=f&&(b={media:d},c=null!=(h=this.facade.app.getModules())?null!=(k=h.feed)?k.getAPI():void 0:void 0,null!=c&&(b.feed={data:c.getData(),url:c.getURL()}),a=this.mediaToLoadRequest(d,f,a,b),this.session.loadMedia(a,
this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))))};x.prototype.mediaToLoadRequest=function(a,b,c,d){var f,g,k;g=new chrome.cast.media.GenericMediaMetadata;g.title=a.title;g.subtitle=a.description;g.image=[new chrome.cast.Image(a.poster)];g.releaseDate=a.pubDate.toISOString();b=new chrome.cast.media.MediaInfo(b.src,b.type);b.duration=a.duration;b.customData=d;b.metadata=g;if(0<(null!=(k=a.track)?k.length:void 0))for(b.tracks=[],k=a.track,f=d=0,g=k.length;d<g;f=++d)a=k[f],f=new chrome.cast.media.Track(f,
chrome.cast.media.TrackType.TEXT),f.subtype=chrome.cast.media.TextTrackType.CAPTIONS,f.name="Closed Captions",f.language=a.srclang,f.customData=a,f.trackContentId=a.src,f.trackContentType=a.type,b.tracks.push(f);b=new chrome.cast.media.LoadRequest(b);b.currentTime=c;return b};x.prototype.onMediaDiscovered=function(a){null!=this.media&&this.media.removeUpdateListener(this.mediaStatusUpdate);this.media=a;this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this);this.media.addUpdateListener(this.mediaStatusUpdate);
this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{target:"chromecast"})};x.prototype.onMediaStatusUpdate=function(a){this.logEvent("mediastatusupdate",a)};x.prototype.onMediaError=function(a){this.logError("media error",a)};x.prototype.play=function(){this.media.play()};x.prototype.pause=function(){this.media.pause()};x.prototype.setCurrentTime=function(a){var b;b=new chrome.cast.media.SeekRequest;b.currentTime=a;this.media.seek(b)};x.prototype.getCurrentTime=function(){return this.currentTime};x.prototype.isReceiverAvailable=
function(){return this.receiverAvailable};var Ib=function(a,b){Ib.__super__.constructor.call(this,a,b);this.plugin=new Uc(this.player,b);a.registerModule(this.plugin)};f(Ib,G);Ib.NAME="ChromeCastWrapper";Ib.prototype.buttonId="chromecastBtn";Ib.prototype.plugin=null;Ib.prototype.getAPI=function(){return this.plugin.getAPI()};Ib.prototype.createXML=function(a){if(!1===this.hasControls(a))return a;null==this.getControls(a)[this.buttonId]&&this.createElement(a,this.buttonId);return a};Ib.prototype.listNotificationInterests=
function(){return Ib.__super__.listNotificationInterests.call(this).concat([p.ELEMENT_EVENT,p.LOAD_STATE_READY,p.LOAD_STATE_LOADING,p.APPLICATION_STATE_CHANGE,Zb.AVAILABILITY_CHANGE])};Ib.prototype.handleNotification=function(a){var b,c;Ib.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case p.ELEMENT_EVENT:"click"===a.type&&a.element===this.buttonId&&this.plugin.sendNotification(Zb.LAUNCH);break;case Zb.AVAILABILITY_CHANGE:null!=(null!=(c=this.player.video)?c.setPlayerProperty:
void 0)&&this.player.video.setPlayerProperty(this.buttonId,{visible:a});break;case p.APPLICATION_STATE_CHANGE:case p.LOAD_STATE_READY:case p.LOAD_STATE_LOADING:(b=this.plugin.getAPI().isReceiverAvailable())&&this.player.video.setPlayerProperty(this.buttonId,{state:1}),this.player.video.setPlayerProperty(this.buttonId,{visible:b})}};r.registerPlugin("chromecast","flash",Ib);var Zb={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"},Tc=function(a){var b;Tc.__super__.constructor.call(this,a);
b=a.retrieveProxy(x.NAME);null!=b&&(this.postMessage=b.send.bind(b),a.isSender()?(this.play=b.play.bind(b),this.pause=b.pause.bind(b),this.setCurrentTime=b.setCurrentTime.bind(b),this.isReceiverAvailable=b.isReceiverAvailable.bind(b),this.getSession=function(){return b.session},this.getMedia=function(){return b.media}):(this.getMediaManager=function(){return b.mediaManager},this.getCastReceiverManager=function(){return b.castReceiverManager},this.getCastMessageBus=function(){return b.castMessageBus},
this.getCastChannel=function(){return b.castChannel}))};f(Tc,yb);Tc.prototype.play=function(){};Tc.prototype.pause=function(){};Tc.prototype.setCurrentTime=function(a){};Tc.prototype.isReceiverAvailable=function(){};Tc.prototype.postMessage=function(a){};var Vc=function(a,b){Vc.__super__.constructor.call(this,a,b)};f(Vc,Z);Vc.NAME="DASHPlugin";Vc.prototype.moduleName="dash";Vc.prototype.createModel=function(){this.registerProxy(new Cd(this.config))};Vc.prototype.registered=function(){this.app.registerCommand(d.CHANGE_DISPLAY_STATE,
eg);Vc.__super__.registered.call(this)};r.registerPlugin("dash","html",Vc);var Ed=function(a,b){Ed.__super__.constructor.call(this,a,b)};f(Ed,Z);Ed.NAME="ControlPlugin";Ed.prototype.listNotificationPublications=function(){return Ed.__super__.listNotificationPublications.apply(this,arguments).concat([d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE])};var ib=function(a){ib.__super__.constructor.call(this,null,null,null,a,onclick)};f(ib,ab);ib.prototype.panel=null;ib.prototype.timeout=
null;ib.prototype.closePanelDelayed=null;ib.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);"desktop"===g.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):this.onclick=this.togglePanel;ib.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(d.ADD_CONTROL,this.viewComponent)};ib.prototype.openPanel=function(){clearTimeout(this.timeout);
this.sendNotification(Aa.OPEN_PANEL,this.panel);this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};ib.prototype.closePanel=function(){g.isMouseOverElement(this.panel.viewComponent)||g.isMouseOverElement(this.viewComponent)||this.facade.app.retrieveProxy(y.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(Aa.CLOSE_PANEL,this.panel))};ib.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),
350)};ib.prototype.togglePanel=function(){this.sendNotification(Aa.TOGGLE_PANEL,this.panel)};ib.prototype.clickPanel=function(){};var kd=function(a){kd.__super__.constructor.call(this,a,null,null,null)};f(kd,S);kd.prototype.componentType="panel";kd.prototype.control=null;kd.prototype.onRegister=function(){kd.__super__.onRegister.call(this);this.sendNotification(Aa.ADD_PANEL,this)};var Wc=function(a){Wc.__super__.constructor.call(this,a)};f(Wc,T);Wc.NAME=w.NAME;Wc.prototype.loaded=!0;Wc.prototype.controlName=
null;Wc.prototype.getControlName=function(){return this.controlName};Wc.prototype.setControlName=function(a){return this.controlName=a};var ld=function(a){ld.__super__.constructor.call(this,a)};f(ld,Wc);ld.NAME=w.NAME;ld.prototype.hidden=!0;ld.prototype.getHidden=function(){return this.hidden};ld.prototype.setHidden=function(a){return this.hidden=a};var md=function(a){md.__super__.constructor.call(this,a)};f(md,ld);md.NAME=w.NAME;md.prototype.controlName="volume";md.prototype.defaults={direction:"vertical"};
md.prototype.getDirection=function(){return this.data.direction};var kg=function(a,b){null==b&&(b={});kg.__super__.constructor.call(this,a,b)};f(kg,G);kg.NAME="VolumePanelWrapper";r.registerPlugin("volumepanel","flash",kg);var lg=function(a){lg.__super__.constructor.call(this,a)};f(lg,ib);lg.prototype.clickHandler=function(){this.sendNotification(d.TOGGLE_MUTED)};var Xc=function(a,b){Xc.__super__.constructor.call(this,a,b)};f(Xc,L);Xc.prototype.componentName="volume";Xc.prototype.setValue=function(a){Xc.__super__.setValue.call(this,
a);this.sendNotification(d.CHANGE_VOLUME,a);this.sendNotification(Tf.UPDATE_SETTINGS,{volume:a});return a};Xc.prototype.listNotificationInterests=function(){return[d.VOLUME_CHANGE,d.READY]};Xc.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:this.updateValue(this.facade.app.retrieveProxy(n.NAME).getVolume());break;case d.VOLUME_CHANGE:this.updateValue(a.getBody())}};var ya=function(){ya.__super__.constructor.call(this);this.controls={}};f(ya,nb);ya.prototype.panel=null;ya.prototype.control=
null;ya.prototype.separator=null;ya.prototype.controls=null;ya.prototype.labels=null;ya.prototype.closed=!0;ya.prototype.panelClass=kd;ya.prototype.controlClass=ib;ya.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;null==this.labels&&(this.labels={});this.createPanelControls(name)};ya.prototype.createControl=
function(a){a=new this.controlClass(a);this.facade.registerMediator(a);return a};ya.prototype.createPanel=function(a){a=new this.panelClass(a);this.facade.registerMediator(a);return a};ya.prototype.createSeparator=function(a){return this.create(["separator","icon"],this.panel)};ya.prototype.createPanelControls=function(a){var b,c,d;a=this.plugin.getConfigurationData();for(b in a)c=a[b],!0===c&&(this.controls[b]=this.addPanelControl(new ab(this.localizationManager.getString(this.labels[b]),null,null,
b,null!=(d=this.panelButtonClickHandler)?"function"===typeof d.bind?d.bind(this,b):void 0:void 0)))};ya.prototype.addPanelControl=function(a){this.facade.registerMediator(a);this.panel.getViewComponent().appendChild(a.getViewComponent());return a};ya.prototype.panelButtonClickHandler=function(){this.sendNotification(Aa.CLOSE_PANEL,this.panel)};var jb=function(){jb.__super__.constructor.call(this)};f(jb,ya);jb.prototype.componentName="volume";jb.prototype.slider=null;jb.prototype.level=null;jb.prototype.controlClass=
lg;jb.prototype.onRegister=function(){jb.__super__.onRegister.call(this);this.slider=new Xc(this.panel,this.plugin.getDirection());this.facade.registerMediator(this.slider)};jb.prototype.updateVolumeButton=function(a){a=Math.ceil(10*a);a!==this.level&&(null!=this.level&&this.sendNotification(d.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=a,this.sendNotification(d.ADD_CONTROL_STATE,"volume-"+this.level))};jb.prototype.listNotificationInterests=function(){return jb.__super__.listNotificationInterests.apply(this,
arguments).concat([d.VOLUME_CHANGE])};jb.prototype.handleNotification=function(a){jb.__super__.handleNotification.call(this,a);switch(a.getName()){case d.VOLUME_CHANGE:this.updateVolumeButton(a.body)}};var Fd=function(a,b){Fd.__super__.constructor.call(this,a,b)};f(Fd,Ed);Fd.NAME="ControlPanelPlugin";Fd.prototype.listNotificationPublications=function(){var a,b;return Fd.__super__.listNotificationPublications.call(this).concat(function(){var c;c=[];for(a in Aa)b=Aa[a],c.push(b);return c}())};var kb=
function(a,b){kb.__super__.constructor.call(this,a,b)};f(kb,Fd);kb.NAME="VolumePanelPlugin";kb.prototype.moduleName="volumepanel";kb.prototype.isVolumeSettable=function(){var a,b,c,d;c=!1;d=this.app.getVideo();b=d.volume;a=Math.random();d.volume=a;d.volume===a&&(c=!0);d.volume=b;return c};kb.prototype.initialize=function(){this.isVolumeSettable()&&kb.__super__.initialize.call(this)};kb.prototype.createModel=function(){this.registerProxy(new md(this.config))};kb.prototype.createView=function(){this.isVolumeSettable()&&
this.registerMediator(new jb)};kb.prototype.listNotificationPublications=function(){return kb.__super__.listNotificationPublications.apply(this,arguments).concat([d.CHANGE_VOLUME,d.TOGGLE_MUTED,Tf.UPDATE_SETTINGS])};kb.prototype.listNotificationInterests=function(){return kb.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE,d.READY])};r.registerPlugin("volumepanel","html",kb);mg.akamai={amp:{AMP:r,utils:{Utils:g,QueryString:ed,Clock:Pb,Alarm:dd,Logger:U}}};window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP Premier - Weather Channel v0.16.0.0006",
mg)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP Premier - Weather Channel v0.16.0.0006")})();